System.register(["./coordinates-converts-utils-bf8713a9.js","./index-6f89fc06.js","./event-enum-5a5aa40e.js","./deprecated-3.0.0-f3f53c89.js","./renderable-component-658e90bd.js","./transform-utils-1f4a2037.js","./view-7d20208a.js","./screen-d46ce30a.js","./json-asset-0797cbb7.js","./camera-component-f1234106.js","./find-5191dd26.js","./factory-9595a1ce.js","./sprite-frame-30c057cb.js","./sprite-6803ade1.js","./renderable-2d-386fc016.js","./deprecated-a9ea7a0c.js"],(function(t){"use strict";var e,i,o,n,r,s,a,h,l,c,u,_,p,d,g,f,y,b,T,m,v,S,C,E,O,w,A,L,D,P,z,I,x,R,B,H,N,M,k,V,F,j,G,U,W,Z,Y,X,q,K,Q,J,$,tt,et,it,ot,nt,rt,st,at,ht,lt,ct,ut,_t,pt,dt,gt,ft;return{setters:[function(t){e=t.bg,i=t.bE,o=t.e2,n=t.ec,r=t.fr,s=t.e3,a=t.bn,h=t.b2,l=t.e4,c=t.e5,u=t.fs,_=t.fw,p=t.ft,d=t.fS,g=t.eb,f=t.fu,y=t.fp,b=t.fV,T=t.e7,m=t.e8,v=t.d_,S=t.ea,C=t.bD,E=t.b9,O=t.l,w=t.fW,A=t.ck,L=t.cl,D=t.eu,P=t.es,z=t.et,I=t.bc,x=t.fm,R=t.w,B=t.b0,H=t.bm,N=t.fl,M=t.fn,k=t.c2,V=t.t,F=t.c,j=t.e9,G=t.fX,U=t.d,W=t.e6,Z=t.eB,Y=t.c7,X=t.eD},function(t){q=t.E,K=t.f,Q=t.D},function(t){J=t.q,$=t.T,tt=t.m},function(){},function(t){et=t.N},function(){},function(t){it=t.v,ot=t.g,nt=t.j,rt=t.V},function(t){st=t.s},function(){},function(t){at=t.S,ht=t.C,lt=t.P},function(){},function(){},function(t){ct=t.S},function(t){ut=t.a,_t=t.B,pt=t.c,dt=t.V},function(t){gt=t.R,ft=t.U},function(){}],execute:function(){var yt,bt,Tt,mt,vt,St,Ct,Et,Ot,wt,At,Lt,Dt,Pt,zt,It,xt,Rt,Bt,Ht,Nt,Mt,kt,Vt,Ft,jt,Gt,Ut,Wt,Zt,Yt,Xt,qt,Kt,Qt,Jt,$t,te,ee,ie,oe,ne,re,se,ae,he,le,ce,ue,_e,pe,de,ge,fe=new e;!function(t){t[t.NONE=0]="NONE",t[t.COLOR=1]="COLOR",t[t.SPRITE=2]="SPRITE",t[t.SCALE=3]="SCALE"}(pe||(pe={})),i(pe),function(t){t.NORMAL="normal",t.HOVER="hover",t.PRESSED="pressed",t.DISABLED="disabled"}(de||(de={})),function(t){t.CLICK="click"}(ge||(ge={}));var ye,be,Te,me,ve=(yt=o("cc.Button"),bt=u(),Tt=_(110),mt=p(),vt=d(ft),St=n(et),Ct=g(),Et=f(),Ot=g(),wt=f(),At=n(pe),Lt=g(),Dt=f(),Pt=f(),zt=f(),It=f(),xt=f(),Rt=y(),Bt=b(),Ht=f(),Nt=f(),Mt=n(ct),kt=f(),Vt=n(ct),Ft=f(),jt=n(ct),Gt=f(),Ut=n(ct),Wt=f(),Zt=n([q]),Yt=g(),Xt=f(),ye=yt(qt=bt(qt=Tt(qt=mt(qt=vt(qt=r((_e=ue=function(t){function i(){for(var i,o=arguments.length,n=new Array(o),r=0;r<o;r++)n[r]=arguments[r];return i=t.call.apply(t,[this].concat(n))||this,T(i,"clickEvents",Qt,m(i)),T(i,"_interactable",Jt,m(i)),T(i,"_transition",$t,m(i)),T(i,"_normalColor",te,m(i)),T(i,"_hoverColor",ee,m(i)),T(i,"_pressedColor",ie,m(i)),T(i,"_disabledColor",oe,m(i)),T(i,"_normalSprite",ne,m(i)),T(i,"_hoverSprite",re,m(i)),T(i,"_pressedSprite",se,m(i)),T(i,"_disabledSprite",ae,m(i)),T(i,"_duration",he,m(i)),T(i,"_zoomScale",le,m(i)),T(i,"_target",ce,m(i)),i._pressed=!1,i._hovered=!1,i._fromColor=new e,i._toColor=new e,i._time=0,i._transitionFinished=!0,i._fromScale=new h,i._toScale=new h,i._originalScale=null,i._sprite=null,i._targetScale=new h,i}s(i,t);var o=i.prototype;return o.__preload=function(){this.target||(this.target=this.node);var t=this.node.getComponent(ut);t&&(this._normalSprite=t.spriteFrame),this._applyTarget(),this._resetState()},o.onEnable=function(){this._registerNodeEvent()},o.onDisable=function(){this._resetState(),this._unregisterNodeEvent()},o.update=function(t){var i=this.target;if(!this._transitionFinished&&i&&(this._transition===pe.COLOR||this._transition===pe.SCALE)){this._time+=t;var o=1;if(this._duration>0&&(o=this._time/this._duration),o>=1&&(o=1),this._transition===pe.COLOR){var n=i._uiProps.uiComp;e.lerp(fe,this._fromColor,this._toColor,o),n&&(n.color=fe)}else this.transition===pe.SCALE&&(i.getScale(this._targetScale),this._targetScale.x=a(this._fromScale.x,this._toScale.x,o),this._targetScale.y=a(this._fromScale.y,this._toScale.y,o),i.setScale(this._targetScale));1===o&&(this._transitionFinished=!0)}},o._resizeNodeToTargetNode=function(){this.target&&this.target._uiProps.uiTransformComp},o._resetState=function(){this._pressed=!1,this._hovered=!1;var t=this.target;if(t){var e=t.getComponent(gt);if(e){var i=this._transition;i===pe.COLOR&&this._interactable?e.color=this._normalColor:i===pe.SCALE&&this._originalScale&&t.setScale(this._originalScale),this._transitionFinished=!0}}},o._registerNodeEvent=function(){this.node.on(J.TOUCH_START,this._onTouchBegan,this),this.node.on(J.TOUCH_MOVE,this._onTouchMove,this),this.node.on(J.TOUCH_END,this._onTouchEnded,this),this.node.on(J.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(J.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.on(J.MOUSE_LEAVE,this._onMouseMoveOut,this)},o._registerTargetEvent=function(t){t.on(J.TRANSFORM_CHANGED,this._onTargetTransformChanged,this)},o._unregisterNodeEvent=function(){this.node.off(J.TOUCH_START,this._onTouchBegan,this),this.node.off(J.TOUCH_MOVE,this._onTouchMove,this),this.node.off(J.TOUCH_END,this._onTouchEnded,this),this.node.off(J.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(J.MOUSE_ENTER,this._onMouseMoveIn,this),this.node.off(J.MOUSE_LEAVE,this._onMouseMoveOut,this)},o._unregisterTargetEvent=function(t){t.off(J.TRANSFORM_CHANGED)},o._getTargetSprite=function(t){var e=null;return t&&(e=t.getComponent(ut)),e},o._applyTarget=function(){this.target&&(this._sprite=this._getTargetSprite(this.target),this._originalScale||(this._originalScale=new h),h.copy(this._originalScale,this.target.getScale()))},o._onTargetSpriteFrameChanged=function(t){this._transition===pe.SPRITE&&this._setCurrentStateSpriteFrame(t.spriteFrame)},o._setCurrentStateSpriteFrame=function(t){if(t)switch(this._getButtonState()){case de.NORMAL:this._normalSprite=t;break;case de.HOVER:this._hoverSprite=t;break;case de.PRESSED:this._pressedSprite=t;break;case de.DISABLED:this._disabledSprite=t}},o._onTargetColorChanged=function(t){this._transition===pe.COLOR&&this._setCurrentStateColor(t)},o._setCurrentStateColor=function(t){switch(this._getButtonState()){case de.NORMAL:this._normalColor=t;break;case de.HOVER:this._hoverColor=t;break;case de.PRESSED:this._pressedColor=t;break;case de.DISABLED:this._disabledColor=t}},o._onTargetTransformChanged=function(t){t|$.SCALE&&this._originalScale&&this._transition===pe.SCALE&&this._transitionFinished&&h.copy(this._originalScale,this.target.getScale())},o._onTouchBegan=function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed=!0,this._updateState(),t&&(t.propagationStopped=!0))},o._onTouchMove=function(t){if(this._interactable&&this.enabledInHierarchy&&this._pressed&&t){var e=t.touch;if(e){var i,o=this.node._uiProps.uiTransformComp.isHit(e.getUILocation());this._transition===pe.SCALE&&this.target&&this._originalScale?o?(h.copy(this._fromScale,this._originalScale),h.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._transitionFinished=!1):(this._time=0,this._transitionFinished=!0,this.target.setScale(this._originalScale)):(i=o?de.PRESSED:de.NORMAL,this._applyTransition(i)),t&&(t.propagationStopped=!0)}}},o._onTouchEnded=function(t){this._interactable&&this.enabledInHierarchy&&(this._pressed&&(q.emitEvents(this.clickEvents,t),this.node.emit(ge.CLICK,this)),this._pressed=!1,this._updateState(),t&&(t.propagationStopped=!0))},o._onTouchCancel=function(){this._interactable&&this.enabledInHierarchy&&(this._pressed=!1,this._updateState())},o._onMouseMoveIn=function(){!this._pressed&&this.interactable&&this.enabledInHierarchy&&(this._transition!==pe.SPRITE||this._hoverSprite)&&(this._hovered||(this._hovered=!0,this._updateState()))},o._onMouseMoveOut=function(){this._hovered&&(this._hovered=!1,this._updateState())},o._updateState=function(){var t=this._getButtonState();this._applyTransition(t)},o._getButtonState=function(){var t=de.NORMAL;return this._interactable?this._pressed?t=de.PRESSED:this._hovered&&(t=de.HOVER):t=de.DISABLED,t.toString()},o._updateColorTransition=function(t){var e,i=this[t+"Color"],o=null===(e=this.target)||void 0===e?void 0:e.getComponent(gt);o&&(t===de.DISABLED?o.color=i:(this._fromColor=o.color.clone(),this._toColor=i,this._time=0,this._transitionFinished=!1))},o._updateSpriteTransition=function(t){var e=this[t+"Sprite"];this._sprite&&e&&(this._sprite.spriteFrame=e)},o._updateScaleTransition=function(t){this._interactable&&(t===de.PRESSED?this._zoomUp():this._zoomBack())},o._zoomUp=function(){this._originalScale&&(h.copy(this._fromScale,this._originalScale),h.multiplyScalar(this._toScale,this._originalScale,this._zoomScale),this._time=0,this._transitionFinished=!1)},o._zoomBack=function(){this.target&&this._originalScale&&(h.copy(this._fromScale,this.target.getScale()),h.copy(this._toScale,this._originalScale),this._time=0,this._transitionFinished=!1)},o._applyTransition=function(t){var e=this._transition;e===pe.COLOR?this._updateColorTransition(t):e===pe.SPRITE?this._updateSpriteTransition(t):e===pe.SCALE&&this._updateScaleTransition(t)},l(i,[{key:"target",get:function(){return this._target||this.node},set:function(t){this._target!==t&&(this._target&&this._unregisterTargetEvent(this._target),this._target=t,this._applyTarget())}},{key:"interactable",get:function(){return this._interactable},set:function(t){this._interactable=t,this._updateState(),this._interactable||this._resetState()}},{key:"_resizeToTarget",set:function(t){t&&this._resizeNodeToTargetNode()}},{key:"transition",get:function(){return this._transition},set:function(t){this._transition!==t&&(this._transition===pe.COLOR?this._updateColorTransition(de.NORMAL):this._transition===pe.SPRITE&&this._updateSpriteTransition(de.NORMAL),this._transition=t,this._updateState())}},{key:"normalColor",get:function(){return this._normalColor},set:function(t){this._normalColor!==t&&(this._normalColor.set(t),this._updateState())}},{key:"pressedColor",get:function(){return this._pressedColor},set:function(t){this._pressedColor!==t&&this._pressedColor.set(t)}},{key:"hoverColor",get:function(){return this._hoverColor},set:function(t){this._hoverColor!==t&&this._hoverColor.set(t)}},{key:"disabledColor",get:function(){return this._disabledColor},set:function(t){this._disabledColor!==t&&(this._disabledColor.set(t),this._updateState())}},{key:"duration",get:function(){return this._duration},set:function(t){this._duration!==t&&(this._duration=t)}},{key:"zoomScale",get:function(){return this._zoomScale},set:function(t){this._zoomScale!==t&&(this._zoomScale=t)}},{key:"normalSprite",get:function(){return this._normalSprite},set:function(t){if(this._normalSprite!==t){this._normalSprite=t;var e=this.node.getComponent(ut);e&&(e.spriteFrame=t),this._updateState()}}},{key:"pressedSprite",get:function(){return this._pressedSprite},set:function(t){this._pressedSprite!==t&&(this._pressedSprite=t,this._updateState())}},{key:"hoverSprite",get:function(){return this._hoverSprite},set:function(t){this._hoverSprite!==t&&(this._hoverSprite=t,this._updateState())}},{key:"disabledSprite",get:function(){return this._disabledSprite},set:function(t){this._disabledSprite!==t&&(this._disabledSprite=t,this._updateState())}}]),i}(v),ue.Transition=pe,ue.EventType=ge,c((Kt=_e).prototype,"target",[St,Ct,Et],Object.getOwnPropertyDescriptor(Kt.prototype,"target"),Kt.prototype),c(Kt.prototype,"interactable",[Ot,wt],Object.getOwnPropertyDescriptor(Kt.prototype,"interactable"),Kt.prototype),c(Kt.prototype,"transition",[At,Lt,Dt],Object.getOwnPropertyDescriptor(Kt.prototype,"transition"),Kt.prototype),c(Kt.prototype,"normalColor",[Pt],Object.getOwnPropertyDescriptor(Kt.prototype,"normalColor"),Kt.prototype),c(Kt.prototype,"pressedColor",[zt],Object.getOwnPropertyDescriptor(Kt.prototype,"pressedColor"),Kt.prototype),c(Kt.prototype,"hoverColor",[It],Object.getOwnPropertyDescriptor(Kt.prototype,"hoverColor"),Kt.prototype),c(Kt.prototype,"disabledColor",[xt],Object.getOwnPropertyDescriptor(Kt.prototype,"disabledColor"),Kt.prototype),c(Kt.prototype,"duration",[Rt,Bt,Ht],Object.getOwnPropertyDescriptor(Kt.prototype,"duration"),Kt.prototype),c(Kt.prototype,"zoomScale",[Nt],Object.getOwnPropertyDescriptor(Kt.prototype,"zoomScale"),Kt.prototype),c(Kt.prototype,"normalSprite",[Mt,kt],Object.getOwnPropertyDescriptor(Kt.prototype,"normalSprite"),Kt.prototype),c(Kt.prototype,"pressedSprite",[Vt,Ft],Object.getOwnPropertyDescriptor(Kt.prototype,"pressedSprite"),Kt.prototype),c(Kt.prototype,"hoverSprite",[jt,Gt],Object.getOwnPropertyDescriptor(Kt.prototype,"hoverSprite"),Kt.prototype),c(Kt.prototype,"disabledSprite",[Ut,Wt],Object.getOwnPropertyDescriptor(Kt.prototype,"disabledSprite"),Kt.prototype),Qt=c(Kt.prototype,"clickEvents",[Zt,S,Yt,Xt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Jt=c(Kt.prototype,"_interactable",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),$t=c(Kt.prototype,"_transition",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return pe.NONE}}),te=c(Kt.prototype,"_normalColor",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.WHITE.clone()}}),ee=c(Kt.prototype,"_hoverColor",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e(211,211,211,255)}}),ie=c(Kt.prototype,"_pressedColor",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return e.WHITE.clone()}}),oe=c(Kt.prototype,"_disabledColor",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new e(124,124,124,255)}}),ne=c(Kt.prototype,"_normalSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),re=c(Kt.prototype,"_hoverSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),se=c(Kt.prototype,"_pressedSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ae=c(Kt.prototype,"_disabledSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=c(Kt.prototype,"_duration",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),le=c(Kt.prototype,"_zoomScale",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.2}}),ce=c(Kt.prototype,"_target",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qt=Kt))||qt)||qt)||qt)||qt)||qt)||qt,t({Button:ye,ButtonComponent:ye}),ye),Se=function(){function t(){}return t.add=function(t){var e=this._tabIndexList;-1===e.indexOf(t)&&e.push(t)},t.remove=function(t){var e=this._tabIndexList,i=e.indexOf(t);-1!==i&&e.splice(i,1)},t.resort=function(){this._tabIndexList.sort((function(t,e){return t._delegate.tabIndex-e._delegate.tabIndex}))},t.next=function(t){var e=this._tabIndexList,i=e.indexOf(t);if(t.setFocus(!1),-1!==i){var o=e[i+1];o&&o._delegate.tabIndex>=0&&o.setFocus(!0)}},t}();Se._tabIndexList=[],function(t){t[t.DEFAULT=0]="DEFAULT",t[t.DONE=1]="DONE",t[t.SEND=2]="SEND",t[t.SEARCH=3]="SEARCH",t[t.GO=4]="GO",t[t.NEXT=5]="NEXT"}(be||(be={})),C(be),function(t){t[t.ANY=0]="ANY",t[t.EMAIL_ADDR=1]="EMAIL_ADDR",t[t.NUMERIC=2]="NUMERIC",t[t.PHONE_NUMBER=3]="PHONE_NUMBER",t[t.URL=4]="URL",t[t.DECIMAL=5]="DECIMAL",t[t.SINGLE_LINE=6]="SINGLE_LINE"}(Te||(Te={})),C(Te),function(t){t[t.PASSWORD=0]="PASSWORD",t[t.SENSITIVE=1]="SENSITIVE",t[t.INITIAL_CAPS_WORD=2]="INITIAL_CAPS_WORD",t[t.INITIAL_CAPS_SENTENCE=3]="INITIAL_CAPS_SENTENCE",t[t.INITIAL_CAPS_ALL_CHARACTERS=4]="INITIAL_CAPS_ALL_CHARACTERS",t[t.DEFAULT=5]="DEFAULT"}(me||(me={})),C(me);var Ce,Ee,Oe,we,Ae,Le,De,Pe,ze,Ie,xe,Re,Be,He,Ne,Me,ke,Ve,Fe,je,Ge,Ue,We,Ze,Ye,Xe,qe,Ke,Qe,Je,$e,ti,ei,ii,oi,ni,ri,si,ai,hi,li,ci,ui,_i,pi,di,gi,fi,yi,bi,Ti,mi,vi,Si,Ci,Ei,Oi,wi,Ai,Li,Di,Pi=function(){function t(){this._editing=!1,this._delegate=null}var e=t.prototype;return e.init=function(){},e.onEnable=function(){},e.update=function(){},e.onDisable=function(){this._editing&&this.endEditing()},e.clear=function(){this._delegate=null},e.setTabIndex=function(){},e.setSize=function(){},e.setFocus=function(t){t?this.beginEditing():this.endEditing()},e.isFocused=function(){return this._editing},e.beginEditing=function(){},e.endEditing=function(){},t}(),zi=new E,Ii=new E,xi=new h,Ri=null,Bi=0,Hi=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this)._delegate=null,e._inputMode=-1,e._inputFlag=-1,e._returnType=-1,e.__eventListeners={},e.__fullscreen=!1,e.__autoResize=!1,e.__orientationChanged=void 0,e._edTxt=null,e._isTextArea=!1,e._textLabelFont=null,e._textLabelFontSize=null,e._textLabelFontColor=null,e._textLabelAlign=null,e._placeholderLabelFont=null,e._placeholderLabelFontSize=null,e._placeholderLabelFontColor=null,e._placeholderLabelAlign=null,e._placeholderLineHeight=null,e._placeholderStyleSheet=null,e._domId="EditBoxId_"+ ++Bi,e}s(e,t);var i=e.prototype;return i.init=function(t){t&&(this._delegate=t,t.inputMode===Te.ANY?this._createTextArea():this._createInput(),Se.add(this),this.setTabIndex(t.tabIndex),this._initStyleSheet(),this._registerEventListeners(),this._addDomToGameContainer(),this.__fullscreen=it.isAutoFullScreenEnabled(),this.__autoResize=it._resizeWithBrowserSize)},i.clear=function(){this._removeEventListeners(),this._removeDomFromGameContainer(),Se.remove(this),Ri===this&&(Ri=null),this._delegate=null},i.update=function(){this._updateMatrix()},i.setTabIndex=function(t){this._edTxt.tabIndex=t,Se.resort()},i.setSize=function(t,e){var i=this._edTxt;i&&(i.style.width=t+"px",i.style.height=e+"px")},i.beginEditing=function(){Ri&&Ri!==this&&Ri.setFocus(!1),this._editing=!0,Ri=this,this._delegate._editBoxEditingDidBegan(),this._showDom(),this._edTxt.focus()},i.endEditing=function(){this._edTxt.blur()},i._createInput=function(){this._isTextArea=!1,this._edTxt=document.createElement("input")},i._createTextArea=function(){this._isTextArea=!0,this._edTxt=document.createElement("textarea")},i._addDomToGameContainer=function(){O.GAME_VIEW&&this._edTxt?(O.gameView.container.appendChild(this._edTxt),O.gameView.head.appendChild(this._placeholderStyleSheet)):ot.container&&this._edTxt&&(ot.container.appendChild(this._edTxt),document.head.appendChild(this._placeholderStyleSheet))},i._removeDomFromGameContainer=function(){(O.GAME_VIEW?w(O.gameView.container,this._edTxt):w(ot.container,this._edTxt))&&this._edTxt&&(O.GAME_VIEW?O.gameView.container.removeChild(this._edTxt):ot.container.removeChild(this._edTxt)),(O.GAME_VIEW?w(O.gameView.head,this._placeholderStyleSheet):w(document.head,this._placeholderStyleSheet))&&(O.GAME_VIEW?O.gameView.head.removeChild(this._placeholderStyleSheet):document.head.removeChild(this._placeholderStyleSheet)),this._edTxt=null,this._placeholderStyleSheet=null},i._showDom=function(){this._updateMaxLength(),this._updateInputType(),this._updateStyleSheet(),this._edTxt&&this._delegate&&(this._edTxt.style.display="",this._delegate._hideLabels()),A.isMobile&&this._showDomOnMobile()},i._hideDom=function(){var t=this._edTxt;t&&this._delegate&&(t.style.display="none",this._delegate._showLabels()),A.isMobile&&this._hideDomOnMobile()},i._showDomOnMobile=function(){A.os===A.OS_ANDROID&&(this.__fullscreen&&(it.enableAutoFullScreen(!1),st.exitFullScreen()),this.__autoResize&&it.resizeWithBrowserSize(!1),this._adjustWindowScroll())},i._hideDomOnMobile=function(){var t=this;A.os===A.OS_ANDROID&&(this.__autoResize&&it.resizeWithBrowserSize(!0),setTimeout((function(){Ri||t.__fullscreen&&it.enableAutoFullScreen(!0)}),400)),this._scrollBackWindow()},i._adjustWindowScroll=function(){var t=this;setTimeout((function(){window.scrollY<40&&t._edTxt.scrollIntoView({block:"start",inline:"nearest",behavior:"smooth"})}),400)},i._scrollBackWindow=function(){setTimeout((function(){A.browserType!==A.BROWSER_TYPE_WECHAT||A.os!==A.OS_IOS?window.scrollTo(0,0):window.top&&window.top.scrollTo(0,0)}),400)},i._updateMatrix=function(){if(this._edTxt){var t=this._delegate.node,e=it.getScaleX(),i=it.getScaleY(),o=1,n=1;O.GAME_VIEW&&(o=O.gameView.canvas.width/O.game.canvas.width,n=O.gameView.canvas.height/O.game.canvas.height),e*=o,i*=n;var r=it.getViewportRect(),s=it.getDevicePixelRatio();t.getWorldMatrix(zi);var a=t._uiProps.uiTransformComp;if(a&&h.set(xi,-a.anchorX*a.width,-a.anchorY*a.height,xi.z),E.transform(zi,zi,xi),t._uiProps.uiTransformComp){var l=K.root.batcher2D.getFirstRenderCamera(t);if(l){l.node.getWorldRT(Ii);var c=Ii.m12,u=Ii.m13,_=nt.center;Ii.m12=_.x-(Ii.m00*c+Ii.m04*u),Ii.m13=_.y-(Ii.m01*c+Ii.m05*u),E.multiply(Ii,Ii,zi),e/=s,i/=s;var p=O.GAME_VIEW?O.gameView.container:ot.container,d=Ii.m00*e,g=zi.m01,f=zi.m04,y=Ii.m05*i,b=parseInt(p&&p.style.paddingLeft||"0");b+=r.x*o/s;var T=parseInt(p&&p.style.paddingBottom||"0");T+=r.y/s;var m="matrix("+d+","+-g+","+-f+","+y+","+(Ii.m12*e+b)+","+-(Ii.m13*i+T)+")";this._edTxt.style.transform=m,this._edTxt.style["-webkit-transform"]=m,this._edTxt.style["transform-origin"]="0px 100% 0px",this._edTxt.style["-webkit-transform-origin"]="0px 100% 0px"}}}},i._updateInputType=function(){var t=this._delegate,e=t.inputMode,i=t.inputFlag,o=t.returnType,n=this._edTxt;if(this._inputMode!==e||this._inputFlag!==i||this._returnType!==o){if(this._inputMode=e,this._inputFlag=i,this._returnType=o,this._isTextArea){var r="none";return i===me.INITIAL_CAPS_ALL_CHARACTERS?r="uppercase":i===me.INITIAL_CAPS_WORD&&(r="capitalize"),void(n.style.textTransform=r)}if(n=n,i===me.PASSWORD)return n.type="password",void(n.style.textTransform="none");var s=n.type;e===Te.EMAIL_ADDR?s="email":e===Te.NUMERIC||e===Te.DECIMAL?s="number":e===Te.PHONE_NUMBER?(s="number",n.pattern="[0-9]*"):e===Te.URL?s="url":(s="text",o===be.SEARCH&&(s="search")),n.type=s;var a="none";i===me.INITIAL_CAPS_ALL_CHARACTERS?a="uppercase":i===me.INITIAL_CAPS_WORD&&(a="capitalize"),n.style.textTransform=a}},i._updateMaxLength=function(){var t=this._delegate.maxLength;t<0&&(t=65535),this._edTxt.maxLength=t},i._initStyleSheet=function(){if(this._edTxt){var t=this._edTxt;t.style.color="#000000",t.style.border="0px",t.style.background="transparent",t.style.width="100%",t.style.height="100%",t.style.outline="medium",t.style.padding="0",t.style.textTransform="none",t.style.display="none",t.style.position="absolute",t.style.bottom="0px",t.style.left="2px",t.className="cocosEditBox",t.style.fontFamily="Arial",t.id=this._domId,this._isTextArea?(t.style.resize="none",t.style.overflowY="scroll"):((t=t).type="text",t.style["-moz-appearance"]="textfield"),this._placeholderStyleSheet=document.createElement("style")}},i._updateStyleSheet=function(){var t=this._delegate,e=this._edTxt;e&&t&&(e.value=t.string,e.placeholder=t.placeholder,this._updateTextLabel(t.textLabel),this._updatePlaceholderLabel(t.placeholderLabel))},i._updateTextLabel=function(t){if(t){var e=t.font;e=!e||e instanceof _t?t.fontFamily:e._fontFamily;var i=t.fontSize*t.node.scale.y;if((this._textLabelFont!==e||this._textLabelFontSize!==i||this._textLabelFontColor!==t.fontColor||this._textLabelAlign!==t.horizontalAlign)&&(this._textLabelFont=e,this._textLabelFontSize=i,this._textLabelFontColor=t.fontColor,this._textLabelAlign=t.horizontalAlign,this._edTxt)){var o=this._edTxt;switch(o.style.fontSize=i+"px",o.style.color=t.color.toCSS(),o.style.fontFamily=e,t.horizontalAlign){case pt.HorizontalAlign.LEFT:o.style.textAlign="left";break;case pt.HorizontalAlign.CENTER:o.style.textAlign="center";break;case pt.HorizontalAlign.RIGHT:o.style.textAlign="right"}}}},i._updatePlaceholderLabel=function(t){if(t){var e=t.font;e=!e||e instanceof _t?t.fontFamily:t.font._fontFamily;var i=t.fontSize*t.node.scale.y;if(this._placeholderLabelFont!==e||this._placeholderLabelFontSize!==i||this._placeholderLabelFontColor!==t.fontColor||this._placeholderLabelAlign!==t.horizontalAlign||this._placeholderLineHeight!==t.fontSize){this._placeholderLabelFont=e,this._placeholderLabelFontSize=i,this._placeholderLabelFontColor=t.fontColor,this._placeholderLabelAlign=t.horizontalAlign,this._placeholderLineHeight=t.fontSize;var o=this._placeholderStyleSheet,n=t.color.toCSS(),r=t.fontSize,s="";switch(t.horizontalAlign){case pt.HorizontalAlign.LEFT:s="left";break;case pt.HorizontalAlign.CENTER:s="center";break;case pt.HorizontalAlign.RIGHT:s="right"}o.innerHTML="#"+this._domId+"::-webkit-input-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}#"+this._domId+"::-moz-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}#"+this._domId+"::-ms-input-placeholder{text-transform: initial;-family: "+e+";font-size: "+i+"px;color: "+n+";line-height: "+r+"px;text-align: "+s+";}",O.sys.browserType===O.sys.BROWSER_TYPE_EDGE&&(o.innerHTML+="#"+this._domId+"::-ms-clear{display: none;}")}}},i._registerEventListeners=function(){var t=this;if(this._edTxt){var e=this._edTxt,i=!1,o=this.__eventListeners;o.compositionStart=function(){i=!0},o.compositionEnd=function(){i=!1,t._delegate._editBoxTextChanged(e.value)},o.onInput=function(){if(!i){var o=t._delegate,n=o.maxLength;n>=0&&(e.value=e.value.slice(0,n)),o._editBoxTextChanged(e.value)}},o.onClick=function(){t._editing&&A.isMobile&&t._adjustWindowScroll()},o.onKeydown=function(i){i.keyCode===L.KEY.enter?(i.propagationStopped=!0,t._delegate._editBoxEditingReturn(),t._isTextArea||e.blur()):i.keyCode===L.KEY.tab&&(i.propagationStopped=!0,i.preventDefault(),Se.next(t))},o.onBlur=function(){A.isMobile&&i&&o.compositionEnd(),t._editing=!1,Ri=null,t._hideDom(),t._delegate._editBoxEditingDidEnded()},e.addEventListener("compositionstart",o.compositionStart),e.addEventListener("compositionend",o.compositionEnd),e.addEventListener("input",o.onInput),e.addEventListener("keydown",o.onKeydown),e.addEventListener("blur",o.onBlur),e.addEventListener("touchstart",o.onClick)}},i._removeEventListeners=function(){if(this._edTxt){var t=this._edTxt,e=this.__eventListeners;t.removeEventListener("compositionstart",e.compositionStart),t.removeEventListener("compositionend",e.compositionEnd),t.removeEventListener("input",e.onInput),t.removeEventListener("keydown",e.onKeydown),t.removeEventListener("blur",e.onBlur),t.removeEventListener("touchstart",e.onClick),e.compositionStart=null,e.compositionEnd=null,e.onInput=null,e.onKeydown=null,e.onBlur=null,e.onClick=null}},e}(Pi);!function(t){t.EDITING_DID_BEGAN="editing-did-began",t.EDITING_DID_ENDED="editing-did-ended",t.TEXT_CHANGED="text-changed",t.EDITING_RETURN="editing-return"}(Di||(Di={}));var Ni,Mi,ki,Vi,Fi,ji,Gi,Ui,Wi,Zi,Yi,Xi,qi,Ki,Qi,Ji,$i,to,eo,io,oo,no,ro,so,ao,ho,lo,co,uo,_o,po,go,fo,yo,bo,To,mo,vo,So,Co,Eo,Oo,wo,Ao,Lo,Do,Po,zo,Io,xo,Ro,Bo,Ho,No,Mo=function(e){return t({EditBox:e,EditBoxComponent:e}),e}((Ce=o("cc.EditBox"),Ee=u(),Oe=_(100),we=p(),Ae=d(ft),Le=g(),De=f(),Pe=g(),ze=f(),Ie=n(pt),xe=g(),Re=f(),Be=n(pt),He=g(),Ne=f(),Me=n(ct),ke=g(),Ve=f(),Fe=n(me),je=g(),Ge=f(),Ue=n(Te),We=g(),Ze=f(),Ye=n(be),Xe=g(),qe=f(),Ke=g(),Qe=f(),Je=g(),$e=f(),ti=n([q]),ei=g(),ii=f(),oi=n([q]),ni=g(),ri=f(),si=n([q]),ai=g(),hi=f(),li=n([q]),ci=g(),ui=f(),Ce(_i=Ee(_i=Oe(_i=we(_i=Ae(_i=r((Li=Ai=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,T(e,"editingDidBegan",di,m(e)),T(e,"textChanged",gi,m(e)),T(e,"editingDidEnded",fi,m(e)),T(e,"editingReturn",yi,m(e)),e._impl=null,e._background=null,T(e,"_textLabel",bi,m(e)),T(e,"_placeholderLabel",Ti,m(e)),T(e,"_returnType",mi,m(e)),T(e,"_string",vi,m(e)),T(e,"_tabIndex",Si,m(e)),T(e,"_backgroundImage",Ci,m(e)),T(e,"_inputFlag",Ei,m(e)),T(e,"_inputMode",Oi,m(e)),T(e,"_maxLength",wi,m(e)),e._isLabelVisible=!1,e}s(e,t);var i=e.prototype;return i.__preload=function(){this._init()},i.onEnable=function(){this._registerEvent(),this._impl&&this._impl.onEnable()},i.update=function(){this._impl&&this._impl.update()},i.onDisable=function(){this._unregisterEvent(),this._impl&&this._impl.onDisable()},i.onDestroy=function(){this._impl&&this._impl.clear()},i.setFocus=function(){this._impl&&this._impl.setFocus(!0)},i.focus=function(){this._impl&&this._impl.setFocus(!0)},i.blur=function(){this._impl&&this._impl.setFocus(!1)},i.isFocused=function(){return!!this._impl&&this._impl.isFocused()},i._editBoxEditingDidBegan=function(){q.emitEvents(this.editingDidBegan,this),this.node.emit(Di.EDITING_DID_BEGAN,this)},i._editBoxEditingDidEnded=function(){q.emitEvents(this.editingDidEnded,this),this.node.emit(Di.EDITING_DID_ENDED,this)},i._editBoxTextChanged=function(t){t=this._updateLabelStringStyle(t,!0),this.string=t,q.emitEvents(this.textChanged,t,this),this.node.emit(Di.TEXT_CHANGED,this)},i._editBoxEditingReturn=function(){q.emitEvents(this.editingReturn,this),this.node.emit(Di.EDITING_RETURN,this)},i._showLabels=function(){this._isLabelVisible=!0,this._updateLabels()},i._hideLabels=function(){this._isLabelVisible=!1,this._textLabel&&(this._textLabel.node.active=!1),this._placeholderLabel&&(this._placeholderLabel.node.active=!1)},i._onTouchBegan=function(t){t.propagationStopped=!0},i._onTouchCancel=function(t){t.propagationStopped=!0},i._onTouchEnded=function(t){this._impl&&this._impl.beginEditing(),t.propagationStopped=!0},i._init=function(){this._createBackgroundSprite(),this._updatePlaceholderLabel(),this._updateTextLabel(),this._isLabelVisible=!0,this.node.on(J.SIZE_CHANGED,this._resizeChildNodes,this),(this._impl=new e._EditBoxImpl).init(this),this._updateString(this._string),this._syncSize()},i._createBackgroundSprite=function(){this._background||(this._background=this.node.getComponent(ut),this._background||(this._background=this.node.addComponent(ut))),this._background.type=ut.Type.SLICED,this._background.spriteFrame=this._backgroundImage},i._updateTextLabel=function(){var t=this._textLabel;if(!t){var e=this.node.getChildByName("TEXT_LABEL");e||(e=new et("TEXT_LABEL")),(t=e.getComponent(pt))||(t=e.addComponent(pt)),e.parent=this.node,this._textLabel=t}this._textLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),t.overflow=pt.Overflow.CLAMP,this._inputMode===Te.ANY?(t.verticalAlign=dt.TOP,t.enableWrapText=!0):t.enableWrapText=!1,t.string=this._updateLabelStringStyle(this._string)},i._updatePlaceholderLabel=function(){var t=this._placeholderLabel;if(!t){var e=this.node.getChildByName("PLACEHOLDER_LABEL");e||(e=new et("PLACEHOLDER_LABEL")),(t=e.getComponent(pt))||(t=e.addComponent(pt)),e.parent=this.node,this._placeholderLabel=t}this._placeholderLabel.node._uiProps.uiTransformComp.setAnchorPoint(0,1),t.overflow=pt.Overflow.CLAMP,this._inputMode===Te.ANY?(t.verticalAlign=dt.TOP,t.enableWrapText=!0):t.enableWrapText=!1,t.string=this.placeholder},i._syncSize=function(){var t=this.node._uiProps.uiTransformComp,e=t.contentSize;if(this._background){var i=this._background.node._uiProps.uiTransformComp;i.anchorPoint=t.anchorPoint,i.setContentSize(e)}this._updateLabelPosition(e),this._impl&&this._impl.setSize(e.width,e.height)},i._updateLabels=function(){if(this._isLabelVisible){var t=this._string;this._textLabel&&(this._textLabel.node.active=""!==t),this._placeholderLabel&&(this._placeholderLabel.node.active=""===t)}},i._updateString=function(t){var e=this._textLabel;if(e){var i=t;i&&(i=this._updateLabelStringStyle(i)),e.string=i,this._updateLabels()}},i._updateLabelStringStyle=function(t,e){void 0===e&&(e=!1);var i=this._inputFlag;if(e||i!==me.PASSWORD)i===me.INITIAL_CAPS_ALL_CHARACTERS?t=t.toUpperCase():i===me.INITIAL_CAPS_WORD?t=t.replace(/(?:^|\s)\S/g,(function(t){return t.toUpperCase()})):i===me.INITIAL_CAPS_SENTENCE&&(t=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}(t));else{for(var o="",n=t.length,r=0;r<n;++r)o+="●";t=o}return t},i._registerEvent=function(){this.node.on(J.TOUCH_START,this._onTouchBegan,this),this.node.on(J.TOUCH_END,this._onTouchEnded,this)},i._unregisterEvent=function(){this.node.off(J.TOUCH_START,this._onTouchBegan,this),this.node.off(J.TOUCH_END,this._onTouchEnded,this)},i._updateLabelPosition=function(t){var e=this.node._uiProps.uiTransformComp,i=-e.anchorX*e.width,o=-e.anchorY*e.height,n=this._placeholderLabel,r=this._textLabel;r&&(r.node._uiProps.uiTransformComp.setContentSize(t.width-2,t.height),r.node.position=new h(i+2,o+t.height,r.node.position.z),this._inputMode===Te.ANY&&(r.verticalAlign=dt.TOP),r.enableWrapText=this._inputMode===Te.ANY),n&&(n.node._uiProps.uiTransformComp.setContentSize(t.width-2,t.height),n.lineHeight=t.height,n.node.position=new h(i+2,o+t.height,n.node.position.z),this._inputMode===Te.ANY&&(n.verticalAlign=dt.TOP),n.enableWrapText=this._inputMode===Te.ANY)},i._resizeChildNodes=function(){var t=this.node._uiProps.uiTransformComp,e=this._textLabel&&this._textLabel.node;e&&(e.position=new h(-t.width/2,t.height/2,e.position.z),e._uiProps.uiTransformComp.setContentSize(t.contentSize));var i=this._placeholderLabel&&this._placeholderLabel.node;i&&(i.position=new h(-t.width/2,t.height/2,i.position.z),i._uiProps.uiTransformComp.setContentSize(t.contentSize));var o=this._background&&this._background.node;o&&o._uiProps.uiTransformComp.setContentSize(t.contentSize)},l(e,[{key:"string",get:function(){return this._string},set:function(t){this._maxLength>=0&&t.length>=this._maxLength&&(t=t.slice(0,this._maxLength)),this._string=t,this._updateString(t)}},{key:"placeholder",get:function(){return this._placeholderLabel?this._placeholderLabel.string:""},set:function(t){this._placeholderLabel&&(this._placeholderLabel.string=t)}},{key:"textLabel",get:function(){return this._textLabel},set:function(t){this._textLabel!==t&&(this._textLabel=t,this._textLabel&&(this._updateTextLabel(),this._updateLabels()))}},{key:"placeholderLabel",get:function(){return this._placeholderLabel},set:function(t){this._placeholderLabel!==t&&(this._placeholderLabel=t,this._placeholderLabel&&(this._updatePlaceholderLabel(),this._updateLabels()))}},{key:"backgroundImage",get:function(){return this._backgroundImage},set:function(t){this._backgroundImage!==t&&(this._backgroundImage=t,this._createBackgroundSprite())}},{key:"inputFlag",get:function(){return this._inputFlag},set:function(t){this._inputFlag=t,this._updateString(this._string)}},{key:"inputMode",get:function(){return this._inputMode},set:function(t){this._inputMode!==t&&(this._inputMode=t,this._updateTextLabel(),this._updatePlaceholderLabel())}},{key:"returnType",get:function(){return this._returnType},set:function(t){this._returnType=t}},{key:"maxLength",get:function(){return this._maxLength},set:function(t){this._maxLength=t}},{key:"tabIndex",get:function(){return this._tabIndex},set:function(t){this._tabIndex!==t&&(this._tabIndex=t,this._impl&&this._impl.setTabIndex(t))}}]),e}(v),Ai._EditBoxImpl=Pi,Ai.KeyboardReturnType=be,Ai.InputFlag=me,Ai.InputMode=Te,Ai.EventType=Di,c((pi=Li).prototype,"string",[Le,De],Object.getOwnPropertyDescriptor(pi.prototype,"string"),pi.prototype),c(pi.prototype,"placeholder",[Pe,ze],Object.getOwnPropertyDescriptor(pi.prototype,"placeholder"),pi.prototype),c(pi.prototype,"textLabel",[Ie,xe,Re],Object.getOwnPropertyDescriptor(pi.prototype,"textLabel"),pi.prototype),c(pi.prototype,"placeholderLabel",[Be,He,Ne],Object.getOwnPropertyDescriptor(pi.prototype,"placeholderLabel"),pi.prototype),c(pi.prototype,"backgroundImage",[Me,ke,Ve],Object.getOwnPropertyDescriptor(pi.prototype,"backgroundImage"),pi.prototype),c(pi.prototype,"inputFlag",[Fe,je,Ge],Object.getOwnPropertyDescriptor(pi.prototype,"inputFlag"),pi.prototype),c(pi.prototype,"inputMode",[Ue,We,Ze],Object.getOwnPropertyDescriptor(pi.prototype,"inputMode"),pi.prototype),c(pi.prototype,"returnType",[Ye,Xe,qe],Object.getOwnPropertyDescriptor(pi.prototype,"returnType"),pi.prototype),c(pi.prototype,"maxLength",[Ke,Qe],Object.getOwnPropertyDescriptor(pi.prototype,"maxLength"),pi.prototype),c(pi.prototype,"tabIndex",[Je,$e],Object.getOwnPropertyDescriptor(pi.prototype,"tabIndex"),pi.prototype),di=c(pi.prototype,"editingDidBegan",[ti,S,ei,ii],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gi=c(pi.prototype,"textChanged",[oi,S,ni,ri],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fi=c(pi.prototype,"editingDidEnded",[si,S,ai,hi],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),yi=c(pi.prototype,"editingReturn",[li,S,ci,ui],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),bi=c(pi.prototype,"_textLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ti=c(pi.prototype,"_placeholderLabel",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),mi=c(pi.prototype,"_returnType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return be.DEFAULT}}),vi=c(pi.prototype,"_string",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Si=c(pi.prototype,"_tabIndex",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ci=c(pi.prototype,"_backgroundImage",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ei=c(pi.prototype,"_inputFlag",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return me.DEFAULT}}),Oi=c(pi.prototype,"_inputMode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Te.ANY}}),wi=c(pi.prototype,"_maxLength",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),_i=pi))||_i)||_i)||_i)||_i)||_i)||_i));"object"!=typeof window||"object"!=typeof document||D||P||z||(Mo._EditBoxImpl=Hi);var ko,Vo,Fo,jo,Go,Uo,Wo=J;!function(t){t[t.NONE=0]="NONE",t[t.HORIZONTAL=1]="HORIZONTAL",t[t.VERTICAL=2]="VERTICAL",t[t.GRID=3]="GRID"}(ko||(ko={})),i(ko),function(t){t[t.NONE=0]="NONE",t[t.CONTAINER=1]="CONTAINER",t[t.CHILDREN=2]="CHILDREN"}(Vo||(Vo={})),i(Vo),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(Fo||(Fo={})),i(Fo),function(t){t[t.BOTTOM_TO_TOP=0]="BOTTOM_TO_TOP",t[t.TOP_TO_BOTTOM=1]="TOP_TO_BOTTOM"}(jo||(jo={})),i(jo),function(t){t[t.LEFT_TO_RIGHT=0]="LEFT_TO_RIGHT",t[t.RIGHT_TO_LEFT=1]="RIGHT_TO_LEFT"}(Go||(Go={})),i(Go),function(t){t[t.NONE=0]="NONE",t[t.FIXED_ROW=1]="FIXED_ROW",t[t.FIXED_COL=2]="FIXED_COL"}(Uo||(Uo={})),i(Uo);var Zo,Yo,Xo,qo,Ko,Qo,Jo,$o,tn,en,on,nn,rn,sn,an,hn,ln,cn,un,_n,pn,dn,gn,fn=new h,yn=function(e){return t({Layout:e,LayoutComponent:e}),e}((Ni=o("cc.Layout"),Mi=u(),ki=_(110),Vi=p(),Fi=d(ft),ji=x(),Gi=f(),Ui=x(),Wi=f(),Zi=n(ko),Yi=f(),Xi=n(Vo),qi=x(),Ki=f(),Qi=x(),Ji=f(),$i=n(Fo),to=f(),eo=f(),io=f(),oo=f(),no=f(),ro=f(),so=f(),ao=n(jo),ho=f(),lo=n(Go),co=f(),uo=n(Uo),_o=x(),po=f(),go=x(),fo=f(),yo=f(),Ni(bo=Mi(bo=ki(bo=Vi(bo=Fi(bo=r((No=Ho=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,T(e,"_resizeMode",mo,m(e)),T(e,"_layoutType",vo,m(e)),T(e,"_cellSize",So,m(e)),T(e,"_startAxis",Co,m(e)),T(e,"_paddingLeft",Eo,m(e)),T(e,"_paddingRight",Oo,m(e)),T(e,"_paddingTop",wo,m(e)),T(e,"_paddingBottom",Ao,m(e)),T(e,"_spacingX",Lo,m(e)),T(e,"_spacingY",Do,m(e)),T(e,"_verticalDirection",Po,m(e)),T(e,"_horizontalDirection",zo,m(e)),T(e,"_constraint",Io,m(e)),T(e,"_constraintNum",xo,m(e)),T(e,"_affectedByScale",Ro,m(e)),T(e,"_isAlign",Bo,m(e)),e._layoutSize=new I(300,200),e._layoutDirty=!0,e._childrenDirty=!1,e._usefulLayoutObj=[],e._init=!1,e}s(e,t);var i=e.prototype;return i.updateLayout=function(t){void 0===t&&(t=!1),(this._layoutDirty||t)&&this.node.children.length>0&&(this._doLayout(),this._layoutDirty=!1)},i.onEnable=function(){this._addEventListeners();var t=this.node._uiProps.uiTransformComp;t.contentSize.equals(I.ZERO)&&t.setContentSize(this._layoutSize),this._doLayoutDirty()},i.onDisable=function(){this._usefulLayoutObj.length=0,this._removeEventListeners()},i._checkUsefulObj=function(){this._usefulLayoutObj.length=0;for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e],o=i._uiProps.uiTransformComp;i.activeInHierarchy&&o&&this._usefulLayoutObj.push(o)}},i._addEventListeners=function(){K.on(Q.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.on(Wo.SIZE_CHANGED,this._resized,this),this.node.on(Wo.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.on(Wo.CHILD_ADDED,this._childAdded,this),this.node.on(Wo.CHILD_REMOVED,this._childRemoved,this),this.node.on(Wo.SIBLING_ORDER_CHANGED,this._childrenChanged,this),this._addChildrenEventListeners()},i._removeEventListeners=function(){K.off(Q.EVENT_AFTER_UPDATE,this.updateLayout,this),this.node.off(Wo.SIZE_CHANGED,this._resized,this),this.node.off(Wo.ANCHOR_CHANGED,this._doLayoutDirty,this),this.node.off(Wo.CHILD_ADDED,this._childAdded,this),this.node.off(Wo.CHILD_REMOVED,this._childRemoved,this),this.node.off(Wo.SIBLING_ORDER_CHANGED,this._childrenChanged,this),this._removeChildrenEventListeners()},i._addChildrenEventListeners=function(){for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e];i.on(Wo.SIZE_CHANGED,this._doLayoutDirty,this),i.on(Wo.TRANSFORM_CHANGED,this._transformDirty,this),i.on(Wo.ANCHOR_CHANGED,this._doLayoutDirty,this),i.on("active-in-hierarchy-changed",this._childrenChanged,this)}},i._removeChildrenEventListeners=function(){for(var t=this.node.children,e=0;e<t.length;++e){var i=t[e];i.off(Wo.SIZE_CHANGED,this._doLayoutDirty,this),i.off(Wo.TRANSFORM_CHANGED,this._transformDirty,this),i.off(Wo.ANCHOR_CHANGED,this._doLayoutDirty,this),i.off("active-in-hierarchy-changed",this._childrenChanged,this)}},i._childAdded=function(t){t.on(Wo.SIZE_CHANGED,this._doLayoutDirty,this),t.on(Wo.TRANSFORM_CHANGED,this._transformDirty,this),t.on(Wo.ANCHOR_CHANGED,this._doLayoutDirty,this),t.on("active-in-hierarchy-changed",this._childrenChanged,this),this._childrenChanged()},i._childRemoved=function(t){t.off(Wo.SIZE_CHANGED,this._doLayoutDirty,this),t.off(Wo.TRANSFORM_CHANGED,this._transformDirty,this),t.off(Wo.ANCHOR_CHANGED,this._doLayoutDirty,this),t.off("active-in-hierarchy-changed",this._childrenChanged,this),this._childrenChanged()},i._resized=function(){this._layoutSize.set(this.node._uiProps.uiTransformComp.contentSize),this._doLayoutDirty()},i._doLayoutHorizontally=function(t,e,i,o){var n=this.node._uiProps.uiTransformComp.anchorPoint,r=this._getFixedColumn(),s=1,a=this._paddingLeft;this._horizontalDirection===Go.RIGHT_TO_LEFT&&(s=-1,a=this._paddingRight);var h=(this._horizontalDirection-n.x)*t+s*a,l=h-s*this._spacingX,c=0,u=0,_=0,p=0,d=!1,g=this._usefulLayoutObj.length,f=this._cellSize.width,y=this._getPaddingH();this._layoutType!==ko.GRID&&this._resizeMode===Vo.CHILDREN&&(f=(t-y-(g-1)*this._spacingX)/g);for(var b=this._usefulLayoutObj,T=0;T<b.length;++T){var m=b[T],v=m.node,S=v.scale,C=this._getUsedScaleValue(S.x),E=this._getUsedScaleValue(S.y);this._resizeMode===Vo.CHILDREN&&(m.width=f/C,this._layoutType===ko.GRID&&(m.height=this._cellSize.height/E));var O=Math.abs(this._horizontalDirection-m.anchorX),w=m.width*C,A=m.height*E;A>_&&(p=Math.max(_,p),u=_||A,_=A),l+=s*(O*w+this._spacingX);var L=s*(1-O)*w;if(e){if(r>0)(d=T/r>0&&T%r==0)&&(u=_>A?_:u);else if(w>t-y)l>h+s*O*w&&(d=!0);else{var D=(1-this._horizontalDirection-n.x)*t,P=l+L+s*(s>0?this._paddingRight:this._paddingLeft);d=Math.abs(P)>Math.abs(D)}d&&(l=h+s*O*w,A!==_&&(u=_),c+=u+this._spacingY,u=_=A)}var z=i(v,m,c);o&&v.setPosition(l,z),l+=L}return u=Math.max(u,_),Math.max(p,c+u)+this._getPaddingV()},i._doLayoutVertically=function(t,e,i,o){var n=this.node._uiProps.uiTransformComp.anchorPoint,r=this._getFixedColumn(),s=1,a=this._paddingBottom;this._verticalDirection===jo.TOP_TO_BOTTOM&&(s=-1,a=this._paddingTop);var h=(this._verticalDirection-n.y)*t+s*a,l=h-s*this._spacingY,c=0,u=0,_=0,p=0,d=!1,g=this._usefulLayoutObj.length,f=this._cellSize.height,y=this._getPaddingV();this._layoutType!==ko.GRID&&this._resizeMode===Vo.CHILDREN&&(f=(t-y-(g-1)*this._spacingY)/g);for(var b=this._usefulLayoutObj,T=0;T<b.length;++T){var m=b[T],v=m.node,S=v.scale,C=this._getUsedScaleValue(S.x),E=this._getUsedScaleValue(S.y);this._resizeMode===Vo.CHILDREN&&(m.height=f/E,this._layoutType===ko.GRID&&(m.width=this._cellSize.width/C));var O=Math.abs(this._verticalDirection-m.anchorY),w=m.width*C,A=m.height*E;w>c&&(u=Math.max(c,u),_=c||w,c=w),l+=s*(O*A+this._spacingY);var L=s*(1-O)*A;if(e){if(r>0)(d=T/r>0&&T%r==0)&&(_=c>A?c:_);else if(A>t-y)l>h+s*O*A&&(d=!0);else{var D=(1-this._verticalDirection-n.y)*t,P=l+L+s*(s>0?this._paddingTop:this._paddingBottom);d=Math.abs(P)>Math.abs(D)}d&&(l=h+s*O*A,w!==c&&(_=c),p+=_+this._spacingX,_=c=w)}var z=i(v,m,p);o&&(v.getPosition(fn),v.setPosition(z,l,fn.z)),l+=L}return _=Math.max(_,c),Math.max(u,p+_)+this._getPaddingH()},i._doLayoutGridAxisHorizontal=function(t,e){var i=this,o=e.width,n=1,r=-t.y*e.height,s=this._paddingBottom;this._verticalDirection===jo.TOP_TO_BOTTOM&&(n=-1,r=(1-t.y)*e.height,s=this._paddingTop);var a=function(t,e,o){return r+n*(o+(1-e.anchorY)*e.height*i._getUsedScaleValue(t.scale.y)+s)},h=0;this._resizeMode===Vo.CONTAINER&&(h=this._doLayoutHorizontally(o,!0,a,!1),r=-t.y*h,this._verticalDirection===jo.TOP_TO_BOTTOM&&(n=-1,r=(1-t.y)*h)),this._doLayoutHorizontally(o,!0,a,!0),this._resizeMode===Vo.CONTAINER&&this.node._uiProps.uiTransformComp.setContentSize(o,h)},i._doLayoutGridAxisVertical=function(t,e){var i=this,o=e.height,n=1,r=-t.x*e.width,s=this._paddingLeft;this._horizontalDirection===Go.RIGHT_TO_LEFT&&(n=-1,r=(1-t.x)*e.width,s=this._paddingRight);var a=function(t,e,o){return r+n*(o+(1-e.anchorX)*e.width*i._getUsedScaleValue(t.scale.x)+s)},h=0;this._resizeMode===Vo.CONTAINER&&(h=this._doLayoutVertically(o,!0,a,!1),r=-t.x*h,this._horizontalDirection===Go.RIGHT_TO_LEFT&&(n=-1,r=(1-t.x)*h)),this._doLayoutVertically(o,!0,a,!0),this._resizeMode===Vo.CONTAINER&&this.node._uiProps.uiTransformComp.setContentSize(h,o)},i._doLayoutGrid=function(){var t=this.node._uiProps.uiTransformComp,e=t.anchorPoint,i=t.contentSize;this.startAxis===Fo.HORIZONTAL?this._doLayoutGridAxisHorizontal(e,i):this.startAxis===Fo.VERTICAL&&this._doLayoutGridAxisVertical(e,i)},i._getHorizontalBaseWidth=function(){var t=this._usefulLayoutObj,e=0,i=t.length;if(this._resizeMode===Vo.CONTAINER){for(var o=0;o<t.length;++o){var n=t[o],r=n.node.scale;e+=n.width*this._getUsedScaleValue(r.x)}e+=(i-1)*this._spacingX+this._getPaddingH()}else e=this.node._uiProps.uiTransformComp.width;return e},i._getVerticalBaseHeight=function(){var t=this._usefulLayoutObj,e=0,i=t.length;if(this._resizeMode===Vo.CONTAINER){for(var o=0;o<t.length;++o){var n=t[o],r=n.node.scale;e+=n.height*this._getUsedScaleValue(r.y)}e+=(i-1)*this._spacingY+this._getPaddingV()}else e=this.node._uiProps.uiTransformComp.height;return e},i._doLayout=function(){var t=this;if(this._init&&!this._childrenDirty||(this._checkUsefulObj(),this._init=!0,this._childrenDirty=!1),this._layoutType===ko.HORIZONTAL){var e=this._getHorizontalBaseWidth();this._doLayoutHorizontally(e,!1,(function(e){return(t._isAlign?h.ZERO:e.position).y}),!0),this.node._uiProps.uiTransformComp.width=e}else if(this._layoutType===ko.VERTICAL){var i=this._getVerticalBaseHeight();this._doLayoutVertically(i,!1,(function(e){return(t._isAlign?h.ZERO:e.position).x}),!0),this.node._uiProps.uiTransformComp.height=i}else this._layoutType===ko.GRID&&this._doLayoutGrid()},i._getUsedScaleValue=function(t){return this._affectedByScale?Math.abs(t):1},i._transformDirty=function(t){t&$.SCALE&&t&$.POSITION&&this._affectedByScale&&this._doLayoutDirty()},i._doLayoutDirty=function(){this._layoutDirty=!0},i._childrenChanged=function(){this._childrenDirty=!0,this._doLayoutDirty()},i._getPaddingH=function(){return this._paddingLeft+this._paddingRight},i._getPaddingV=function(){return this._paddingTop+this._paddingBottom},i._getFixedColumn=function(){if(this._layoutType!==ko.GRID||this._constraint===Uo.NONE||this._constraintNum<=0)return 0;var t=this._constraint===Uo.FIXED_ROW?Math.round(this._usefulLayoutObj.length/this._constraintNum):this._constraintNum;return this._startAxis===Fo.VERTICAL&&(t=this._constraint===Uo.FIXED_COL?Math.round(this._usefulLayoutObj.length/this._constraintNum):this._constraintNum),t},l(e,[{key:"alignHorizontal",get:function(){return this._isAlign},set:function(t){this._layoutType===ko.HORIZONTAL&&(this._isAlign=t,this._doLayoutDirty())}},{key:"alignVertical",get:function(){return this._isAlign},set:function(t){this._layoutType===ko.VERTICAL&&(this._isAlign=t,this._doLayoutDirty())}},{key:"type",get:function(){return this._layoutType},set:function(t){this._layoutType=t,this._doLayoutDirty()}},{key:"resizeMode",get:function(){return this._resizeMode},set:function(t){this._layoutType!==ko.NONE&&(this._resizeMode=t,this._doLayoutDirty())}},{key:"cellSize",get:function(){return this._cellSize},set:function(t){this._cellSize!==t&&(this._cellSize.set(t),this._doLayoutDirty())}},{key:"startAxis",get:function(){return this._startAxis},set:function(t){this._startAxis!==t&&(this._startAxis=t,this._doLayoutDirty())}},{key:"paddingLeft",get:function(){return this._paddingLeft},set:function(t){this._paddingLeft!==t&&(this._paddingLeft=t,this._doLayoutDirty())}},{key:"paddingRight",get:function(){return this._paddingRight},set:function(t){this._paddingRight!==t&&(this._paddingRight=t,this._doLayoutDirty())}},{key:"paddingTop",get:function(){return this._paddingTop},set:function(t){this._paddingTop!==t&&(this._paddingTop=t,this._doLayoutDirty())}},{key:"paddingBottom",get:function(){return this._paddingBottom},set:function(t){this._paddingBottom!==t&&(this._paddingBottom=t,this._doLayoutDirty())}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX!==t&&(this._spacingX=t,this._doLayoutDirty())}},{key:"spacingY",get:function(){return this._spacingY},set:function(t){this._spacingY!==t&&(this._spacingY=t,this._doLayoutDirty())}},{key:"verticalDirection",get:function(){return this._verticalDirection},set:function(t){this._verticalDirection!==t&&(this._verticalDirection=t,this._doLayoutDirty())}},{key:"horizontalDirection",get:function(){return this._horizontalDirection},set:function(t){this._horizontalDirection!==t&&(this._horizontalDirection=t,this._doLayoutDirty())}},{key:"padding",get:function(){return this._paddingLeft},set:function(t){this.paddingLeft===t&&this._paddingRight===t&&this._paddingTop===t&&this._paddingBottom===t||(this._paddingLeft=this._paddingRight=this._paddingTop=this._paddingBottom=t,this._doLayoutDirty())}},{key:"constraint",get:function(){return this._constraint},set:function(t){this._layoutType!==ko.NONE&&this._constraint!==t&&(this._constraint=t,this._doLayoutDirty())}},{key:"constraintNum",get:function(){return this._constraintNum},set:function(t){this._constraint!==Uo.NONE&&this._constraintNum!==t&&(t<=0&&R("Limit values to be greater than 0"),this._constraintNum=t,this._doLayoutDirty())}},{key:"affectedByScale",get:function(){return this._affectedByScale},set:function(t){this._affectedByScale=t,this._doLayoutDirty()}}]),e}(v),Ho.Type=ko,Ho.VerticalDirection=jo,Ho.HorizontalDirection=Go,Ho.ResizeMode=Vo,Ho.AxisDirection=Fo,Ho.Constraint=Uo,c((To=No).prototype,"alignHorizontal",[ji,Gi],Object.getOwnPropertyDescriptor(To.prototype,"alignHorizontal"),To.prototype),c(To.prototype,"alignVertical",[Ui,Wi],Object.getOwnPropertyDescriptor(To.prototype,"alignVertical"),To.prototype),c(To.prototype,"type",[Zi,Yi],Object.getOwnPropertyDescriptor(To.prototype,"type"),To.prototype),c(To.prototype,"resizeMode",[Xi,qi,Ki],Object.getOwnPropertyDescriptor(To.prototype,"resizeMode"),To.prototype),c(To.prototype,"cellSize",[Qi,Ji],Object.getOwnPropertyDescriptor(To.prototype,"cellSize"),To.prototype),c(To.prototype,"startAxis",[$i,to],Object.getOwnPropertyDescriptor(To.prototype,"startAxis"),To.prototype),c(To.prototype,"paddingLeft",[eo],Object.getOwnPropertyDescriptor(To.prototype,"paddingLeft"),To.prototype),c(To.prototype,"paddingRight",[io],Object.getOwnPropertyDescriptor(To.prototype,"paddingRight"),To.prototype),c(To.prototype,"paddingTop",[oo],Object.getOwnPropertyDescriptor(To.prototype,"paddingTop"),To.prototype),c(To.prototype,"paddingBottom",[no],Object.getOwnPropertyDescriptor(To.prototype,"paddingBottom"),To.prototype),c(To.prototype,"spacingX",[ro],Object.getOwnPropertyDescriptor(To.prototype,"spacingX"),To.prototype),c(To.prototype,"spacingY",[so],Object.getOwnPropertyDescriptor(To.prototype,"spacingY"),To.prototype),c(To.prototype,"verticalDirection",[ao,ho],Object.getOwnPropertyDescriptor(To.prototype,"verticalDirection"),To.prototype),c(To.prototype,"horizontalDirection",[lo,co],Object.getOwnPropertyDescriptor(To.prototype,"horizontalDirection"),To.prototype),c(To.prototype,"constraint",[uo,_o,po],Object.getOwnPropertyDescriptor(To.prototype,"constraint"),To.prototype),c(To.prototype,"constraintNum",[go,fo],Object.getOwnPropertyDescriptor(To.prototype,"constraintNum"),To.prototype),c(To.prototype,"affectedByScale",[yo],Object.getOwnPropertyDescriptor(To.prototype,"affectedByScale"),To.prototype),mo=c(To.prototype,"_resizeMode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Vo.NONE}}),vo=c(To.prototype,"_layoutType",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ko.NONE}}),So=c(To.prototype,"_cellSize",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new I(40,40)}}),Co=c(To.prototype,"_startAxis",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Fo.HORIZONTAL}}),Eo=c(To.prototype,"_paddingLeft",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Oo=c(To.prototype,"_paddingRight",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wo=c(To.prototype,"_paddingTop",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ao=c(To.prototype,"_paddingBottom",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Lo=c(To.prototype,"_spacingX",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Do=c(To.prototype,"_spacingY",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Po=c(To.prototype,"_verticalDirection",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return jo.TOP_TO_BOTTOM}}),zo=c(To.prototype,"_horizontalDirection",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Go.LEFT_TO_RIGHT}}),Io=c(To.prototype,"_constraint",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Uo.NONE}}),xo=c(To.prototype,"_constraintNum",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),Ro=c(To.prototype,"_affectedByScale",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bo=c(To.prototype,"_isAlign",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),bo=To))||bo)||bo)||bo)||bo)||bo)||bo));!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.FILLED=2]="FILLED"}(gn||(gn={})),C(gn);var bn,Tn,mn,vn,Sn,Cn,En,On,wn,An,Ln,Dn,Pn,zn,In,xn,Rn,Bn,Hn,Nn,Mn,kn,Vn,Fn,jn,Gn=function(e){return t({ProgressBar:e,ProgressBarComponent:e}),e}((Zo=o("cc.ProgressBar"),Yo=u(),Xo=_(110),qo=p(),Ko=d(ft),Qo=n(ut),Jo=f(),$o=n(gn),tn=f(),en=f(),on=M(),nn=f(),rn=f(),Zo(sn=Yo(sn=Xo(sn=qo(sn=Ko((dn=pn=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,T(e,"_barSprite",hn,m(e)),T(e,"_mode",ln,m(e)),T(e,"_totalLength",cn,m(e)),T(e,"_progress",un,m(e)),T(e,"_reverse",_n,m(e)),e}s(e,t);var i=e.prototype;return i._initBarSprite=function(){if(this._barSprite){var t=this._barSprite.node;if(!t)return;var e=this.node._uiProps.uiTransformComp,i=e.contentSize,o=e.anchorPoint,n=t._uiProps.uiTransformComp.contentSize;if(this._barSprite.fillType===ut.FillType.RADIAL&&(this._mode=gn.FILLED),this._mode===gn.HORIZONTAL?this.totalLength=n.width:this._mode===gn.VERTICAL?this.totalLength=n.height:this.totalLength=this._barSprite.fillRange,t.parent===this.node){var r=-i.width*o.x;t.setPosition(r,0,0)}}},i._updateBarStatus=function(){if(this._barSprite){var t=this._barSprite.node;if(!t)return;var e=t._uiProps.uiTransformComp,i=e.anchorPoint,o=e.contentSize,n=t.getPosition(),r=new B(0,.5),s=H(this._progress),a=this._totalLength*s,l=o,c=0,u=0;switch(this._mode){case gn.HORIZONTAL:this._reverse&&(r=new B(1,.5)),l=new I(a,o.height),c=this._totalLength,u=o.height;break;case gn.VERTICAL:r=this._reverse?new B(.5,1):new B(.5,0),l=new I(o.width,a),c=o.width,u=this._totalLength}if(this._mode===gn.FILLED)this._barSprite.type!==ut.Type.FILLED?R("ProgressBar FILLED mode only works when barSprite's Type is FILLED!"):(this._reverse&&(a*=-1),this._barSprite.fillRange=a);else if(this._barSprite.type!==ut.Type.FILLED){var _=r.x-i.x,p=r.y-i.y,d=new h(c*_,u*p,0);t.setPosition(n.x+d.x,n.y+d.y,n.z),e.setAnchorPoint(r),e.setContentSize(l)}else R("ProgressBar non-FILLED mode only works when barSprite's Type is non-FILLED!")}},l(e,[{key:"barSprite",get:function(){return this._barSprite},set:function(t){this._barSprite!==t&&(this._barSprite=t,this._initBarSprite())}},{key:"mode",get:function(){return this._mode},set:function(t){if(this._mode!==t&&(this._mode=t,this._barSprite)){var e=this._barSprite.node;if(!e)return;var i=e._uiProps.uiTransformComp.contentSize;this._mode===gn.HORIZONTAL?this.totalLength=i.width:this._mode===gn.VERTICAL?this.totalLength=i.height:this._mode===gn.FILLED&&(this.totalLength=this._barSprite.fillRange)}}},{key:"totalLength",get:function(){return this._totalLength},set:function(t){this._mode===gn.FILLED&&(t=H(t)),this._totalLength=t,this._updateBarStatus()}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,this._updateBarStatus())}},{key:"reverse",get:function(){return this._reverse},set:function(t){this._reverse!==t&&(this._reverse=t,this._barSprite&&(this._barSprite.fillStart=1-this._barSprite.fillStart),this._updateBarStatus())}}]),e}(v),pn.Mode=gn,c((an=dn).prototype,"barSprite",[Qo,Jo],Object.getOwnPropertyDescriptor(an.prototype,"barSprite"),an.prototype),c(an.prototype,"mode",[$o,tn],Object.getOwnPropertyDescriptor(an.prototype,"mode"),an.prototype),c(an.prototype,"totalLength",[en],Object.getOwnPropertyDescriptor(an.prototype,"totalLength"),an.prototype),c(an.prototype,"progress",[on,N,nn],Object.getOwnPropertyDescriptor(an.prototype,"progress"),an.prototype),c(an.prototype,"reverse",[rn],Object.getOwnPropertyDescriptor(an.prototype,"reverse"),an.prototype),hn=c(an.prototype,"_barSprite",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ln=c(an.prototype,"_mode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return gn.HORIZONTAL}}),cn=c(an.prototype,"_totalLength",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),un=c(an.prototype,"_progress",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),_n=c(an.prototype,"_reverse",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sn=an))||sn)||sn)||sn)||sn)||sn)),Un=new h,Wn=new h,Zn=new h,Yn=new B,Xn=new e;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(jn||(jn={})),i(jn);var qn,Kn,Qn,Jn,$n,tr,er,ir,or,nr,rr,sr,ar,hr,lr,cr,ur,_r,pr,dr,gr,fr,yr,br,Tr,mr,vr,Sr,Cr,Er,Or,wr,Ar,Lr,Dr,Pr,zr,Ir,xr,Rr,Br,Hr,Nr,Mr,kr,Vr,Fr,jr,Gr,Ur=function(e){return t({ScrollBar:e,ScrollBarComponent:e}),e}((bn=o("cc.ScrollBar"),Tn=u(),mn=_(110),vn=p(),Sn=d(ft),Cn=n(ut),En=g(),On=f(),wn=n(jn),An=g(),Ln=f(),Dn=g(),Pn=f(),zn=g(),In=f(),bn(xn=Tn(xn=mn(xn=vn(xn=Sn((Fn=Vn=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,T(e,"_scrollView",Bn,m(e)),T(e,"_handle",Hn,m(e)),T(e,"_direction",Nn,m(e)),T(e,"_enableAutoHide",Mn,m(e)),T(e,"_autoHideTime",kn,m(e)),e._touching=!1,e._opacity=255,e._autoHideRemainingTime=0,e}s(e,t);var i=e.prototype;return i.hide=function(){this._autoHideRemainingTime=0,this._setOpacity(0)},i.show=function(){this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity)},i.onScroll=function(t){if(this._scrollView){var e=this._scrollView.content;if(e){var i=e._uiProps.uiTransformComp.contentSize,o=this._scrollView.node._uiProps.uiTransformComp.contentSize,n=this.node._uiProps.uiTransformComp.contentSize;if(!this._conditionalDisableScrollBar(i,o)){this._enableAutoHide&&(this._autoHideRemainingTime=this._autoHideTime,this._setOpacity(this._opacity));var r=0,s=0,a=0,h=0,l=0;this._direction===jn.HORIZONTAL?(r=i.width,s=o.width,l=n.width,a=t.x,h=-this._convertToScrollViewSpace(e).x):this._direction===jn.VERTICAL&&(r=i.height,s=o.height,l=n.height,a=t.y,h=-this._convertToScrollViewSpace(e).y);var c=this._calculateLength(r,s,l,a),u=this._calculatePosition(r,s,l,h,a,c);this._updateLength(c),this._updateHandlerPosition(u)}}}},i.setScrollView=function(t){this._scrollView=t},i.onTouchBegan=function(){this._enableAutoHide&&(this._touching=!0)},i.onTouchEnded=function(){if(this._enableAutoHide&&(this._touching=!1,!(this._autoHideTime<=0))){if(this._scrollView){var t=this._scrollView.content;if(t){var e=t._uiProps.uiTransformComp.contentSize,i=this._scrollView.node._uiProps.uiTransformComp.contentSize;if(this._conditionalDisableScrollBar(e,i))return}}this._autoHideRemainingTime=this._autoHideTime}},i.onEnable=function(){var t=this.node.getComponent(ut);t&&(this._opacity=t.color.a)},i.start=function(){this._enableAutoHide&&this._setOpacity(0)},i.update=function(t){this._processAutoHide(t)},i._convertToScrollViewSpace=function(t){var e=this._scrollView&&this._scrollView.node._uiProps.uiTransformComp,i=t._uiProps.uiTransformComp;if(!e||!i)return Un;Wn.set(-i.anchorX*i.width,-i.anchorY*i.height,0),i.convertToWorldSpaceAR(Wn,Zn);var o=e.convertToNodeSpaceAR(Zn);return o.x+=e.anchorX*e.width,o.y+=e.anchorY*e.height,o},i._setOpacity=function(t){if(this._handle){var e=this.node.getComponent(ut);e&&(Xn.set(e.color),Xn.a=t,e.color=Xn),(e=this._handle.getComponent(ut))&&(Xn.set(e.color),Xn.a=t,e.color=Xn)}},i._updateHandlerPosition=function(t){if(this._handle){var e=this._fixupHandlerPosition();this._handle.node.setPosition(t.x+e.x,t.y+e.y,e.z)}},i._fixupHandlerPosition=function(){var t=this.node._uiProps.uiTransformComp,e=t.contentSize,i=t.anchorPoint,o=this.handle.node._uiProps.uiTransformComp.contentSize,n=this.handle.node.parent;h.set(Wn,-e.width*i.x,-e.height*i.y,0);var r=this.node._uiProps.uiTransformComp.convertToWorldSpaceAR(Wn,Zn),s=new h;return n._uiProps.uiTransformComp.convertToNodeSpaceAR(r,s),this.direction===jn.HORIZONTAL?s=new h(s.x,s.y+(e.height-o.height)/2,0):this.direction===jn.VERTICAL&&(s=new h(s.x+(e.width-o.width)/2,s.y,0)),this.handle.node.setPosition(s),s},i._conditionalDisableScrollBar=function(t,e){return t.width<=e.width&&this._direction===jn.HORIZONTAL||t.height<=e.height&&this._direction===jn.VERTICAL},i._calculateLength=function(t,e,i,o){var n=t;return o&&(n+=20*(o>0?o:-o)),i*(e/n)},i._calculatePosition=function(t,e,i,o,n,r){var s=t-e;n&&(s+=Math.abs(n));var a=0;s&&(a=H(a=o/s));var l=(i-r)*a;return this._direction===jn.VERTICAL?new h(0,l,0):new h(l,0,0)},i._updateLength=function(t){if(this._handle){var e=this._handle.node._uiProps.uiTransformComp,i=e.contentSize,o=e.anchorPoint;o.x===Yn.x&&o.y===Yn.y||e.setAnchorPoint(Yn),this._direction===jn.HORIZONTAL?e.setContentSize(t,i.height):e.setContentSize(i.width,t)}},i._processAutoHide=function(t){if(this._enableAutoHide&&!(this._autoHideRemainingTime<=0)&&!this._touching&&(this._autoHideRemainingTime-=t,this._autoHideRemainingTime<=this._autoHideTime)){this._autoHideRemainingTime=Math.max(0,this._autoHideRemainingTime);var e=this._opacity*(this._autoHideRemainingTime/this._autoHideTime);this._setOpacity(e)}},l(e,[{key:"handle",get:function(){return this._handle},set:function(t){this._handle!==t&&(this._handle=t,this.onScroll(Un))}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this.onScroll(new h))}},{key:"enableAutoHide",get:function(){return this._enableAutoHide},set:function(t){this._enableAutoHide!==t&&(this._enableAutoHide=t,this._enableAutoHide&&this._setOpacity(0))}},{key:"autoHideTime",get:function(){return this._autoHideTime},set:function(t){this._autoHideTime!==t&&(this._autoHideTime=t)}}]),e}(v),Vn.Direction=jn,c((Rn=Fn).prototype,"handle",[Cn,En,On],Object.getOwnPropertyDescriptor(Rn.prototype,"handle"),Rn.prototype),c(Rn.prototype,"direction",[wn,An,Ln],Object.getOwnPropertyDescriptor(Rn.prototype,"direction"),Rn.prototype),c(Rn.prototype,"enableAutoHide",[Dn,Pn],Object.getOwnPropertyDescriptor(Rn.prototype,"enableAutoHide"),Rn.prototype),c(Rn.prototype,"autoHideTime",[zn,In],Object.getOwnPropertyDescriptor(Rn.prototype,"autoHideTime"),Rn.prototype),Bn=c(Rn.prototype,"_scrollView",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hn=c(Rn.prototype,"_handle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Nn=c(Rn.prototype,"_direction",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return jn.HORIZONTAL}}),Mn=c(Rn.prototype,"_enableAutoHide",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),kn=c(Rn.prototype,"_autoHideTime",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),xn=Rn))||xn)||xn)||xn)||xn)||xn)),Wr=t("ViewGroup",o("cc.ViewGroup")(qn=_(110)(qn=function(t){function e(){return t.apply(this,arguments)||this}return s(e,t),e}(v))||qn)||qn);O.ViewGroup=Wr;var Zr,Yr=new h,Xr=new h,qr=new h,Kr=new B,Qr=new B,Jr=function(){return(new Date).getMilliseconds()},$r={"scroll-to-top":0,"scroll-to-bottom":1,"scroll-to-left":2,"scroll-to-right":3,scrolling:4,"bounce-bottom":6,"bounce-left":7,"bounce-right":8,"bounce-top":5,"scroll-ended":9,"touch-up":10,"scroll-ended-with-threshold":11,"scroll-began":12};!function(t){t.SCROLL_TO_TOP="scroll-to-top",t.SCROLL_TO_BOTTOM="scroll-to-bottom",t.SCROLL_TO_LEFT="scroll-to-left",t.SCROLL_TO_RIGHT="scroll-to-right",t.SCROLL_BEGAN="scroll-began",t.SCROLL_ENDED="scroll-ended",t.BOUNCE_TOP="bounce-top",t.BOUNCE_BOTTOM="bounce-bottom",t.BOUNCE_LEFT="bounce-left",t.BOUNCE_RIGHT="bounce-right",t.SCROLLING="scrolling",t.SCROLL_ENG_WITH_THRESHOLD="scroll-ended-with-threshold",t.TOUCH_UP="touch-up"}(Zr||(Zr={}));var ts,es,is,os,ns,rs,ss,as,hs,ls,cs,us,_s,ps,ds,gs,fs,ys,bs,Ts,ms,vs,Ss=function(e){return t({ScrollView:e,ScrollViewComponent:e}),e}((Kn=o("cc.ScrollView"),Qn=u(),Jn=_(110),$n=p(),tr=d(ft),er=M(),ir=g(),or=f(),nr=M(),rr=g(),sr=f(),ar=g(),hr=f(),lr=g(),cr=f(),ur=n(et),_r=g(),pr=f(),dr=g(),gr=f(),fr=n(Ur),yr=g(),br=f(),Tr=g(),mr=f(),vr=n(Ur),Sr=g(),Cr=f(),Er=g(),Or=f(),wr=n([q]),Ar=g(),Lr=f(),Kn(Dr=Qn(Dr=Jn(Dr=$n(Dr=tr((Gr=jr=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,T(e,"bounceDuration",zr,m(e)),T(e,"brake",Ir,m(e)),T(e,"elastic",xr,m(e)),T(e,"inertia",Rr,m(e)),T(e,"horizontal",Br,m(e)),T(e,"vertical",Hr,m(e)),T(e,"cancelInnerEvents",Nr,m(e)),T(e,"scrollEvents",Mr,m(e)),e._autoScrolling=!1,e._scrolling=!1,T(e,"_content",kr,m(e)),T(e,"_horizontalScrollBar",Vr,m(e)),T(e,"_verticalScrollBar",Fr,m(e)),e._topBoundary=0,e._bottomBoundary=0,e._leftBoundary=0,e._rightBoundary=0,e._touchMoveDisplacements=[],e._touchMoveTimeDeltas=[],e._touchMovePreviousTimestamp=0,e._touchMoved=!1,e._autoScrollAttenuate=!1,e._autoScrollStartPosition=new h,e._autoScrollTargetDelta=new h,e._autoScrollTotalTime=0,e._autoScrollAccumulatedTime=0,e._autoScrollCurrentlyOutOfBoundary=!1,e._autoScrollBraking=!1,e._autoScrollBrakingStartPosition=new h,e._outOfBoundaryAmount=new h,e._outOfBoundaryAmountDirty=!0,e._stopMouseWheel=!1,e._mouseWheelEventElapsedTime=0,e._isScrollEndedWithThresholdEventFired=!1,e._scrollEventEmitMask=0,e._isBouncing=!1,e._contentPos=new h,e._deltaPos=new h,e}s(e,t);var i=e.prototype;return i.scrollToBottom=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new B(0,0),applyToHorizontal:!1,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i,!0)},i.scrollToTop=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new B(0,1),applyToHorizontal:!1,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new B(0,0),applyToHorizontal:!0,applyToVertical:!1});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new B(1,0),applyToHorizontal:!0,applyToVertical:!1});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToTopLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new B(0,1),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToTopRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new B(1,1),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToBottomLeft=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new B(0,0),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToBottomRight=function(t,e){void 0===e&&(e=!0);var i=this._calculateMovePercentDelta({anchor:new B(1,0),applyToHorizontal:!0,applyToVertical:!0});t?this._startAutoScroll(i,t,!1!==e):this._moveContent(i)},i.scrollToOffset=function(t,e,i){void 0===i&&(i=!0);var o=this.getMaxScrollOffset(),n=new B(0,0);0===o.x?n.x=0:n.x=t.x/o.x,0===o.y?n.y=1:n.y=(o.y-t.y)/o.y,this.scrollTo(n,e,i)},i.getScrollOffset=function(){var t=this._getContentTopBoundary()-this._topBoundary,e=this._getContentLeftBoundary()-this._leftBoundary;return new h(e,t,0)},i.getMaxScrollOffset=function(){if(!this._content||!this.view)return Yr;var t=this._content._uiProps.uiTransformComp.contentSize,e=t.width-this.view.width,i=t.height-this.view.height;return new h(e=e>=0?e:0,i=i>=0?i:0,0)},i.scrollToPercentHorizontal=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new B(t,0),applyToHorizontal:!0,applyToVertical:!1});e?this._startAutoScroll(o,e,!1!==i):this._moveContent(o)},i.scrollTo=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new B(t),applyToHorizontal:!0,applyToVertical:!0});e?this._startAutoScroll(o,e,i):this._moveContent(o)},i.scrollToPercentVertical=function(t,e,i){var o=this._calculateMovePercentDelta({anchor:new B(0,t),applyToHorizontal:!1,applyToVertical:!0});e?this._startAutoScroll(o,e,i):this._moveContent(o)},i.stopAutoScroll=function(){this._autoScrolling=!1,this._autoScrollAccumulatedTime=this._autoScrollTotalTime},i.setContentPosition=function(t){if(this._content){var e=this.getContentPosition();Math.abs(t.x-e.x)<1e-4&&Math.abs(t.y-e.y)<1e-4||(this._content.setPosition(t),this._outOfBoundaryAmountDirty=!0)}},i.getContentPosition=function(){return this._content?(this._contentPos.set(this._content.position),this._contentPos):Yr},i.isScrolling=function(){return this._scrolling},i.isAutoScrolling=function(){return this._autoScrolling},i.getScrollEndedEventTiming=function(){return 1e-4},i.start=function(){this._calculateBoundary(),this._content&&K.once(Q.EVENT_BEFORE_DRAW,this._adjustContentOutOfBoundary,this)},i.onEnable=function(){this._registerEvent(),this._content&&(this._content.on(et.EventType.SIZE_CHANGED,this._calculateBoundary,this),this._content.on(et.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.node.on(et.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.node.on(et.EventType.SIZE_CHANGED,this._calculateBoundary,this))),this._calculateBoundary(),this._updateScrollBarState()},i.update=function(t){this._autoScrolling&&this._processAutoScrolling(t)},i.onDisable=function(){this._unregisterEvent(),this._content&&(this._content.off(et.EventType.SIZE_CHANGED,this._calculateBoundary,this),this._content.off(et.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view&&(this.view.node.off(et.EventType.TRANSFORM_CHANGED,this._scaleChanged,this),this.view.node.off(et.EventType.SIZE_CHANGED,this._calculateBoundary,this))),this._hideScrollBar(),this.stopAutoScroll()},i._registerEvent=function(){this.node.on(et.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.on(et.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.on(et.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.on(et.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.on(et.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},i._unregisterEvent=function(){this.node.off(et.EventType.TOUCH_START,this._onTouchBegan,this,!0),this.node.off(et.EventType.TOUCH_MOVE,this._onTouchMoved,this,!0),this.node.off(et.EventType.TOUCH_END,this._onTouchEnded,this,!0),this.node.off(et.EventType.TOUCH_CANCEL,this._onTouchCancelled,this,!0),this.node.off(et.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},i._onMouseWheel=function(t,e){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){var i=new h,o=t.getScrollY();this.vertical?i.set(0,-.1*o,0):this.horizontal&&i.set(-.1*o,0,0),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(i),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60,NaN,0),this._stopMouseWheel=!0),this._stopPropagationIfTargetIsMe(t)}},i._onTouchBegan=function(t,e){this.enabledInHierarchy&&this._content&&(this._hasNestedViewGroup(t,e)||(this._handlePressLogic(),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(t)))},i._onTouchMoved=function(t,e){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(t,e)){var i=t.touch;if(this._handleMoveLogic(i),this.cancelInnerEvents){var o=i.getUILocation(Kr);if(o.subtract(i.getUIStartLocation(Qr)),o.length()>7&&!this._touchMoved&&t.target!==this.node){var n=new tt(t.getTouches(),t.bubbles);n.type=et.EventType.TOUCH_CANCEL,n.touch=t.touch,n.simulate=!0,t.target.dispatchEvent(n),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}},i._onTouchEnded=function(t,e){if(this.enabledInHierarchy&&this._content&&t&&!this._hasNestedViewGroup(t,e)){this._dispatchEvent(Zr.TOUCH_UP);var i=t.touch;this._handleReleaseLogic(i),this._touchMoved?t.propagationStopped=!0:this._stopPropagationIfTargetIsMe(t)}},i._onTouchCancelled=function(t,e){if(this.enabledInHierarchy&&this._content&&!this._hasNestedViewGroup(t,e)){if(t&&!t.simulate){var i=t.touch;this._handleReleaseLogic(i)}this._stopPropagationIfTargetIsMe(t)}},i._calculateBoundary=function(){if(this._content&&this.view){var t=this._content.getComponent(yn);t&&t.enabledInHierarchy&&t.updateLayout();var e=this.view,i=e.width*e.anchorX,o=e.height*e.anchorY;this._leftBoundary=-i,this._bottomBoundary=-o,this._rightBoundary=this._leftBoundary+e.width,this._topBoundary=this._bottomBoundary+e.height,this._moveContentToTopLeft(e.contentSize)}},i._hasNestedViewGroup=function(t,e){if(t&&t.eventPhase===k.CAPTURING_PHASE){if(e)for(var i,o=V(e);!(i=o()).done;){var n=i.value;if(this.node===n)return!(!t.target||!t.target.getComponent(Wr));if(n.getComponent(Wr))return!0}return!1}},i._startInertiaScroll=function(t){var e=new h(t);e.multiplyScalar(.7),this._startAttenuatingAutoScroll(e,t)},i._calculateAttenuatedFactor=function(t){return this.brake<=0?1-this.brake:(1-this.brake)*(1/(1+14e-6*t+t*t*8e-9))},i._startAttenuatingAutoScroll=function(t,e){var i=new h(t);if(i.normalize(),this._content&&this.view){var o=this._content._uiProps.uiTransformComp.contentSize,n=this.view.contentSize,r=o.width-n.width,s=o.height-n.height,a=this._calculateAttenuatedFactor(r),l=this._calculateAttenuatedFactor(s);i.x=i.x*r*(1-this.brake)*a,i.y=i.y*s*l*(1-this.brake),i.z=0}var c=t.length(),u=i.length()/c;if(i.add(t),this.brake>0&&u>7){u=Math.sqrt(u);var _=new h(t);_.multiplyScalar(u),i.set(_),i.add(t)}var p=this._calculateAutoScrollTimeByInitialSpeed(e.length());this.brake>0&&u>3&&(p*=u=3),0===this.brake&&u>1&&(p*=u),this._startAutoScroll(i,p,!0)},i._calculateAutoScrollTimeByInitialSpeed=function(t){return Math.sqrt(Math.sqrt(t/5))},i._startAutoScroll=function(t,e,i){void 0===i&&(i=!1);var o=this._flattenVectorByDirection(t);this._autoScrolling=!0,this._autoScrollTargetDelta=o,this._autoScrollAttenuate=i,h.copy(this._autoScrollStartPosition,this.getContentPosition()),this._autoScrollTotalTime=e,this._autoScrollAccumulatedTime=0,this._autoScrollBraking=!1,this._isScrollEndedWithThresholdEventFired=!1,this._autoScrollBrakingStartPosition=new h,this._getHowMuchOutOfBoundary().equals(Yr,1e-4)||(this._autoScrollCurrentlyOutOfBoundary=!0)},i._calculateTouchMoveVelocity=function(){var t=0;if((t=this._touchMoveTimeDeltas.reduce((function(t,e){return t+e}),t))<=0||t>=.5)return new h;var e=new h;return e=this._touchMoveDisplacements.reduce((function(t,e){return t.add(e),t}),e),new h(e.x*(1-this.brake)/t,e.y*(1-this.brake)/t,0)},i._flattenVectorByDirection=function(t){var e=t;return e.x=this.horizontal?e.x:0,e.y=this.vertical?e.y:0,e},i._moveContent=function(t,e){var i=this._flattenVectorByDirection(t);Xr.set(this.getContentPosition()),Xr.add(i),Xr.set(1e-4*Math.floor(1e4*Xr.x),1e-4*Math.floor(1e4*Xr.y),Xr.z),this.setContentPosition(Xr);var o=this._getHowMuchOutOfBoundary();this._updateScrollBar(o),this.elastic&&e&&this._startBounceBackIfNeeded()},i._getContentLeftBoundary=function(){if(!this._content)return-1;var t=this.getContentPosition(),e=this._content._uiProps.uiTransformComp;return t.x-e.anchorX*e.width},i._getContentRightBoundary=function(){if(!this._content)return-1;var t=this._content._uiProps.uiTransformComp;return this._getContentLeftBoundary()+t.width},i._getContentTopBoundary=function(){if(!this._content)return-1;var t=this._content._uiProps.uiTransformComp;return this._getContentBottomBoundary()+t.height},i._getContentBottomBoundary=function(){if(!this._content)return-1;var t=this.getContentPosition(),e=this._content._uiProps.uiTransformComp;return t.y-e.anchorY*e.height},i._getHowMuchOutOfBoundary=function(t){if((t=t||new h).equals(Yr,1e-4)&&!this._outOfBoundaryAmountDirty)return this._outOfBoundaryAmount;var e=new h;return this._getContentLeftBoundary()+t.x>this._leftBoundary?e.x=this._leftBoundary-(this._getContentLeftBoundary()+t.x):this._getContentRightBoundary()+t.x<this._rightBoundary&&(e.x=this._rightBoundary-(this._getContentRightBoundary()+t.x)),this._getContentTopBoundary()+t.y<this._topBoundary?e.y=this._topBoundary-(this._getContentTopBoundary()+t.y):this._getContentBottomBoundary()+t.y>this._bottomBoundary&&(e.y=this._bottomBoundary-(this._getContentBottomBoundary()+t.y)),t.equals(Yr,1e-4)&&(this._outOfBoundaryAmount=e,this._outOfBoundaryAmountDirty=!1),this._clampDelta(e)},i._updateScrollBar=function(t){this._horizontalScrollBar&&this._horizontalScrollBar.onScroll(t),this.verticalScrollBar&&this.verticalScrollBar.onScroll(t)},i._onScrollBarTouchBegan=function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchBegan(),this.verticalScrollBar&&this.verticalScrollBar.onTouchBegan()},i._onScrollBarTouchEnded=function(){this._horizontalScrollBar&&this._horizontalScrollBar.onTouchEnded(),this.verticalScrollBar&&this.verticalScrollBar.onTouchEnded()},i._dispatchEvent=function(t){if(t===Zr.SCROLL_ENDED)this._scrollEventEmitMask=0;else if(t===Zr.SCROLL_TO_TOP||t===Zr.SCROLL_TO_BOTTOM||t===Zr.SCROLL_TO_LEFT||t===Zr.SCROLL_TO_RIGHT){var e=1<<$r[t];if(this._scrollEventEmitMask&e)return;this._scrollEventEmitMask|=e}q.emitEvents(this.scrollEvents,this,$r[t]),this.node.emit(t,this)},i._adjustContentOutOfBoundary=function(){if(this._content&&(this._outOfBoundaryAmountDirty=!0,this._isOutOfBoundary())){var t=this._getHowMuchOutOfBoundary();Xr.set(this.getContentPosition()),Xr.add(t),this._content.setPosition(Xr),this._updateScrollBar(Yr)}},i._hideScrollBar=function(){this._horizontalScrollBar&&this._horizontalScrollBar.hide(),this._verticalScrollBar&&this._verticalScrollBar.hide()},i._updateScrollBarState=function(){if(this._content&&this.view){var t=this.view,e=this._content._uiProps.uiTransformComp;this.verticalScrollBar&&(e.height<t.height?this.verticalScrollBar.hide():this.verticalScrollBar.show()),this.horizontalScrollBar&&(e.width<t.width?this.horizontalScrollBar.hide():this.horizontalScrollBar.show())}},i._stopPropagationIfTargetIsMe=function(t){t.eventPhase===k.AT_TARGET&&t.target===this.node&&(t.propagationStopped=!0)},i._processDeltaMove=function(t){this._scrollChildren(t),this._gatherTouchMove(t)},i._handleMoveLogic=function(t){this._deltaPos.set(this._getLocalAxisAlignDelta(t)),this._processDeltaMove(this._deltaPos)},i._handleReleaseLogic=function(t){this._deltaPos.set(this._getLocalAxisAlignDelta(t)),this._gatherTouchMove(this._deltaPos),this._processInertiaScroll(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(Zr.SCROLL_ENDED))},i._getLocalAxisAlignDelta=function(t){var e=this.node._uiProps.uiTransformComp,i=new h;return e&&(t.getUILocation(Kr),t.getUIPreviousLocation(Qr),Xr.set(Kr.x,Kr.y,0),qr.set(Qr.x,Qr.y,0),e.convertToNodeSpaceAR(Xr,Xr),e.convertToNodeSpaceAR(qr,qr),h.subtract(i,Xr,qr)),i},i._scrollChildren=function(t){var e,i,o=t=this._clampDelta(t);if(this.elastic&&(e=this._getHowMuchOutOfBoundary(),o.x*=0===e.x?1:.5,o.y*=0===e.y?1:.5),this.elastic||(e=this._getHowMuchOutOfBoundary(o),o.add(e)),this._content){var n=this._content._uiProps.uiTransformComp,r=n.anchorX,s=n.anchorY,a=n.width,h=n.height,l=this._content.position||Yr;o.y>0?l.y-s*h+o.y>=this._bottomBoundary&&(i=Zr.SCROLL_TO_BOTTOM):o.y<0&&l.y-s*h+h+o.y<=this._topBoundary&&(i=Zr.SCROLL_TO_TOP),o.x<0?l.x-r*a+a+o.x<=this._rightBoundary&&(i=Zr.SCROLL_TO_RIGHT):o.x>0&&l.x-r*a+o.x>=this._leftBoundary&&(i=Zr.SCROLL_TO_LEFT)}this._moveContent(o,!1),0===o.x&&0===o.y||(this._scrolling||(this._scrolling=!0,this._dispatchEvent(Zr.SCROLL_BEGAN)),this._dispatchEvent(Zr.SCROLLING)),i&&i.length>0&&this._dispatchEvent(i)},i._handlePressLogic=function(){this._autoScrolling&&this._dispatchEvent(Zr.SCROLL_ENDED),this._autoScrolling=!1,this._isBouncing=!1,this._touchMovePreviousTimestamp=Jr(),this._touchMoveDisplacements.length=0,this._touchMoveTimeDeltas.length=0,this._onScrollBarTouchBegan()},i._clampDelta=function(t){if(this._content&&this.view){var e=this.view.contentSize,i=this._content._uiProps.uiTransformComp;i.width<e.width&&(t.x=0),i.height<e.height&&(t.y=0)}return t},i._gatherTouchMove=function(t){var e=t.clone();for(this._clampDelta(e);this._touchMoveDisplacements.length>=5;)this._touchMoveDisplacements.shift(),this._touchMoveTimeDeltas.shift();this._touchMoveDisplacements.push(e);var i=Jr();this._touchMoveTimeDeltas.push((i-this._touchMovePreviousTimestamp)/1e3),this._touchMovePreviousTimestamp=i},i._startBounceBackIfNeeded=function(){if(!this.elastic)return!1;var t=this._getHowMuchOutOfBoundary();if((t=this._clampDelta(t)).equals(Yr,1e-4))return!1;var e=Math.max(this.bounceDuration,0);return this._startAutoScroll(t,e,!0),this._isBouncing||(t.y>0&&this._dispatchEvent(Zr.BOUNCE_TOP),t.y<0&&this._dispatchEvent(Zr.BOUNCE_BOTTOM),t.x>0&&this._dispatchEvent(Zr.BOUNCE_RIGHT),t.x<0&&this._dispatchEvent(Zr.BOUNCE_LEFT),this._isBouncing=!0),!0},i._processInertiaScroll=function(){if(!this._startBounceBackIfNeeded()&&this.inertia){var t=this._calculateTouchMoveVelocity();!t.equals(Xr,1e-4)&&this.brake<1&&this._startInertiaScroll(t)}this._onScrollBarTouchEnded()},i._isOutOfBoundary=function(){return!this._getHowMuchOutOfBoundary().equals(Yr,1e-4)},i._isNecessaryAutoScrollBrake=function(){if(this._autoScrollBraking)return!0;if(this._isOutOfBoundary()){if(!this._autoScrollCurrentlyOutOfBoundary)return this._autoScrollCurrentlyOutOfBoundary=!0,this._autoScrollBraking=!0,this._autoScrollBrakingStartPosition=this.getContentPosition(),!0}else this._autoScrollCurrentlyOutOfBoundary=!1;return!1},i._processAutoScrolling=function(t){var e=this._isNecessaryAutoScrollBrake(),i=e?.05:1;this._autoScrollAccumulatedTime+=t*(1/i);var o,n=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(o=n,n=(o-=1)*o*o*o*o+1);var r=new h(this._autoScrollTargetDelta);r.multiplyScalar(n);var s=new h(this._autoScrollStartPosition);s.add(r);var a=Math.abs(n-1)<=1e-4;if(Math.abs(n-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent(Zr.SCROLL_ENG_WITH_THRESHOLD),this._isScrollEndedWithThresholdEventFired=!0),this.elastic){var l=new h(s);l.subtract(this._autoScrollBrakingStartPosition),e&&l.multiplyScalar(i),s.set(this._autoScrollBrakingStartPosition),s.add(l)}else{var c=new h(s);c.subtract(this.getContentPosition());var u=this._getHowMuchOutOfBoundary(c);u.equals(Yr,1e-4)||(s.add(u),a=!0)}a&&(this._autoScrolling=!1);var _=new h(s);_.subtract(this.getContentPosition()),this._moveContent(this._clampDelta(_),a),this._dispatchEvent(Zr.SCROLLING),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent(Zr.SCROLL_ENDED))},i._checkMouseWheel=function(t){if(!this._getHowMuchOutOfBoundary().equals(Yr,1e-4))return this._processInertiaScroll(),this.unschedule(this._checkMouseWheel),this._dispatchEvent(Zr.SCROLL_ENDED),void(this._stopMouseWheel=!1);this._mouseWheelEventElapsedTime+=t,this._mouseWheelEventElapsedTime>.1&&(this._onScrollBarTouchEnded(),this.unschedule(this._checkMouseWheel),this._dispatchEvent(Zr.SCROLL_ENDED),this._stopMouseWheel=!1)},i._calculateMovePercentDelta=function(t){var e=t.anchor,i=t.applyToHorizontal,o=t.applyToVertical;this._calculateBoundary(),e.clampf(new B(0,0),new B(1,1));var n=this._getContentBottomBoundary()-this._bottomBoundary;n=-n;var r=this._getContentLeftBoundary()-this._leftBoundary;r=-r;var s=new h;if(this._content&&this.view){var a=0,l=this._content._uiProps.uiTransformComp.contentSize,c=this.view.contentSize;i&&(a=l.width-c.width,s.x=r-a*e.x),o&&(a=l.height-c.height,s.y=n-a*e.y)}return s},i._moveContentToTopLeft=function(t){var e=this._getContentBottomBoundary()-this._bottomBoundary;e=-e;var i=new h,o=0,n=this._getContentLeftBoundary()-this._leftBoundary;if(n=-n,this._content){var r=this._content._uiProps.uiTransformComp.contentSize;r.height<t.height&&(o=r.height-t.height,i.y=e-o),r.width<t.width&&(o=r.width-t.width,i.x=n)}this._updateScrollBarState(),this._moveContent(i),this._adjustContentOutOfBoundary()},i._scaleChanged=function(t){t===$.SCALE&&this._calculateBoundary()},l(e,[{key:"content",get:function(){return this._content},set:function(t){if(this._content!==t){var e=t&&t.parent&&t.parent._uiProps.uiTransformComp;!t||t&&e?(this._content=t,this._calculateBoundary()):F(4302)}}},{key:"horizontalScrollBar",get:function(){return this._horizontalScrollBar},set:function(t){this._horizontalScrollBar!==t&&(this._horizontalScrollBar=t,this._horizontalScrollBar&&(this._horizontalScrollBar.setScrollView(this),this._updateScrollBar(Yr)))}},{key:"verticalScrollBar",get:function(){return this._verticalScrollBar},set:function(t){this._verticalScrollBar!==t&&(this._verticalScrollBar=t,this._verticalScrollBar&&(this._verticalScrollBar.setScrollView(this),this._updateScrollBar(Yr)))}},{key:"view",get:function(){var t=this._content&&this._content.parent;return t?t._uiProps.uiTransformComp:null}}]),e}(Wr),jr.EventType=Zr,zr=c((Pr=Gr).prototype,"bounceDuration",[S,er,ir,or],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Ir=c(Pr.prototype,"brake",[S,nr,rr,sr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),xr=c(Pr.prototype,"elastic",[S,ar,hr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Rr=c(Pr.prototype,"inertia",[S,lr,cr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c(Pr.prototype,"content",[ur,_r,pr],Object.getOwnPropertyDescriptor(Pr.prototype,"content"),Pr.prototype),Br=c(Pr.prototype,"horizontal",[S,dr,gr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c(Pr.prototype,"horizontalScrollBar",[fr,yr,br],Object.getOwnPropertyDescriptor(Pr.prototype,"horizontalScrollBar"),Pr.prototype),Hr=c(Pr.prototype,"vertical",[S,Tr,mr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),c(Pr.prototype,"verticalScrollBar",[vr,Sr,Cr],Object.getOwnPropertyDescriptor(Pr.prototype,"verticalScrollBar"),Pr.prototype),Nr=c(Pr.prototype,"cancelInnerEvents",[S,Er,Or],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Mr=c(Pr.prototype,"scrollEvents",[wr,S,Ar,Lr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kr=c(Pr.prototype,"_content",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Vr=c(Pr.prototype,"_horizontalScrollBar",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Fr=c(Pr.prototype,"_verticalScrollBar",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Dr=Pr))||Dr)||Dr)||Dr)||Dr)||Dr)),Cs=new h;!function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(vs||(vs={})),i(vs);var Es,Os,ws,As,Ls,Ds,Ps,zs,Is,xs,Rs,Bs,Hs,Ns,Ms,ks,Vs,Fs,js,Gs,Us=function(e){return t({Slider:e,SliderComponent:e}),e}((ts=o("cc.Slider"),es=u(),is=_(110),os=p(),ns=d(ft),rs=n(ut),ss=f(),as=n(vs),hs=f(),ls=M(),cs=f(),us=n([q]),_s=f(),ts(ps=es(ps=is(ps=os(ps=ns((ms=Ts=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,T(e,"slideEvents",gs,m(e)),T(e,"_handle",fs,m(e)),T(e,"_direction",ys,m(e)),T(e,"_progress",bs,m(e)),e._offset=new h,e._dragging=!1,e._touchHandle=!1,e._handleLocalPos=new h,e._touchPos=new h,e}s(e,t);var i=e.prototype;return i.__preload=function(){this._updateHandlePosition()},i.onEnable=function(){this._updateHandlePosition(),this.node.on(J.TOUCH_START,this._onTouchBegan,this),this.node.on(J.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(J.TOUCH_END,this._onTouchEnded,this),this.node.on(J.TOUCH_CANCEL,this._onTouchCancelled,this),this._handle&&this._handle.isValid&&(this._handle.node.on(J.TOUCH_START,this._onHandleDragStart,this),this._handle.node.on(J.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.on(J.TOUCH_END,this._onTouchEnded,this))},i.onDisable=function(){this.node.off(J.TOUCH_START,this._onTouchBegan,this),this.node.off(J.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(J.TOUCH_END,this._onTouchEnded,this),this.node.off(J.TOUCH_CANCEL,this._onTouchCancelled,this),this._handle&&this._handle.isValid&&(this._handle.node.off(J.TOUCH_START,this._onHandleDragStart,this),this._handle.node.off(J.TOUCH_MOVE,this._onTouchMoved,this),this._handle.node.off(J.TOUCH_END,this._onTouchEnded,this))},i._onHandleDragStart=function(t){if(t&&this._handle&&this._handle.node._uiProps.uiTransformComp){this._dragging=!0,this._touchHandle=!0;var e=t.touch.getUILocation();h.set(this._touchPos,e.x,e.y,0),this._handle.node._uiProps.uiTransformComp.convertToNodeSpaceAR(this._touchPos,this._offset),t.propagationStopped=!0}},i._onTouchBegan=function(t){this._handle&&t&&(this._dragging=!0,this._touchHandle||this._handleSliderLogic(t.touch),t.propagationStopped=!0)},i._onTouchMoved=function(t){this._dragging&&t&&(this._handleSliderLogic(t.touch),t.propagationStopped=!0)},i._onTouchEnded=function(t){this._dragging=!1,this._touchHandle=!1,this._offset=new h,t&&(t.propagationStopped=!0)},i._onTouchCancelled=function(t){this._dragging=!1,t&&(t.propagationStopped=!0)},i._handleSliderLogic=function(t){this._updateProgress(t),this._emitSlideEvent()},i._emitSlideEvent=function(){q.emitEvents(this.slideEvents,this),this.node.emit("slide",this)},i._updateProgress=function(t){if(this._handle&&t){var e=t.getUILocation();h.set(this._touchPos,e.x,e.y,0);var i=this.node._uiProps.uiTransformComp,o=i.convertToNodeSpaceAR(this._touchPos,Cs);this.direction===vs.Horizontal?this.progress=H(.5+(o.x-this._offset.x)/i.width):this.progress=H(.5+(o.y-this._offset.y)/i.height)}},i._updateHandlePosition=function(){if(this._handle){this._handleLocalPos.set(this._handle.node.getPosition());var t=this.node._uiProps.uiTransformComp;this._direction===vs.Horizontal?this._handleLocalPos.x=-t.width*t.anchorX+this.progress*t.width:this._handleLocalPos.y=-t.height*t.anchorY+this.progress*t.height,this._handle.node.setPosition(this._handleLocalPos)}},i._changeLayout=function(){var t=this.node._uiProps.uiTransformComp,e=t.contentSize;if(t.setContentSize(e.height,e.width),this._handle){var i=this._handle.node.position;this._direction===vs.Horizontal?this._handle.node.setPosition(i.x,0,i.z):this._handle.node.setPosition(0,i.y,i.z),this._updateHandlePosition()}},l(e,[{key:"handle",get:function(){return this._handle},set:function(t){this._handle!==t&&(this._handle=t)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this._changeLayout())}},{key:"progress",get:function(){return this._progress},set:function(t){this._progress!==t&&(this._progress=t,this._updateHandlePosition())}}]),e}(v),Ts.Direction=vs,c((ds=ms).prototype,"handle",[rs,ss],Object.getOwnPropertyDescriptor(ds.prototype,"handle"),ds.prototype),c(ds.prototype,"direction",[as,hs],Object.getOwnPropertyDescriptor(ds.prototype,"direction"),ds.prototype),c(ds.prototype,"progress",[N,ls,cs],Object.getOwnPropertyDescriptor(ds.prototype,"progress"),ds.prototype),gs=c(ds.prototype,"slideEvents",[us,S,_s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fs=c(ds.prototype,"_handle",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ys=c(ds.prototype,"_direction",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return vs.Horizontal}}),bs=c(ds.prototype,"_progress",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),ps=ds))||ps)||ps)||ps)||ps)||ps));function Ws(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return Object.assign.apply(Object,[{}].concat(e))}!function(t){t.TOGGLE="toggle"}(Gs||(Gs={}));var Zs,Ys,Xs,qs,Ks,Qs,Js,$s,ta,ea,ia,oa,na,ra,sa,aa,ha,la,ca,ua,_a,pa,da,ga,fa,ya,ba,Ta,ma,va,Sa,Ca,Ea,Oa,wa,Aa,La,Da,Pa,za,Ia,xa,Ra,Ba,Ha,Na,Ma,ka,Va,Fa,ja,Ga,Ua,Wa=function(e){return t({Toggle:e,ToggleComponent:e}),e}((Es=o("cc.Toggle"),Os=u(),ws=_(110),As=p(),Ls=d(ft),Ds=g(),Ps=f(),zs=n(ut),Is=g(),xs=f(),Rs=n([q]),Bs=f(),Es(Hs=Os(Hs=ws(Hs=As(Hs=Ls((js=Fs=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,T(e,"checkEvents",Ms,m(e)),T(e,"_isChecked",ks,m(e)),T(e,"_checkMark",Vs,m(e)),e}s(e,t);var i=e.prototype;return i._internalToggle=function(){this.isChecked=!this.isChecked},i._set=function(t,e){if(void 0===e&&(e=!0),this._isChecked!=t){this._isChecked=t;var i=this._toggleContainer;i&&i.enabled&&this.enabled&&(t||!i.anyTogglesChecked()&&!i.allowSwitchOff)&&(this._isChecked=!0,i.notifyToggleCheck(this,e)),this.playEffect(),e&&this._emitToggleEvents()}},i.playEffect=function(){this._checkMark&&(this._checkMark.node.active=this._isChecked)},i.setIsCheckedWithoutNotify=function(t){this._set(t,!1)},i.onEnable=function(){t.prototype.onEnable.call(this),this.playEffect(),this.node.on(e.EventType.CLICK,this._internalToggle,this)},i.onDisable=function(){t.prototype.onDisable.call(this),this.node.off(e.EventType.CLICK,this._internalToggle,this)},i.OnDestroy=function(){var t=this._toggleContainer;t&&t.ensureValidState()},i._emitToggleEvents=function(){this.node.emit(e.EventType.TOGGLE,this),this.checkEvents&&q.emitEvents(this.checkEvents,this)},l(e,[{key:"isChecked",get:function(){return this._isChecked},set:function(t){this._set(t)}},{key:"checkMark",get:function(){return this._checkMark},set:function(t){this._checkMark!==t&&(this._checkMark=t)}},{key:"_resizeToTarget",set:function(t){t&&this._resizeNodeToTargetNode()}},{key:"_toggleContainer",get:function(){var t=this.node.parent;return O.Node.isNode(t)?t.getComponent("cc.ToggleContainer"):null}}]),e}(ve),Fs.EventType=Ws(Gs,ge),c((Ns=js).prototype,"isChecked",[Ds,Ps],Object.getOwnPropertyDescriptor(Ns.prototype,"isChecked"),Ns.prototype),c(Ns.prototype,"checkMark",[zs,Is,xs],Object.getOwnPropertyDescriptor(Ns.prototype,"checkMark"),Ns.prototype),Ms=c(Ns.prototype,"checkEvents",[Rs,S,Bs],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ks=c(Ns.prototype,"_isChecked",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Vs=c(Ns.prototype,"_checkMark",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Hs=Ns))||Hs)||Hs)||Hs)||Hs)||Hs)),Za=function(e){return t({ToggleContainer:e,ToggleContainerComponent:e}),e}((Zs=o("cc.ToggleContainer"),Ys=u(),Xs=_(110),qs=p(),Ks=f(),Qs=n([q]),Js=f(),Zs($s=Ys($s=Xs($s=qs($s=r((oa=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,T(e,"_allowSwitchOff",ea,m(e)),T(e,"checkEvents",ia,m(e)),e}s(e,t);var i=e.prototype;return i.onEnable=function(){this.ensureValidState(),this.node.on(J.CHILD_ADDED,this.ensureValidState,this),this.node.on(J.CHILD_REMOVED,this.ensureValidState,this)},i.onDisable=function(){this.node.off(J.CHILD_ADDED,this.ensureValidState,this),this.node.off(J.CHILD_REMOVED,this.ensureValidState,this)},i.activeToggles=function(){return this.toggleItems.filter((function(t){return t.isChecked}))},i.anyTogglesChecked=function(){return!!this.toggleItems.find((function(t){return t.isChecked}))},i.notifyToggleCheck=function(t,e){if(void 0===e&&(e=!0),this.enabledInHierarchy){for(var i=0;i<this.toggleItems.length;i++){var o=this.toggleItems[i];o!==t&&(e?o.isChecked=!1:o.setIsCheckedWithoutNotify(!1))}this.checkEvents&&O.Component.EventHandler.emitEvents(this.checkEvents,t)}},i.ensureValidState=function(){var t=this.toggleItems;if(!this._allowSwitchOff&&!this.anyTogglesChecked()&&0!==t.length){var e=t[0];e.isChecked=!0,this.notifyToggleCheck(e)}var i=this.activeToggles();if(i.length>1)for(var o=i[0],n=0;n<i.length;++n){var r=i[n];r!==o&&(r.isChecked=!1)}},l(e,[{key:"allowSwitchOff",get:function(){return this._allowSwitchOff},set:function(t){this._allowSwitchOff=t}},{key:"toggleItems",get:function(){return this.node.children.map((function(t){var e=t.getComponent("cc.Toggle");if(e&&e.enabled)return e})).filter(Boolean)}}]),e}(v),ea=c((ta=oa).prototype,"_allowSwitchOff",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c(ta.prototype,"allowSwitchOff",[Ks],Object.getOwnPropertyDescriptor(ta.prototype,"allowSwitchOff"),ta.prototype),ia=c(ta.prototype,"checkEvents",[Qs,S,Js],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$s=ta))||$s)||$s)||$s)||$s)||$s)),Ya=new h;function Xa(t){return t instanceof at?nt:t._uiProps.uiTransformComp?t._uiProps.uiTransformComp.contentSize:I.ZERO}function qa(t,e,i,o){for(var n=t.parent?t.parent.getScale():Ya,r=n.x,s=n.y,a=0,h=0,l=t.parent;;){if(!l)return i.x=i.y=0,void(o.x=o.y=1);var c=l.getPosition();if(a+=c.x,h+=c.y,(l=l.parent)===e)break;var u=(n=l?l.getScale():Ya).x,_=n.y;a*=u,h*=_,r*=u,s*=_}o.x=0!==r?1/r:1,o.y=0!==s?1/s:1,i.x=-a,i.y=-h}!function(t){t[t.ONCE=0]="ONCE",t[t.ALWAYS=1]="ALWAYS",t[t.ON_WINDOW_RESIZE=2]="ON_WINDOW_RESIZE"}(Ga||(Ga={})),i(Ga),function(t){t[t.TOP=1]="TOP",t[t.MID=2]="MID",t[t.BOT=4]="BOT",t[t.LEFT=8]="LEFT",t[t.CENTER=16]="CENTER",t[t.RIGHT=32]="RIGHT",t[t.HORIZONTAL=56]="HORIZONTAL",t[t.VERTICAL=7]="VERTICAL"}(Ua||(Ua={}));var Ka,Qa,Ja,$a,th,eh,ih,oh,nh,rh,sh,ah,hh,lh,ch,uh,_h,ph,dh,gh=Ua.TOP|Ua.BOT,fh=Ua.LEFT|Ua.RIGHT,yh=function(e){return t({Widget:e,WidgetComponent:e}),e}((na=o("cc.Widget"),ra=u(),sa=_(110),aa=p(),ha=d(ft),la=n(et),ca=f(),ua=f(),_a=f(),pa=f(),da=f(),ga=f(),fa=f(),ya=x(),ba=x(),Ta=n(Ga),ma=f(),na(va=ra(va=sa(va=aa(va=ha(va=r((ja=Fa=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return(e=t.call.apply(t,[this].concat(o))||this)._lastPos=new h,e._lastSize=new I,e._dirty=!0,T(e,"_alignFlags",Ca,m(e)),T(e,"_target",Ea,m(e)),T(e,"_left",Oa,m(e)),T(e,"_right",wa,m(e)),T(e,"_top",Aa,m(e)),T(e,"_bottom",La,m(e)),T(e,"_horizontalCenter",Da,m(e)),T(e,"_verticalCenter",Pa,m(e)),T(e,"_isAbsLeft",za,m(e)),T(e,"_isAbsRight",Ia,m(e)),T(e,"_isAbsTop",xa,m(e)),T(e,"_isAbsBottom",Ra,m(e)),T(e,"_isAbsHorizontalCenter",Ba,m(e)),T(e,"_isAbsVerticalCenter",Ha,m(e)),T(e,"_originalWidth",Na,m(e)),T(e,"_originalHeight",Ma,m(e)),T(e,"_alignMode",ka,m(e)),T(e,"_lockFlags",Va,m(e)),e}s(e,t);var i=e.prototype;return i.updateAlignment=function(){O._widgetManager.updateAlignment(this.node)},i._validateTargetInDEV=function(){},i.setDirty=function(){this._recursiveDirty()},i.onEnable=function(){this.node.getPosition(this._lastPos),this._lastSize.set(this.node._uiProps.uiTransformComp.contentSize),O._widgetManager.add(this),this._registerEvent(),this._registerTargetEvents()},i.onDisable=function(){O._widgetManager.remove(this),this._unregisterEvent(),this._unregisterTargetEvents()},i.onDestroy=function(){this._removeParentEvent()},i._adjustWidgetToAllowMovingInEditor=function(){},i._adjustWidgetToAllowResizingInEditor=function(){},i._adjustWidgetToAnchorChanged=function(){this.setDirty()},i._adjustTargetToParentChanged=function(t){t&&this._unregisterOldParentEvents(t),this.node.getParent()&&this._registerTargetEvents()},i._registerEvent=function(){this.node.on(J.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this),this.node.on(J.PARENT_CHANGED,this._adjustTargetToParentChanged,this)},i._unregisterEvent=function(){this.node.off(J.ANCHOR_CHANGED,this._adjustWidgetToAnchorChanged,this)},i._removeParentEvent=function(){this.node.off(J.PARENT_CHANGED,this._adjustTargetToParentChanged,this)},i._autoChangedValue=function(t,e){if((this._alignFlags&t)>0){var i=this.node.parent&&this.node.parent._uiProps,o=i&&i.uiTransformComp,n=o?o.contentSize:nt;this.isAlignLeft&&t===Ua.LEFT?this._left=e?this._left*n.width:this._left/n.width:this.isAlignRight&&t===Ua.RIGHT?this._right=e?this._right*n.width:this._right/n.width:this.isAlignHorizontalCenter&&t===Ua.CENTER?this._horizontalCenter=e?this._horizontalCenter*n.width:this._horizontalCenter/n.width:this.isAlignTop&&t===Ua.TOP?this._top=e?this._top*n.height:this._top/n.height:this.isAlignBottom&&t===Ua.BOT?this._bottom=e?this._bottom*n.height:this._bottom/n.height:this.isAbsoluteVerticalCenter&&t===Ua.MID&&(this._verticalCenter=this._verticalCenter/n.height),this._recursiveDirty()}},i._registerTargetEvents=function(){var t=this._target||this.node.parent;t&&t.getComponent(ft)&&(t.on(J.TRANSFORM_CHANGED,this._targetChangedOperation,this),t.on(J.SIZE_CHANGED,this._targetChangedOperation,this))},i._unregisterTargetEvents=function(){var t=this._target||this.node.parent;t&&(t.off(J.TRANSFORM_CHANGED,this._targetChangedOperation,this),t.off(J.SIZE_CHANGED,this._targetChangedOperation,this))},i._unregisterOldParentEvents=function(t){var e=this._target||t;e&&(e.off(J.TRANSFORM_CHANGED,this._targetChangedOperation,this),e.off(J.SIZE_CHANGED,this._targetChangedOperation,this))},i._targetChangedOperation=function(){this.alignMode===Ga.ALWAYS&&this._recursiveDirty()},i._setAlign=function(t,e){if(e!==(this._alignFlags&t)>0){var i=(t&fh)>0,o=this.node._uiProps.uiTransformComp;e?(this._alignFlags|=t,i?(this.isAlignHorizontalCenter=!1,this.isStretchWidth&&(this._originalWidth=o.width)):(this.isAlignVerticalCenter=!1,this.isStretchHeight&&(this._originalHeight=o.height))):(i?this.isStretchWidth&&(o.width=this._originalWidth):this.isStretchHeight&&(o.height=this._originalHeight),this._alignFlags&=~t)}},i._recursiveDirty=function(){this._dirty||(this._dirty=!0)},l(e,[{key:"target",get:function(){return this._target},set:function(t){this._target!==t&&(this._unregisterTargetEvents(),this._target=t,this._registerTargetEvents(),this._validateTargetInDEV(),this._recursiveDirty())}},{key:"isAlignTop",get:function(){return(this._alignFlags&Ua.TOP)>0},set:function(t){this._setAlign(Ua.TOP,t),this._recursiveDirty()}},{key:"isAlignBottom",get:function(){return(this._alignFlags&Ua.BOT)>0},set:function(t){this._setAlign(Ua.BOT,t),this._recursiveDirty()}},{key:"isAlignLeft",get:function(){return(this._alignFlags&Ua.LEFT)>0},set:function(t){this._setAlign(Ua.LEFT,t),this._recursiveDirty()}},{key:"isAlignRight",get:function(){return(this._alignFlags&Ua.RIGHT)>0},set:function(t){this._setAlign(Ua.RIGHT,t),this._recursiveDirty()}},{key:"isAlignVerticalCenter",get:function(){return(this._alignFlags&Ua.MID)>0},set:function(t){t?(this.isAlignTop=!1,this.isAlignBottom=!1,this._alignFlags|=Ua.MID):this._alignFlags&=~Ua.MID,this._recursiveDirty()}},{key:"isAlignHorizontalCenter",get:function(){return(this._alignFlags&Ua.CENTER)>0},set:function(t){t?(this.isAlignLeft=!1,this.isAlignRight=!1,this._alignFlags|=Ua.CENTER):this._alignFlags&=~Ua.CENTER,this._recursiveDirty()}},{key:"isStretchWidth",get:function(){return(this._alignFlags&fh)===fh}},{key:"isStretchHeight",get:function(){return(this._alignFlags&gh)===gh}},{key:"top",get:function(){return this._top},set:function(t){this._top=t,this._recursiveDirty()}},{key:"editorTop",get:function(){return this._isAbsTop?this._top:100*this._top},set:function(t){this._top=this._isAbsTop?t:t/100,this._recursiveDirty()}},{key:"bottom",get:function(){return this._bottom},set:function(t){this._bottom=t,this._recursiveDirty()}},{key:"editorBottom",get:function(){return this._isAbsBottom?this._bottom:100*this._bottom},set:function(t){this._bottom=this._isAbsBottom?t:t/100,this._recursiveDirty()}},{key:"left",get:function(){return this._left},set:function(t){this._left=t,this._recursiveDirty()}},{key:"editorLeft",get:function(){return this._isAbsLeft?this._left:100*this._left},set:function(t){this._left=this._isAbsLeft?t:t/100,this._recursiveDirty()}},{key:"right",get:function(){return this._right},set:function(t){this._right=t,this._recursiveDirty()}},{key:"editorRight",get:function(){return this._isAbsRight?this._right:100*this._right},set:function(t){this._right=this._isAbsRight?t:t/100,this._recursiveDirty()}},{key:"horizontalCenter",get:function(){return this._horizontalCenter},set:function(t){this._horizontalCenter=t,this._recursiveDirty()}},{key:"editorHorizontalCenter",get:function(){return this._isAbsHorizontalCenter?this._horizontalCenter:100*this._horizontalCenter},set:function(t){this._horizontalCenter=this._isAbsHorizontalCenter?t:t/100,this._recursiveDirty()}},{key:"verticalCenter",get:function(){return this._verticalCenter},set:function(t){this._verticalCenter=t,this._recursiveDirty()}},{key:"editorVerticalCenter",get:function(){return this._isAbsVerticalCenter?this._verticalCenter:100*this._verticalCenter},set:function(t){this._verticalCenter=this._isAbsVerticalCenter?t:t/100,this._recursiveDirty()}},{key:"isAbsoluteTop",get:function(){return this._isAbsTop},set:function(t){this._isAbsTop!==t&&(this._isAbsTop=t,this._autoChangedValue(Ua.TOP,this._isAbsTop))}},{key:"isAbsoluteBottom",get:function(){return this._isAbsBottom},set:function(t){this._isAbsBottom!==t&&(this._isAbsBottom=t,this._autoChangedValue(Ua.BOT,this._isAbsBottom))}},{key:"isAbsoluteLeft",get:function(){return this._isAbsLeft},set:function(t){this._isAbsLeft!==t&&(this._isAbsLeft=t,this._autoChangedValue(Ua.LEFT,this._isAbsLeft))}},{key:"isAbsoluteRight",get:function(){return this._isAbsRight},set:function(t){this._isAbsRight!==t&&(this._isAbsRight=t,this._autoChangedValue(Ua.RIGHT,this._isAbsRight))}},{key:"isAbsoluteHorizontalCenter",get:function(){return this._isAbsHorizontalCenter},set:function(t){this._isAbsHorizontalCenter!==t&&(this._isAbsHorizontalCenter=t,this._autoChangedValue(Ua.CENTER,this._isAbsHorizontalCenter))}},{key:"isAbsoluteVerticalCenter",get:function(){return this._isAbsVerticalCenter},set:function(t){this._isAbsVerticalCenter!==t&&(this._isAbsVerticalCenter=t,this._autoChangedValue(Ua.MID,this._isAbsVerticalCenter))}},{key:"alignMode",get:function(){return this._alignMode},set:function(t){this._alignMode=t,this._recursiveDirty()}},{key:"alignFlags",get:function(){return this._alignFlags},set:function(t){this._alignFlags!==t&&(this._alignFlags=t,this._recursiveDirty())}}]),e}(v),Fa.AlignMode=Ga,c((Sa=ja).prototype,"target",[la,ca],Object.getOwnPropertyDescriptor(Sa.prototype,"target"),Sa.prototype),c(Sa.prototype,"isAlignTop",[ua],Object.getOwnPropertyDescriptor(Sa.prototype,"isAlignTop"),Sa.prototype),c(Sa.prototype,"isAlignBottom",[_a],Object.getOwnPropertyDescriptor(Sa.prototype,"isAlignBottom"),Sa.prototype),c(Sa.prototype,"isAlignLeft",[pa],Object.getOwnPropertyDescriptor(Sa.prototype,"isAlignLeft"),Sa.prototype),c(Sa.prototype,"isAlignRight",[da],Object.getOwnPropertyDescriptor(Sa.prototype,"isAlignRight"),Sa.prototype),c(Sa.prototype,"isAlignVerticalCenter",[ga],Object.getOwnPropertyDescriptor(Sa.prototype,"isAlignVerticalCenter"),Sa.prototype),c(Sa.prototype,"isAlignHorizontalCenter",[fa],Object.getOwnPropertyDescriptor(Sa.prototype,"isAlignHorizontalCenter"),Sa.prototype),c(Sa.prototype,"isStretchWidth",[ya],Object.getOwnPropertyDescriptor(Sa.prototype,"isStretchWidth"),Sa.prototype),c(Sa.prototype,"isStretchHeight",[ba],Object.getOwnPropertyDescriptor(Sa.prototype,"isStretchHeight"),Sa.prototype),c(Sa.prototype,"editorTop",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"editorTop"),Sa.prototype),c(Sa.prototype,"editorBottom",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"editorBottom"),Sa.prototype),c(Sa.prototype,"editorLeft",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"editorLeft"),Sa.prototype),c(Sa.prototype,"editorRight",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"editorRight"),Sa.prototype),c(Sa.prototype,"editorHorizontalCenter",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"editorHorizontalCenter"),Sa.prototype),c(Sa.prototype,"editorVerticalCenter",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"editorVerticalCenter"),Sa.prototype),c(Sa.prototype,"isAbsoluteTop",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"isAbsoluteTop"),Sa.prototype),c(Sa.prototype,"isAbsoluteBottom",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"isAbsoluteBottom"),Sa.prototype),c(Sa.prototype,"isAbsoluteLeft",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"isAbsoluteLeft"),Sa.prototype),c(Sa.prototype,"isAbsoluteRight",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"isAbsoluteRight"),Sa.prototype),c(Sa.prototype,"isAbsoluteHorizontalCenter",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"isAbsoluteHorizontalCenter"),Sa.prototype),c(Sa.prototype,"isAbsoluteVerticalCenter",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"isAbsoluteVerticalCenter"),Sa.prototype),c(Sa.prototype,"alignMode",[Ta,ma],Object.getOwnPropertyDescriptor(Sa.prototype,"alignMode"),Sa.prototype),c(Sa.prototype,"alignFlags",[j],Object.getOwnPropertyDescriptor(Sa.prototype,"alignFlags"),Sa.prototype),Ca=c(Sa.prototype,"_alignFlags",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ea=c(Sa.prototype,"_target",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Oa=c(Sa.prototype,"_left",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),wa=c(Sa.prototype,"_right",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Aa=c(Sa.prototype,"_top",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),La=c(Sa.prototype,"_bottom",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Da=c(Sa.prototype,"_horizontalCenter",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Pa=c(Sa.prototype,"_verticalCenter",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),za=c(Sa.prototype,"_isAbsLeft",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ia=c(Sa.prototype,"_isAbsRight",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),xa=c(Sa.prototype,"_isAbsTop",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ra=c(Sa.prototype,"_isAbsBottom",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ba=c(Sa.prototype,"_isAbsHorizontalCenter",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ha=c(Sa.prototype,"_isAbsVerticalCenter",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Na=c(Sa.prototype,"_originalWidth",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ma=c(Sa.prototype,"_originalHeight",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ka=c(Sa.prototype,"_alignMode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ga.ON_WINDOW_RESIZE}}),Va=c(Sa.prototype,"_lockFlags",[S,G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),va=Sa))||va)||va)||va)||va)||va)||va));O.internal.computeInverseTransForTarget=qa,O.internal.getReadonlyNodeSize=Xa;var bh,Th=new e;!function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL"}(bh||(bh={})),i(bh);var mh,vh,Sh,Ch,Eh,Oh,wh,Ah,Lh,Dh,Ph,zh,Ih,xh,Rh,Bh,Hh,Nh,Mh,kh,Vh,Fh,jh,Gh,Uh,Wh,Zh,Yh,Xh,qh,Kh,Qh,Jh,$h,tl,el,il,ol,nl,rl,sl,al,hl,ll,cl,ul=function(e){return t({PageViewIndicator:e,PageViewIndicatorComponent:e}),e}((Ka=o("cc.PageViewIndicator"),Qa=u(),Ja=_(110),$a=p(),th=n(ct),eh=f(),ih=n(bh),oh=f(),nh=n(I),rh=f(),sh=f(),Ka(ah=Qa(ah=Ja(ah=$a((dh=ph=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,T(e,"spacing",lh,m(e)),T(e,"_spriteFrame",ch,m(e)),T(e,"_direction",uh,m(e)),T(e,"_cellSize",_h,m(e)),e._layout=null,e._pageView=null,e._indicators=[],e}s(e,t);var i=e.prototype;return i.onLoad=function(){this._updateLayout()},i.setPageView=function(t){this._pageView=t,this._refresh()},i._updateLayout=function(){this._layout=this.getComponent(yn),this._layout||(this._layout=this.addComponent(yn));var t=this._layout;this.direction===bh.HORIZONTAL?(t.type=yn.Type.HORIZONTAL,t.spacingX=this.spacing):this.direction===bh.VERTICAL&&(t.type=yn.Type.VERTICAL,t.spacingY=this.spacing),t.resizeMode=yn.ResizeMode.CONTAINER},i._createIndicator=function(){var t=new et,e=t.addComponent(ut);return e.spriteFrame=this.spriteFrame,e.sizeMode=ut.SizeMode.CUSTOM,t.parent=this.node,t._uiProps.uiTransformComp.setContentSize(this._cellSize),t},i._changedState=function(){var t=this._indicators;if(0!==t.length&&this._pageView){var e=this._pageView.curPageIdx;if(!(e>=t.length)){for(var i=0;i<t.length;++i){var o=t[i];if(o._uiProps.uiComp){var n=o._uiProps.uiComp;Th.set(n.color),Th.a=127.5,n.color=Th}}if(t[e]._uiProps.uiComp){var r=t[e]._uiProps.uiComp;Th.set(r.color),Th.a=255,r.color=Th}}}},i._refresh=function(){if(this._pageView){var t=this._indicators,e=this._pageView.getPages();if(e.length!==t.length){var i=0;if(e.length>t.length)for(i=0;i<e.length;++i)t[i]||(t[i]=this._createIndicator());else for(i=t.length-e.length;i>0;--i){var o=t[i-1];this.node.removeChild(o),t.splice(i-1,1)}this._layout&&this._layout.enabledInHierarchy&&this._layout.updateLayout(),this._changedState()}}},l(e,[{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(t){this._spriteFrame!==t&&(this._spriteFrame=t)}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t)}},{key:"cellSize",get:function(){return this._cellSize},set:function(t){this._cellSize!==t&&(this._cellSize=t)}}]),e}(v),ph.Direction=bh,c((hh=dh).prototype,"spriteFrame",[th,eh],Object.getOwnPropertyDescriptor(hh.prototype,"spriteFrame"),hh.prototype),c(hh.prototype,"direction",[ih,oh],Object.getOwnPropertyDescriptor(hh.prototype,"direction"),hh.prototype),c(hh.prototype,"cellSize",[nh,rh],Object.getOwnPropertyDescriptor(hh.prototype,"cellSize"),hh.prototype),lh=c(hh.prototype,"spacing",[S,sh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ch=c(hh.prototype,"_spriteFrame",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),uh=c(hh.prototype,"_direction",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return bh.HORIZONTAL}}),_h=c(hh.prototype,"_cellSize",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new I(20,20)}}),ah=hh))||ah)||ah)||ah)||ah)),_l=new B;!function(t){t[t.Unified=0]="Unified",t[t.Free=1]="Free"}(hl||(hl={})),i(hl),function(t){t[t.Horizontal=0]="Horizontal",t[t.Vertical=1]="Vertical"}(ll||(ll={})),i(ll),function(t){t.PAGE_TURNING="page-turning"}(cl||(cl={}));var pl=function(e){return t({PageView:e,PageViewComponent:e}),e}((mh=o("cc.PageView"),vh=u(),Sh=_(110),Ch=p(),Eh=n(hl),Oh=f(),wh=n(ll),Ah=f(),Lh=M(),Dh=f(),Ph=M(),zh=f(),Ih=n(ul),xh=f(),Rh=f(),Bh=n(Ur),Hh=x(),Nh=n(Ur),Mh=x(),kh=x(),Vh=x(),Fh=x(),jh=n([q]),Gh=x(),Uh=n([q]),Wh=f(),mh(Zh=vh(Zh=Sh(Zh=Ch((al=sl=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,T(e,"autoPageTurningThreshold",Xh,m(e)),T(e,"horizontal",qh,m(e)),T(e,"vertical",Kh,m(e)),T(e,"cancelInnerEvents",Qh,m(e)),T(e,"scrollEvents",Jh,m(e)),T(e,"pageTurningSpeed",$h,m(e)),T(e,"pageEvents",tl,m(e)),T(e,"_sizeMode",el,m(e)),T(e,"_direction",il,m(e)),T(e,"_scrollThreshold",ol,m(e)),T(e,"_pageTurningEventTiming",nl,m(e)),T(e,"_indicator",rl,m(e)),e._curPageIdx=0,e._lastPageIdx=0,e._pages=[],e._initContentPos=new h,e._scrollCenterOffsetX=[],e._scrollCenterOffsetY=[],e._touchBeganPosition=new h,e._touchEndPosition=new h,e}s(e,t);var i=e.prototype;return i.onEnable=function(){t.prototype.onEnable.call(this),this.node.on(J.SIZE_CHANGED,this._updateAllPagesSize,this),this.node.on(e.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)},i.onDisable=function(){t.prototype.onDisable.call(this),this.node.off(J.SIZE_CHANGED,this._updateAllPagesSize,this),this.node.off(e.EventType.SCROLL_ENG_WITH_THRESHOLD,this._dispatchPageTurningEvent,this)},i.onLoad=function(){this._initPages(),this.indicator&&this.indicator.setPageView(this)},i.getCurrentPageIndex=function(){return this._curPageIdx},i.setCurrentPageIndex=function(t){this.scrollToPage(t,1)},i.getPages=function(){return this._pages},i.addPage=function(t){t&&-1===this._pages.indexOf(t)&&this.content&&(t._uiProps.uiTransformComp?(this.content.addChild(t),this._pages.push(t),this._updatePageView()):F(4301))},i.insertPage=function(t,e){if(!(e<0)&&t&&-1===this._pages.indexOf(t)&&this.content)if(e>=this._pages.length)this.addPage(t);else{if(!t._uiProps.uiTransformComp)return void F(4301);this._pages.splice(e,0,t),this.content.insertChild(t,e),this._updatePageView()}},i.removePage=function(t){if(t&&this.content){var e=this._pages.indexOf(t);-1!==e?this.removePageAtIndex(e):U(4300,t.name)}},i.removePageAtIndex=function(t){var e=this._pages;if(!(t<0||t>=e.length)){var i=e[t];i&&this.content&&(this.content.removeChild(i),e.splice(t,1),this._updatePageView())}},i.removeAllPages=function(){if(this.content){for(var t=this._pages,e=0,i=t.length;e<i;e++)this.content.removeChild(t[e]);this._pages.length=0,this._updatePageView()}},i.scrollToPage=function(t,e){void 0===e&&(e=.3),t<0||t>=this._pages.length||(this._curPageIdx=t,this.scrollToOffset(this._moveOffsetValue(t),e,!0),this.indicator&&this.indicator._changedState())},i.getScrollEndedEventTiming=function(){return this.pageTurningEventTiming},i._updatePageView=function(){if(this.content){var t=this.content.getComponent(yn);t&&t.enabled&&t.updateLayout();var e=this._pages.length;this._curPageIdx>=e&&(this._curPageIdx=0===e?0:e-1,this._lastPageIdx=this._curPageIdx);for(var i=this._initContentPos,o=0;o<e;++o){var n=this._pages[o].position;this.direction===ll.Horizontal?this._scrollCenterOffsetX[o]=Math.abs(i.x+n.x):this._scrollCenterOffsetY[o]=Math.abs(i.y+n.y)}this.indicator&&this.indicator._refresh()}},i._updateAllPagesSize=function(){var t=this.view;if(this.content&&t&&this._sizeMode===hl.Unified)for(var e=this._pages,i=t.contentSize,o=0,n=e.length;o<n;o++)e[o]._uiProps.uiTransformComp.setContentSize(i)},i._handleReleaseLogic=function(){this._autoScrollToPage(),this._scrolling&&(this._scrolling=!1,this._autoScrolling||this._dispatchEvent(e.EventType.SCROLL_ENDED))},i._onTouchBegan=function(e,i){e.touch.getUILocation(_l),h.set(this._touchBeganPosition,_l.x,_l.y,0),t.prototype._onTouchBegan.call(this,e,i)},i._onTouchMoved=function(e,i){t.prototype._onTouchMoved.call(this,e,i)},i._onTouchEnded=function(e,i){e.touch.getUILocation(_l),h.set(this._touchEndPosition,_l.x,_l.y,0),t.prototype._onTouchEnded.call(this,e,i)},i._onTouchCancelled=function(e,i){e.touch.getUILocation(_l),h.set(this._touchEndPosition,_l.x,_l.y,0),t.prototype._onTouchCancelled.call(this,e,i)},i._onMouseWheel=function(){},i._syncScrollDirection=function(){this.horizontal=this.direction===ll.Horizontal,this.vertical=this.direction===ll.Vertical},i._syncSizeMode=function(){var t=this.view;if(this.content&&t){var e=this.content.getComponent(yn);if(e){if(this._sizeMode===hl.Free&&this._pages.length>0){var i=this._pages[0]._uiProps.uiTransformComp,o=this._pages[this._pages.length-1]._uiProps.uiTransformComp;this.direction===ll.Horizontal?(e.paddingLeft=(t.width-i.width)/2,e.paddingRight=(t.width-o.width)/2):this.direction===ll.Vertical&&(e.paddingTop=(t.height-i.height)/2,e.paddingBottom=(t.height-o.height)/2)}e.updateLayout()}}},i._initPages=function(){if(this.content){this._initContentPos=this.content.position;for(var t=this.content.children,e=0;e<t.length;++e){var i=t[e];this._pages.indexOf(i)>=0||this._pages.push(i)}this._syncScrollDirection(),this._syncSizeMode(),this._updatePageView()}},i._dispatchPageTurningEvent=function(){this._lastPageIdx!==this._curPageIdx&&(this._lastPageIdx=this._curPageIdx,q.emitEvents(this.pageEvents,this,cl.PAGE_TURNING),this.node.emit(cl.PAGE_TURNING,this))},i._isQuicklyScrollable=function(t){if(this.direction===ll.Horizontal){if(Math.abs(t.x)>this.autoPageTurningThreshold)return!0}else if(this.direction===ll.Vertical&&Math.abs(t.y)>this.autoPageTurningThreshold)return!0;return!1},i._moveOffsetValue=function(t){var e=new h;if(this._sizeMode===hl.Free)this.direction===ll.Horizontal?e.x=this._scrollCenterOffsetX[t]:this.direction===ll.Vertical&&(e.y=this._scrollCenterOffsetY[t]);else{var i=this.view;if(!i)return e;this.direction===ll.Horizontal?e.x=t*i.width:this.direction===ll.Vertical&&(e.y=t*i.height)}return e},i._getDragDirection=function(t){return this._direction===ll.Horizontal?0===t.x?0:t.x>0?1:-1:0===t.y?0:t.y<0?1:-1},i._isScrollable=function(t,e,i){if(this._sizeMode===hl.Free){var o=0,n=0;if(this.direction===ll.Horizontal)return o=this._scrollCenterOffsetX[e],n=this._scrollCenterOffsetX[i],Math.abs(t.x)>=Math.abs(o-n)*this.scrollThreshold;if(this.direction===ll.Vertical)return o=this._scrollCenterOffsetY[e],n=this._scrollCenterOffsetY[i],Math.abs(t.y)>=Math.abs(o-n)*this.scrollThreshold}else{var r=this.view;if(!r)return;if(this.direction===ll.Horizontal)return Math.abs(t.x)>=r.width*this.scrollThreshold;if(this.direction===ll.Vertical)return Math.abs(t.y)>=r.height*this.scrollThreshold}},i._autoScrollToPage=function(){if(this._startBounceBackIfNeeded()){var t=this._getHowMuchOutOfBoundary();((t=this._clampDelta(t)).x>0||t.y<0)&&(this._curPageIdx=0===this._pages.length?0:this._pages.length-1),(t.x<0||t.y>0)&&(this._curPageIdx=0),this.indicator&&this.indicator._changedState()}else{var e=new h;h.subtract(e,this._touchBeganPosition,this._touchEndPosition);var i=this._curPageIdx,o=i+this._getDragDirection(e),n=this.pageTurningSpeed*Math.abs(i-o);if(o<this._pages.length){if(this._isScrollable(e,i,o))return void this.scrollToPage(o,n);var r=this._calculateTouchMoveVelocity();if(this._isQuicklyScrollable(r))return void this.scrollToPage(o,n)}this.scrollToPage(i,n)}},l(e,[{key:"sizeMode",get:function(){return this._sizeMode},set:function(t){this._sizeMode!==t&&(this._sizeMode=t,this._syncSizeMode())}},{key:"direction",get:function(){return this._direction},set:function(t){this._direction!==t&&(this._direction=t,this._syncScrollDirection())}},{key:"scrollThreshold",get:function(){return this._scrollThreshold},set:function(t){this._scrollThreshold!==t&&(this._scrollThreshold=t)}},{key:"pageTurningEventTiming",get:function(){return this._pageTurningEventTiming},set:function(t){this._pageTurningEventTiming!==t&&(this._pageTurningEventTiming=t)}},{key:"indicator",get:function(){return this._indicator},set:function(t){this._indicator!==t&&(this._indicator=t,this.indicator&&this.indicator.setPageView(this))}},{key:"curPageIdx",get:function(){return this._curPageIdx}},{key:"verticalScrollBar",get:function(){return t.prototype.verticalScrollBar},set:function(t){this.verticalScrollBar=t}},{key:"horizontalScrollBar",get:function(){return t.prototype.horizontalScrollBar},set:function(t){this.horizontalScrollBar=t}}]),e}(Ss),sl.SizeMode=hl,sl.Direction=ll,sl.EventType=Ws(cl,Zr),c((Yh=al).prototype,"sizeMode",[Eh,Oh],Object.getOwnPropertyDescriptor(Yh.prototype,"sizeMode"),Yh.prototype),c(Yh.prototype,"direction",[wh,Ah],Object.getOwnPropertyDescriptor(Yh.prototype,"direction"),Yh.prototype),c(Yh.prototype,"scrollThreshold",[N,Lh,Dh],Object.getOwnPropertyDescriptor(Yh.prototype,"scrollThreshold"),Yh.prototype),c(Yh.prototype,"pageTurningEventTiming",[N,Ph,zh],Object.getOwnPropertyDescriptor(Yh.prototype,"pageTurningEventTiming"),Yh.prototype),c(Yh.prototype,"indicator",[Ih,xh],Object.getOwnPropertyDescriptor(Yh.prototype,"indicator"),Yh.prototype),Xh=c(Yh.prototype,"autoPageTurningThreshold",[S,Rh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 100}}),c(Yh.prototype,"verticalScrollBar",[Bh,W,Hh],Object.getOwnPropertyDescriptor(Yh.prototype,"verticalScrollBar"),Yh.prototype),c(Yh.prototype,"horizontalScrollBar",[Nh,W,Mh],Object.getOwnPropertyDescriptor(Yh.prototype,"horizontalScrollBar"),Yh.prototype),qh=c(Yh.prototype,"horizontal",[W,S,kh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Kh=c(Yh.prototype,"vertical",[W,S,Vh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Qh=c(Yh.prototype,"cancelInnerEvents",[W,S,Fh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Jh=c(Yh.prototype,"scrollEvents",[jh,S,W,Gh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$h=c(Yh.prototype,"pageTurningSpeed",[S,j],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.3}}),tl=c(Yh.prototype,"pageEvents",[Uh,S,Wh],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),el=c(Yh.prototype,"_sizeMode",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return hl.Unified}}),il=c(Yh.prototype,"_direction",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ll.Horizontal}}),ol=c(Yh.prototype,"_scrollThreshold",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.5}}),nl=c(Yh.prototype,"_pageTurningEventTiming",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),rl=c(Yh.prototype,"_indicator",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zh=Yh))||Zh)||Zh)||Zh)||Zh)),dl=new h,gl=new B,fl=new h,yl=new h(1,1,1);function bl(t,e){var i,o=e.target,n=fl,r=yl;o?qa(t,i=o,n,r):i=t.parent;var s=Xa(i),a=i instanceof at||!i.getComponent(ft),l=a?gl:i.getComponent(ft).anchorPoint,c=a;t.getPosition(dl);var u=t._uiProps.uiTransformComp,_=dl.x,p=dl.y,d=u.anchorPoint,g=t.getScale();if(e.alignFlags&Ua.HORIZONTAL){var f=0,y=0,b=s.width;c?(f=nt.left.x,y=nt.right.x):y=(f=-l.x*b)+b,f+=e.isAbsoluteLeft?e.left:e.left*b,y-=e.isAbsoluteRight?e.right:e.right*b,o&&(f+=n.x,f*=r.x,y+=n.x,y*=r.x);var T=0,m=d.x,v=g.x;if(v<0&&(m=1-m,v=-v),e.isStretchWidth)T=y-f,0!==v&&(u.width=T/v),_=f+m*T;else if(T=u.width*v,e.isAlignHorizontalCenter){var S=e.isAbsoluteHorizontalCenter?e.horizontalCenter:e.horizontalCenter*b,C=(.5-l.x)*s.width;o&&(S*=r.x,C+=n.x,C*=r.x),_=C+(m-.5)*T+S}else _=e.isAlignLeft?f+m*T:y+(m-1)*T;e._lastSize.width=T}if(e.alignFlags&Ua.VERTICAL){var E=0,O=0,w=s.height;c?(O=nt.bottom.y,E=nt.top.y):E=(O=-l.y*w)+w,O+=e.isAbsoluteBottom?e.bottom:e.bottom*w,E-=e.isAbsoluteTop?e.top:e.top*w,o&&(O+=n.y,O*=r.y,E+=n.y,E*=r.y);var A=0,L=d.y,D=g.y;if(D<0&&(L=1-L,D=-D),e.isStretchHeight)A=E-O,0!==D&&(u.height=A/D),p=O+L*A;else if(A=u.height*D,e.isAlignVerticalCenter){var P=e.isAbsoluteVerticalCenter?e.verticalCenter:e.verticalCenter*w,z=(.5-l.y)*s.height;o&&(P*=r.y,z+=n.y,z*=r.y),p=z+(L-.5)*A+P}else p=e.isAlignBottom?O+L*A:E+(L-1)*A;e._lastSize.height=A}t.setPosition(_,p,dl.z),h.set(e._lastPos,_,p,dl.z)}function Tl(){var t=K.getScene();if(t){if(Al.isAligning=!0,Al._nodesOrderDirty)wl.length=0,function t(e){var i=e.getComponent(yh);if(i)if(bl(e,i),i.alignMode===Ga.ONCE)i.enabled=!1;else{if(!O.isValid(e,!0))return;wl.push(i)}for(var o,n=e.children,r=V(n);!(o=r()).done;){var s=o.value;s.active&&t(s)}}(t),Al._nodesOrderDirty=!1;else{var e=null,i=Al._activeWidgetsIterator;for(i.i=0;i.i<wl.length;++i.i)(e=wl[i.i])._dirty&&(bl(e.node,e),e._dirty=!1)}Al.isAligning=!1}}var ml,vl,Sl,Cl,El,Ol,wl=[],Al=t("widgetManager",O._widgetManager={isAligning:!1,_nodesOrderDirty:!1,_activeWidgetsIterator:new Z.MutableForwardIterator(wl),animationState:null,init:function(){K.on(Q.EVENT_AFTER_UPDATE,Tl),rt.instance.on("design-resolution-changed",this.onResized,this);var t=this.onResized.bind(this);rt.instance.on("canvas-resize",t),window.addEventListener("orientationchange",t)},add:function(){this._nodesOrderDirty=!0},remove:function(t){this._activeWidgetsIterator.remove(t)},onResized:function(){var t=K.getScene();t&&this.refreshWidgetOnResized(t)},refreshWidgetOnResized:function(t){var e=et.isNode(t)&&t.getComponent(yh);e&&e.enabled&&(e.alignMode===Ga.ON_WINDOW_RESIZE||e.alignMode===Ga.ALWAYS)&&e.setDirty();for(var i,o=t.children,n=V(o);!(i=n()).done;){var r=i.value;this.refreshWidgetOnResized(r)}},updateOffsetsToStayPut:function(t,e){function i(t,e){return Math.abs(t-e)>1e-10?e:t}var o=t.node,n=o.parent;if(n){var r=new h,s=new h(1,1,1);if(t.target&&qa(o,n=t.target,r,s),!e)return;var a=n._uiProps&&n._uiProps.uiTransformComp,l=a?a.anchorPoint:gl,c=o._uiProps.uiTransformComp,u=Xa(n),_=c.anchorPoint,p=o.getPosition(),d=Ua,g=o.getScale(),f=0;if(e&d.LEFT){var y=-l.x*u.width;y+=r.x,y*=s.x,f=p.x-_.x*c.width*g.x-y,t.isAbsoluteLeft||(f/=u.width),f/=s.x,t.left=i(t.left,f)}if(e&d.RIGHT){var b=(1-l.x)*u.width;b+=r.x,f=(b*=s.x)-(p.x+(1-_.x)*c.width*g.x),t.isAbsoluteRight||(f/=u.width),f/=s.x,t.right=i(t.right,f)}if(e&d.TOP){var T=(1-l.y)*u.height;T+=r.y,f=(T*=s.y)-(p.y+(1-_.y)*c.height*g.y),t.isAbsoluteTop||(f/=u.height),f/=s.y,t.top=i(t.top,f)}if(e&d.BOT){var m=-l.y*u.height;m+=r.y,m*=s.y,f=p.y-_.y*c.height*g.y-m,t.isAbsoluteBottom||(f/=u.height),f/=s.y,t.bottom=i(t.bottom,f)}}},updateAlignment:function t(e){var i=e.parent;i&&et.isNode(i)&&t(i);var o=e.getComponent(yh);o&&i&&bl(e,o)},AlignMode:Ga,AlignFlags:Ua});K.on(Q.EVENT_INIT,(function(){Al.init()}));var Ll,Dl,Pl,zl,Il,xl,Rl,Bl,Hl,Nl,Ml,kl,Vl,Fl,jl,Gl,Ul,Wl,Zl,Yl,Xl,ql=function(e){return t({SafeArea:e,SafeAreaComponent:e}),e}((ml=o("cc.SafeArea"),vl=u(),Sl=_(110),Cl=p(),El=d(yh),ml(Ol=vl(Ol=Sl(Ol=r(Ol=Cl(Ol=El(Ol=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var i=e.prototype;return i.onEnable=function(){this.updateArea(),it.on("canvas-resize",this.updateArea,this)},i.onDisable=function(){it.off("canvas-resize",this.updateArea,this)},i.updateArea=function(){var t=this.node.getComponent(yh),e=this.node.getComponent(ft);if(t&&e){t.updateAlignment();var i=this.node.position.clone(),o=e.anchorPoint.clone();t.isAlignTop=t.isAlignBottom=t.isAlignLeft=t.isAlignRight=!0;var n=O.winSize.width,r=O.winSize.height,s=A.getSafeAreaRect();t.top=r-s.y-s.height,t.bottom=s.y,t.left=s.x,t.right=n-s.x-s.width,t.updateAlignment();var a=this.node.position.clone(),h=o.x-(a.x-i.x)/e.width,l=o.y-(a.y-i.y)/e.height;e.setAnchorPoint(h,l),Al.add(t)}},e}(v))||Ol)||Ol)||Ol)||Ol)||Ol)||Ol)),Kl=function(e){return t({UICoordinateTracker:e,UICoordinateTrackerComponent:e}),e}((Ll=o("cc.UICoordinateTracker"),Dl=u(),Pl=p(),zl=_(110),Il=n(et),xl=f(),Rl=n(ht),Bl=f(),Hl=f(),Nl=f(),Ml=n([q]),kl=f(),Ll(Vl=Dl(Vl=Pl(Vl=zl((Yl=function(t){function e(){for(var e,i=arguments.length,o=new Array(i),n=0;n<i;n++)o[n]=arguments[n];return e=t.call.apply(t,[this].concat(o))||this,T(e,"syncEvents",jl,m(e)),T(e,"_target",Gl,m(e)),T(e,"_camera",Ul,m(e)),T(e,"_useScale",Wl,m(e)),T(e,"_distance",Zl,m(e)),e._transformPos=new h,e._viewPos=new h,e._canMove=!0,e._lastWPos=new h,e._lastCameraPos=new h,e}s(e,t);var i=e.prototype;return i.onEnable=function(){this._checkCanMove()},i.update=function(){var t=this.node.worldPosition,e=this._camera;if(this._canMove&&e&&e.camera&&(!this._lastWPos.equals(t)||!this._lastCameraPos.equals(e.node.worldPosition))&&(this._lastWPos.set(t),this._lastCameraPos.set(e.node.worldPosition),e.camera.update(),e.convertToUINode(t,this._target,this._transformPos),this._useScale&&h.transformMat4(this._viewPos,this.node.worldPosition,e.camera.matView),this.syncEvents.length>0)){var i=this._distance/Math.abs(this._viewPos.z);q.emitEvents(this.syncEvents,this._transformPos,i)}},i._checkCanMove=function(){this._canMove=!(!this._camera||!this._target)},l(e,[{key:"target",get:function(){return this._target},set:function(t){this._target!==t&&(this._target=t,this._checkCanMove())}},{key:"camera",get:function(){return this._camera},set:function(t){this._camera!==t&&(this._camera=t,this._checkCanMove())}},{key:"useScale",get:function(){return this._useScale},set:function(t){this._useScale!==t&&(this._useScale=t)}},{key:"distance",get:function(){return this._distance},set:function(t){this._distance!==t&&(this._distance=t)}}]),e}(v),c((Fl=Yl).prototype,"target",[Il,xl],Object.getOwnPropertyDescriptor(Fl.prototype,"target"),Fl.prototype),c(Fl.prototype,"camera",[Rl,Bl],Object.getOwnPropertyDescriptor(Fl.prototype,"camera"),Fl.prototype),c(Fl.prototype,"useScale",[Hl],Object.getOwnPropertyDescriptor(Fl.prototype,"useScale"),Fl.prototype),c(Fl.prototype,"distance",[Nl],Object.getOwnPropertyDescriptor(Fl.prototype,"distance"),Fl.prototype),jl=c(Fl.prototype,"syncEvents",[Ml,S,kl],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Gl=c(Fl.prototype,"_target",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ul=c(Fl.prototype,"_camera",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wl=c(Fl.prototype,"_useScale",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Zl=c(Fl.prototype,"_distance",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Vl=Fl))||Vl)||Vl)||Vl)||Vl)),Ql=[J.TOUCH_START,J.TOUCH_END,J.TOUCH_MOVE,J.MOUSE_DOWN,J.MOUSE_MOVE,J.MOUSE_UP,J.MOUSE_ENTER,J.MOUSE_LEAVE,J.MOUSE_WHEEL];function Jl(t){t.propagationStopped=!0}var $l,tc,ec,ic,oc,nc,rc,sc,ac,hc,lc,cc,uc,_c=function(e){return t({BlockInputEvents:e,BlockInputEventsComponent:e}),e}(o("cc.BlockInputEvents")(Xl=u()(Xl=p()(Xl=function(t){function e(){return t.apply(this,arguments)||this}s(e,t);var i=e.prototype;return i.onEnable=function(){for(var t=0;t<Ql.length;t++)this.node.on(Ql[t],Jl,this)},i.onDisable=function(){for(var t=0;t<Ql.length;t++)this.node.off(Ql[t],Jl,this)},e}(v))||Xl)||Xl)||Xl),pc=t("SubContextView",($l=o("cc.SubContextView"),tc=u(),ec=_(110),ic=d(ft),oc=p(),nc=f(),rc=f(),$l(sc=tc(sc=ec(sc=ic(sc=oc((cc=function(t){function e(){var e;return e=t.call(this)||this,T(e,"_fps",hc,m(e)),e._sprite=void 0,e._imageAsset=void 0,e._updatedTime=0,e._updateInterval=0,e._openDataContext=void 0,e._content=void 0,T(e,"_designResolutionSize",lc,m(e)),e._content=new lt("content"),e._sprite=null,e._imageAsset=new Y,e._openDataContext=null,e._updatedTime=performance.now(),e}s(e,t),l(e,[{key:"designResolutionSize",get:function(){return this._designResolutionSize},set:function(){}},{key:"fps",get:function(){return this._fps},set:function(t){this._fps!==t&&(this._fps=t,this._updateInterval=1e3/t)}}]);var i=e.prototype;return i.onLoad=function(){window.__globalAdapter&&__globalAdapter.getOpenDataContext?(this._updateInterval=1e3/this._fps,this._openDataContext=__globalAdapter.getOpenDataContext(),this._initSharedCanvas(),this._initContentNode(),this._updateSubContextView()):this.enabled=!1},i.onEnable=function(){this._registerNodeEvent()},i.onDisable=function(){this._unregisterNodeEvent()},i._initSharedCanvas=function(){if(this._openDataContext){var t=this._openDataContext.canvas;t.width=this._designResolutionSize.width,t.height=this._designResolutionSize.height}},i._initContentNode=function(){if(this._openDataContext){var t=this._openDataContext.canvas,e=this._imageAsset;if(e.reset(t),e._texture.create(t.width,t.height),this._sprite=this._content.getComponent(ut),this._sprite||(this._sprite=this._content.addComponent(ut)),this._sprite.spriteFrame)this._sprite.spriteFrame.texture=this._imageAsset._texture;else{var i=new ct;i.texture=this._imageAsset._texture,this._sprite.spriteFrame=i}this._content.parent=this.node}},i._updateSubContextView=function(){if(this._openDataContext&&__globalAdapter&&__globalAdapter.getSystemInfoSync){var t=this.node.getComponent(ft),e=this._content.getComponent(ft),i=t.width/e.width,o=t.height/e.height,n=i>o?o:i;e.width*=n,e.height*=n;var r=__globalAdapter.getSystemInfoSync(),s=e.getBoundingBoxToWorld(),a=it.getVisibleSize(),h=r.screenWidth*(s.x/a.width),l=r.screenHeight*(s.y/a.height),c=r.screenWidth*(s.width/a.width),u=r.screenHeight*(s.height/a.height);this._openDataContext.postMessage({fromEngine:!0,type:"engine",event:"viewport",x:h,y:l,width:c,height:u})}},i._updateSubContextTexture=function(){var t=this._imageAsset;if(t&&this._openDataContext&&!(t.width<=0||t.height<=0)){var e=this._openDataContext.canvas;t.reset(e),(e.width>t.width||e.height>t.height)&&this._imageAsset._texture.create(e.width,e.height),this._imageAsset._texture.uploadData(e)}},i._registerNodeEvent=function(){this.node.on(et.EventType.TRANSFORM_CHANGED,this._updateSubContextView,this),this.node.on(et.EventType.SIZE_CHANGED,this._updateSubContextView,this)},i._unregisterNodeEvent=function(){this.node.off(et.EventType.TRANSFORM_CHANGED,this._updateSubContextView,this),this.node.off(et.EventType.SIZE_CHANGED,this._updateSubContextView,this)},i.update=function(t){void 0===t?this._updateSubContextTexture():performance.now()-this._updatedTime>=this._updateInterval&&(this._updatedTime+=this._updateInterval,this._updateSubContextTexture())},e}(v),c((ac=cc).prototype,"designResolutionSize",[nc],Object.getOwnPropertyDescriptor(ac.prototype,"designResolutionSize"),ac.prototype),c(ac.prototype,"fps",[rc],Object.getOwnPropertyDescriptor(ac.prototype,"fps"),ac.prototype),hc=c(ac.prototype,"_fps",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 60}}),lc=c(ac.prototype,"_designResolutionSize",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new I(640,960)}}),sc=ac))||sc)||sc)||sc)||sc)||sc));O.SubContextView=pc;var dc=t("UIReorderComponent",o("cc.UIReorderComponent")(uc=function(){U(1408,"UIReorderComponent")})||uc);O.UIReorderComponent=dc,O.ButtonComponent=ve,X.setClassAlias(ve,"cc.ButtonComponent"),O.EditBoxComponent=Mo,X.setClassAlias(Mo,"cc.EditBoxComponent"),O.LayoutComponent=yn,X.setClassAlias(yn,"cc.LayoutComponent"),O.ProgressBarComponent=Gn,X.setClassAlias(Gn,"cc.ProgressBarComponent"),O.ScrollViewComponent=Ss,X.setClassAlias(Ss,"cc.ScrollViewComponent"),O.ScrollBarComponent=Ur,X.setClassAlias(Ur,"cc.ScrollBarComponent"),O.SliderComponent=Us,X.setClassAlias(Us,"cc.SliderComponent"),O.ToggleComponent=Wa,X.setClassAlias(Wa,"cc.ToggleComponent"),O.ToggleContainerComponent=Za,X.setClassAlias(Za,"cc.ToggleContainerComponent"),O.WidgetComponent=yh,X.setClassAlias(yh,"cc.WidgetComponent"),O.PageViewComponent=pl,X.setClassAlias(pl,"cc.PageViewComponent"),O.PageViewIndicatorComponent=ul,X.setClassAlias(ul,"cc.PageViewIndicatorComponent"),O.SafeAreaComponent=ql,X.setClassAlias(ql,"cc.SafeAreaComponent"),X.setClassAlias(Kl,"cc.UICoordinateTrackerComponent"),O.BlockInputEventsComponent=_c,X.setClassAlias(_c,"cc.BlockInputEventsComponent")}}}));
