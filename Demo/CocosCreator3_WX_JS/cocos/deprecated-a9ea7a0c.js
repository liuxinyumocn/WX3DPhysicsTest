System.register(["./coordinates-converts-utils-bf8713a9.js","./event-enum-5a5aa40e.js","./view-7d20208a.js","./screen-d46ce30a.js","./camera-component-f1234106.js","./renderable-2d-386fc016.js"],(function(e){"use strict";var t,n,o,r,a,i,s,c,m,p,u,h,C,l,_,f,d,g,v,y,b,R,S,w,D,A,z,O,E,N,P;return{setters:[function(e){t=e.e2,n=e.fR,o=e.fr,r=e.e3,a=e.l,i=e.fw,s=e.ft,c=e.fS,m=e.d_,p=e.b2,u=e.bD,h=e.ec,C=e.e4,l=e.e7,_=e.e8,f=e.e5,d=e.fs,g=e.fu,v=e.ea,y=e.bM,b=e.bL,R=e.bg,S=e.eD},function(e){w=e.q},function(e){D=e.j,A=e.g,z=e.v},function(){},function(e){O=e.C},function(e){E=e.U,N=e.a,P=e.R}],execute:function(){var T,W,j,x,G,M,F,U,I,L,V,H,Y,k,B,q=e("R",t("cc.RenderRoot2D")(T=i(100)(T=s()(T=c(E)(T=n(T=o(T=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.onEnable=function(){a.director.root.batcher2D.addScreen(this)},n.onDisable=function(){a.director.root.batcher2D.removeScreen(this)},n.onDestroy=function(){a.director.root.batcher2D.removeScreen(this)},t}(m))||T)||T)||T)||T)||T)||T),K=new p,J=u({OVERLAY:0,INTERSPERSE:1}),Q=e("C",(W=t("cc.Canvas"),j=d(),x=i(100),G=s(),M=h(O),F=g(),U=g(),I=h(O),W(L=j(L=x(L=G(L=o(L=n((k=function(e){function t(){var t;return t=e.call(this)||this,l(t,"_cameraComponent",H,_(t)),l(t,"_alignCanvasWithScreen",Y,_(t)),t._thisOnCameraResized=void 0,t._fitDesignResolution=void 0,t._pos=new p,t._renderMode=J.OVERLAY,t._thisOnCameraResized=t._onResizeCamera.bind(_(t)),t}r(t,e),C(t,[{key:"renderMode",get:function(){return this._renderMode},set:function(e){this._renderMode=e,this._cameraComponent&&(this._cameraComponent.priority=this._getViewPriority())}},{key:"cameraComponent",get:function(){return this._cameraComponent},set:function(e){this._cameraComponent!==e&&(this._cameraComponent=e,this._onResizeCamera())}},{key:"alignCanvasWithScreen",get:function(){return this._alignCanvasWithScreen},set:function(e){this._alignCanvasWithScreen=e,this._onResizeCamera()}}]);var n=t.prototype;return n.__preload=function(){var e=this.getComponent("cc.Widget");e&&e.updateAlignment(),this._cameraComponent&&this._cameraComponent._createCamera(),this._onResizeCamera(),this.node.on(w.TRANSFORM_CHANGED,this._thisOnCameraResized)},n.onDestroy=function(){e.prototype.onDestroy.call(this),this.node.off(w.TRANSFORM_CHANGED,this._thisOnCameraResized)},n._onResizeCamera=function(){if(this._cameraComponent&&this._alignCanvasWithScreen){if(this._cameraComponent.targetTexture){var e=this._cameraComponent.targetTexture.window;this._cameraComponent.camera&&this._cameraComponent.camera.setFixedSize(e.width,e.height),this._cameraComponent.orthoHeight=D.height/2}else if(A.canvas){var t=A.canvas;this._cameraComponent.camera&&this._cameraComponent.camera.resize(t.width,t.height),this._cameraComponent.orthoHeight=A.canvas.height/z.getScaleY()/2}this.node.getWorldPosition(K),this._cameraComponent.node.setWorldPosition(K.x,K.y,1e3)}},n._getViewPriority=function(){if(this._cameraComponent){var e,t=null===(e=this.cameraComponent)||void 0===e?void 0:e.priority;return this._renderMode===J.OVERLAY?t|1<<30:t&~(1<<30)}return 0},t}(q),f((V=k).prototype,"cameraComponent",[M,F],Object.getOwnPropertyDescriptor(V.prototype,"cameraComponent"),V.prototype),f(V.prototype,"alignCanvasWithScreen",[U],Object.getOwnPropertyDescriptor(V.prototype,"alignCanvasWithScreen"),V.prototype),H=f(V.prototype,"_cameraComponent",[I],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=f(V.prototype,"_alignCanvasWithScreen",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),L=V))||L)||L)||L)||L)||L)||L));a.Canvas=Q;var X=e("U",t("cc.UIComponent")(B=c(E)(B=i(110)(B=n(B=o(B=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(t=e.call.apply(e,[this].concat(o))||this)._lastParent=null,t.stencilStage=N.DISABLED,t}r(t,e);var n=t.prototype;return n.__preload=function(){this.node._uiProps.uiComp=this},n.onEnable=function(){},n.onDisable=function(){},n.onDestroy=function(){this.node._uiProps.uiComp===this&&(this.node._uiProps.uiComp=null)},n.updateAssembler=function(){},n.postUpdateAssembler=function(){},t}(m))||B)||B)||B)||B)||B);y(X.prototype,"UIComponent",[{name:"_visibility"},{name:"setVisibility"}]),b(Q.prototype,"Canvas.prototype",[{name:"camera",newName:"cameraComponent.camera",customGetter:function(){return this._cameraComponent.camera}},{name:"clearFlag",newName:"cameraComponent.clearFlags",customGetter:function(){return this._cameraComponent?this._cameraComponent.clearFlags:0},customSetter:function(e){this._cameraComponent&&(this._cameraComponent.clearFlags=e)}},{name:"color",newName:"cameraComponent.clearColor",customGetter:function(){return this._cameraComponent?this._cameraComponent.clearColor:R.BLACK},customSetter:function(e){this._cameraComponent&&(this._cameraComponent.clearColor=e)}},{name:"priority",newName:"cameraComponent.priority",customGetter:function(){return this._cameraComponent?this._cameraComponent.priority:0},customSetter:function(e){this._cameraComponent&&(this._cameraComponent.priority=e)}},{name:"targetTexture",newName:"cameraComponent.targetTexture",customGetter:function(){return this._cameraComponent?this._cameraComponent.targetTexture:null},customSetter:function(e){this._cameraComponent&&(this._cameraComponent.targetTexture=e)}},{name:"visibility",newName:"cameraComponent.visibility",customGetter:function(){return this._cameraComponent?this._cameraComponent.visibility:0}}]),a.UITransformComponent=E,S.setClassAlias(E,"cc.UITransformComponent"),S.setClassAlias(P,"cc.RenderComponent"),a.CanvasComponent=Q,S.setClassAlias(Q,"cc.CanvasComponent")}}}));
