System.register(["./coordinates-converts-utils-bf8713a9.js","./index-6f89fc06.js","./event-enum-5a5aa40e.js","./json-asset-0797cbb7.js","./sprite-frame-30c057cb.js","./renderable-2d-386fc016.js"],(function(t){"use strict";var e,i,r,n,a,o,s,l,h,u,f,p,c,_,y,d,g,m,D,b,v,F,A,w,x,T,S,R,O,z,E,M,I,C,L,k,P,H,U,j,N;return{setters:[function(t){e=t.e2,i=t.e3,r=t.ez,n=t.e5,a=t.l,o=t.e7,s=t.e8,l=t.c5,h=t.ea,u=t.e9,f=t.e4,p=t.e6,c=t.fP,_=t.i,y=t.ec,d=t.w,g=t.eM,m=t.fq,D=t.cl,b=t.bg,v=t.eP,F=t.dh,A=t.c8,w=t.c7,x=t.bE,T=t.fQ,S=t.fs,R=t.fw,O=t.ft,z=t.eb,E=t.fu,M=t.fm,I=t.e1,C=t.fn,L=t.bl,k=t.b0},function(t){P=t.f,H=t.D},function(){},function(){},function(t){U=t.S},function(t){j=t.R,N=t.I}],execute:function(){var B,G,W,Y;t({H:void 0,O:void 0,V:void 0,b:void 0,e:function(t){var e=t.charCodeAt(0);return e>=9&&e<=13||32===e||133===e||160===e||5760===e||e>=8192&&e<=8202||8232===e||8233===e||8239===e||8287===e||12288===e},f:function(t,e,i,r){var n=[];if(0===t.length||i<0)return n.push(""),n;for(var a=t;e>i&&a.length>1;){for(var o=a.length*(i/e)|0,s=xt(a,o),l=e-r(s),h=s,u=0,f=0;l>i&&f++<10;)o*=i/l,l=e-r(s=xt(a,o|=0));for(f=0;l<=i&&f++<10;){if(s){var p=Dt.exec(s);u=p?p[0].length:1,h=s}l=e-r(s=xt(a,o+=u))}0==(o-=u)?(o=1,h=xt(a,1)):1===o&&a[0]>="\ud800"&&a[0]<="\udbff"&&(o=2,h=xt(a,2));var c=xt(a,0,o),_=void 0;bt.test(h||s)&&(0==(o-=(_=vt.exec(c))?_[0].length:0)&&(o=1),h=xt(a,o),c=xt(a,0,o)),At.test(h)&&(_=Ft.exec(c))&&c!==_[0]&&(h=xt(a,o-=_[0].length),c=xt(a,0,o)),(0===n.length||(c=c.trim()).length>0)&&n.push(c),e=r(a=h||s)}return(0===n.length||(a=a.trim()).length>0)&&n.push(a),n},g:function(){return 0},i:function(t){return/^[\u4E00-\u9FFF\u3400-\u4DFF]+$/.test(t)||/[\u3000-\u303F]|[\u3040-\u309F]|[\u30A0-\u30FF]|[\uFF00-\uFFEF]|[\u4E00-\u9FAF]|[\u2605-\u2606]|[\u2190-\u2195]|\u203B/g.test(t)||/^[\u1100-\u11FF]|[\u3130-\u318F]|[\uA960-\uA97F]|[\uAC00-\uD7AF]|[\uD7B0-\uD7FF]+$/.test(t)},k:function(t){var e=t.color.toHEX(),i="";return t.isOutlined&&t.margin>0&&(i=i+t.margin+t.out.toHEX()),""+t.fontSize+t.fontFamily+e+i},s:wt});var X,V=t("S",e("cc.SpriteAtlas")((Y=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,o(e,"spriteFrames",W,s(e)),e}i(e,t);var n=e.prototype;return n.getTexture=function(){var t=Object.keys(this.spriteFrames);if(t.length>0){var e=this.spriteFrames[t[0]];return e&&e.texture}return null},n.getSpriteFrame=function(t){var e=this.spriteFrames[t];return e?(e.name||(e.name=t),e):null},n.getSpriteFrames=function(){for(var t=[],e=this.spriteFrames,i=0,r=Object.keys(e);i<r.length;i++){var n=r[i];t.push(e[n])}return t},n._serialize=function(){},n._deserialize=function(t,e){var i=t;this._name=i.name;var n=i.spriteFrames;this.spriteFrames=r();for(var a=0;a<n.length;a+=2)e.result.push(this.spriteFrames,n[a],n[a+1])},e}(l),W=n((G=Y).prototype,"spriteFrames",[h,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return r()}}),B=G))||B);a.SpriteAtlas=V;var Z,$,K,q,J=t("F",e("cc.Font")(X=function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e}(l))||X);a.Font=J;var Q,tt,et,it,rt,nt,at,ot,st,lt=t("T",e("cc.TTFFont")((q=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,o(e,"_fontFamily",K,s(e)),e}return i(e,t),f(e,[{key:"_nativeAsset",get:function(){return this._fontFamily},set:function(t){this._fontFamily=t||"Arial"}},{key:"_nativeDep",get:function(){return{uuid:this._uuid,__nativeName__:this._native,ext:_(this._native),__isNative__:!0}}}]),e}(J),K=n(($=q).prototype,"_fontFamily",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),n($.prototype,"_nativeAsset",[p,c],Object.getOwnPropertyDescriptor($.prototype,"_nativeAsset"),$.prototype),n($.prototype,"_nativeDep",[p],Object.getOwnPropertyDescriptor($.prototype,"_nativeDep"),$.prototype),Z=$))||Z);a.TTFFont=lt;var ht,ut=function(){this.u=0,this.v=0,this.w=0,this.h=0,this.offsetX=0,this.offsetY=0,this.textureID=0,this.valid=!1,this.xAdvance=0},ft=function(){function t(t){this.letterDefinitions={},this.texture=t}var e=t.prototype;return e.addLetterDefinitions=function(t,e){this.letterDefinitions[t]=e},e.cloneLetterDefinition=function(){for(var t={},e=0,i=Object.keys(this.letterDefinitions);e<i.length;e++){var r=i[e],n=new ut;g(n,this.letterDefinitions[r]),t[r]=n}return t},e.getTexture=function(){return this.texture},e.getLetter=function(t){return this.letterDefinitions[t]},e.getLetterDefinitionForChar=function(t){var e=t.charCodeAt(0);return this.letterDefinitions.hasOwnProperty(e)?this.letterDefinitions[e]:null},e.clear=function(){this.letterDefinitions={}},t}(),pt=t("B",(Q=e("cc.BitmapFont"),tt=y(U),Q((st=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,o(e,"fntDataStr",rt,s(e)),o(e,"spriteFrame",nt,s(e)),o(e,"fontSize",at,s(e)),o(e,"fntConfig",ot,s(e)),e}return i(e,t),e.prototype.onLoaded=function(){var t=this.spriteFrame;!this.fontDefDictionary&&t&&(this.fontDefDictionary=new ft(t.texture));var e=this.fntConfig;if(e){var i=e.fontDefDictionary;for(var r in i){var n=new ut,a=i[r].rect;n.offsetX=i[r].xOffset,n.offsetY=i[r].yOffset,n.w=a.width,n.h=a.height,n.u=a.x,n.v=a.y,n.textureID=0,n.valid=!0,n.xAdvance=i[r].xAdvance,this.fontDefDictionary.addLetterDefinitions(r,n)}}else d("The fnt config is not exists!")},e}(J),rt=n((it=st).prototype,"fntDataStr",[h,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),nt=n(it.prototype,"spriteFrame",[tt],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),at=n(it.prototype,"fontSize",[h,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return-1}}),ot=n(it.prototype,"fntConfig",[h,u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),et=it))||et));a.BitmapFont=pt;var ct=t("L",e("cc.LabelAtlas")(ht=function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e}(pt))||ht);a.LabelAtlas=ct;var _t=t("d",.26),yt=t("M",(_t+1)/2-_t);var dt=new m(2);dt.get=function(){return this._get()||{key:"",value:0,prev:null,next:null}};var gt,mt=new(function(){function t(t){this.count=0,this.limit=0,this.datas={},this.limit=t}var e=t.prototype;return e.moveToHead=function(t){t.next=this.head,t.prev=null,this.head&&(this.head.prev=t),this.head=t,this.tail||(this.tail=t),this.count++,this.datas[t.key]=t},e.put=function(t,e){var i=dt.get();if(i.key=t,i.value=e,this.count>=this.limit){var r=this.tail;delete this.datas[r.key],this.count--,this.tail=r.prev,this.tail.next=null,r.prev=null,r.next=null,dt.put(r)}this.moveToHead(i)},e.remove=function(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev,delete this.datas[t.key],this.count--},e.get=function(t){var e=this.datas[t];return e?(this.remove(e),this.moveToHead(e),e.value):null},e.clear=function(){this.count=0,this.datas={},this.head=null,this.tail=null},e.has=function(t){return!!this.datas[t]},e.delete=function(t){var e=this.datas[t];this.remove(e)},t}())(100),Dt=/([a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûа-яА-ЯЁё]+|\S)/,bt=/^[!,.:;'}\]%\?>、‘“》？。，！]/,vt=/([a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûаíìÍÌïÁÀáàÉÈÒÓòóŐőÙÚŰúűñÑæÆœŒÃÂãÔõěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤżźśóńłęćąŻŹŚÓŃŁĘĆĄ-яА-ЯЁё]+|\S)$/,Ft=/[a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûаíìÍÌïÁÀáàÉÈÒÓòóŐőÙÚŰúűñÑæÆœŒÃÂãÔõěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤżźśóńłęćąŻŹŚÓŃŁĘĆĄ-яА-ЯЁё]+$/,At=/^[a-zA-Z0-9ÄÖÜäöüßéèçàùêâîôûаíìÍÌïÁÀáàÉÈÒÓòóŐőÙÚŰúűñÑæÆœŒÃÂãÔõěščřžýáíéóúůťďňĚŠČŘŽÁÍÉÓÚŤżźśóńłęćąŻŹŚÓŃŁĘĆĄ-яА-ЯЁё]/;function wt(t,e,i){var r=(i||t.font)+"🎮"+e,n=mt.get(r);if(null!==n)return n;var a=t.measureText(e),o=a&&a.width||0;return mt.put(r,o),o}function xt(t,e,i){var r=e,n=i,a=t[e];if(a>="\udc00"&&a<="\udfff"&&r--,void 0!==i)if(i-1!==e){var o=t[i-1];o>="\ud800"&&o<="\udbff"&&n--}else a>="\ud800"&&a<="\udbff"&&n++;return t.substring(r,n)}var Tt,St,Rt,Ot,zt,Et,Mt,It,Ct,Lt,kt,Pt,Ht,Ut,jt,Nt,Bt,Gt,Wt,Yt,Xt,Vt,Zt,$t,Kt,qt,Jt,Qt,te,ee,ie,re,ne,ae,oe,se,le,he,ue,fe,pe,ce,_e,ye,de,ge,me,De,be,ve,Fe,Ae,we,xe,Te,Se,Re,Oe,ze,Ee,Me,Ie,Ce,Le,ke,Pe,He,Ue,je,Ne,Be,Ge,We,Ye,Xe,Ve,Ze,$e,Ke,qe,Je,Qe,ti,ei,ii,ri,ni,ai,oi,si,li,hi,ui,fi,pi,ci,_i,yi,di,gi,mi,Di,bi,vi,Fi,Ai,wi,xi=t("C",function(){function t(){this.pool=[]}t.getInstance=function(){return gt||(gt=new t),gt};var e=t.prototype;return e.get=function(){var t=this.pool.pop();if(!t){var e=document.createElement("canvas"),i=e.getContext("2d");t={canvas:e,context:i}}return t},e.put=function(t){this.pool.length>=D.MAX_LABEL_CANVAS_POOL_SIZE||this.pool.push(t)},t}()),Ti=b.WHITE.clone(),Si=function(){this.u=0,this.v=0,this.w=0,this.h=0,this.texture=null,this.offsetX=0,this.offsetY=0,this.valid=!1,this.xAdvance=0},Ri="rgba(255, 255, 255, "+(1/255).toFixed(3)+")",Oi=function(){function t(t,e){this.image=null,this.labelInfo=void 0,this.char=void 0,this.data=null,this.canvas=null,this.context=null,this.width=0,this.height=0,this.offsetY=0,this.hash=void 0,this.char=t,this.labelInfo=e,this.hash=t.charCodeAt(0)+e.hash}var e=t.prototype;return e.updateRenderData=function(){this._updateProperties(),this._updateTexture()},e.destroy=function(){this.image=null},e._updateProperties=function(){if(this.data=xi.getInstance().get(),this.canvas=this.data.canvas,this.context=this.data.context,this.context){this.context.font=this.labelInfo.fontDesc;var t=wt(this.context,this.char,this.labelInfo.fontDesc),e=2*this.labelInfo.margin+2;this.width=parseFloat(t.toFixed(2))+e,this.height=(1+_t)*this.labelInfo.fontSize+e,this.offsetY=-this.labelInfo.fontSize*_t/2}this.canvas.width!==this.width&&(this.canvas.width=this.width),this.canvas.height!==this.height&&(this.canvas.height=this.height),this.image||(this.image=new w),this.image.reset(this.canvas)},e._updateTexture=function(){if(this.context&&this.canvas){var t=this.context,e=this.labelInfo,i=this.canvas.width,r=this.canvas.height;t.textAlign="center",t.textBaseline="alphabetic",t.clearRect(0,0,i,r),t.fillStyle=Ri,t.fillRect(0,0,i,r),t.font=e.fontDesc;var n=e.fontSize,a=i/2,o=r/2+n*yt+0*n,s=e.color;if(t.lineJoin="round",t.fillStyle="rgba("+s.r+", "+s.g+", "+s.b+", 1)",e.isOutlined){var l=e.out||Ti;t.strokeStyle="rgba("+l.r+", "+l.g+", "+l.b+", "+l.a/255+")",t.lineWidth=2*e.margin,t.strokeText(this.char,a,o)}t.fillText(this.char,a,o)}},t}(),zi=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var r=e.prototype;return r.initWithSize=function(t,e,i){void 0===i&&(i=v.RGBA8888),this.reset({width:t,height:e,format:i}),this.loaded=!0,this.emit("load")},r.drawTextureAt=function(t,e,i){var r=this.getGFXTexture();if(t&&r){var n=this._getGFXDevice();if(n){var a=new F;a.texOffset.x=e,a.texOffset.y=i,a.texExtent.width=t.width,a.texExtent.height=t.height,n.copyTexImagesToTexture([t.data],r,[a])}else console.warn("Unable to get device")}},e}(A);t("j",function(){function t(t,e){this._x=0,this._y=0,this._nextY=0,this._width=0,this._height=0,this._halfBleed=0,this._dirty=!1;var i=new zi;i.initWithSize(t,e),this.fontDefDictionary=new ft(i),this._halfBleed=1,this._width=t,this._height=e,P.on(H.EVENT_BEFORE_SCENE_LAUNCH,this.beforeSceneLoad,this)}f(t,[{key:"width",get:function(){return this._width}},{key:"height",get:function(){return this._height}}]);var e=t.prototype;return e.insertLetterTexture=function(t){var e=t.image,i=P.root.device;if(!e||!this.fontDefDictionary||!i)return null;var r=e.width,n=e.height;if(this._x+r+0>this._width&&(this._x=0,this._y=this._nextY),this._y+n>this._nextY&&(this._nextY=this._y+n+0),this._nextY>this._height)return null;this.fontDefDictionary.texture.drawTextureAt(e,this._x,this._y),this._dirty=!0;var a=new Si;return a.u=this._x+this._halfBleed,a.v=this._y+this._halfBleed,a.texture=this.fontDefDictionary.texture,a.valid=!0,a.w=t.width-2,a.h=t.height-2,a.xAdvance=a.w,a.offsetY=t.offsetY,this._x+=r+0,this.fontDefDictionary.addLetterDefinitions(t.hash,a),a},e.update=function(){this._dirty&&(this._dirty=!1)},e.reset=function(){this._x=0,this._y=0,this._nextY=0,this.fontDefDictionary.clear()},e.destroy=function(){this.reset(),this.fontDefDictionary&&(this.fontDefDictionary.texture.destroy(),this.fontDefDictionary.texture=null)},e.getTexture=function(){return this.fontDefDictionary.getTexture()},e.beforeSceneLoad=function(){this.clearAllCache()},e.clearAllCache=function(){this.destroy();var t=new zi;t.initWithSize(this._width,this._height),this.fontDefDictionary.texture=t},e.getLetter=function(t){return this.fontDefDictionary.letterDefinitions[t]},e.getLetterDefinitionForChar=function(t,e){var i=t.charCodeAt(0)+e.hash,r=this.fontDefDictionary.letterDefinitions[i];if(!r){var n=new Oi(t,e);n.updateRenderData(),r=this.insertLetterTexture(n),n.destroy()}return r},t}()),t("h",{fontAtlas:null,fontSize:0,lineHeight:0,hAlign:0,vAlign:0,hash:"",fontFamily:"",fontDesc:"Arial",color:b.WHITE.clone(),isOutlined:!1,out:b.WHITE.clone(),margin:0}),function(t){t[t.LEFT=0]="LEFT",t[t.CENTER=1]="CENTER",t[t.RIGHT=2]="RIGHT"}(Me||(Me=t("H",{}))),x(Me),function(t){t[t.TOP=0]="TOP",t[t.CENTER=1]="CENTER",t[t.BOTTOM=2]="BOTTOM"}(Ie||(Ie=t("V",{}))),x(Ie),function(t){t[t.NONE=0]="NONE",t[t.CLAMP=1]="CLAMP",t[t.SHRINK=2]="SHRINK",t[t.RESIZE_HEIGHT=3]="RESIZE_HEIGHT"}(Ce||(Ce=t("O",{}))),x(Ce),function(t){t[t.NONE=0]="NONE",t[t.BITMAP=1]="BITMAP",t[t.CHAR=2]="CHAR"}(Le||(Le=t("b",{}))),x(Le),t("c",(Tt=e("cc.Label"),St=S(),Rt=R(110),Ot=O(),zt=z(),Et=E(),Mt=y(Me),It=z(),Ct=E(),Lt=y(Ie),kt=z(),Pt=E(),Ht=z(),Ut=E(),jt=z(),Nt=M(),Bt=E(),Gt=z(),Wt=E(),Yt=y(Ce),Xt=z(),Vt=E(),Zt=z(),$t=E(),Kt=y(J),qt=z(),Jt=M(),Qt=E(),te=z(),ee=E(),ie=y(Le),re=z(),ne=E(),ae=z(),oe=E(),se=z(),le=E(),he=z(),ue=E(),fe=M(),Tt(pe=St(pe=Rt(pe=Ot((Ee=ze=function(t){function e(){var e;return e=t.call(this)||this,o(e,"_string",_e,s(e)),o(e,"_horizontalAlign",ye,s(e)),o(e,"_verticalAlign",de,s(e)),o(e,"_actualFontSize",ge,s(e)),o(e,"_fontSize",me,s(e)),o(e,"_fontFamily",De,s(e)),o(e,"_lineHeight",be,s(e)),o(e,"_overflow",ve,s(e)),o(e,"_enableWrapText",Fe,s(e)),o(e,"_font",Ae,s(e)),o(e,"_isSystemFontUsed",we,s(e)),e._spacingX=0,o(e,"_isItalic",xe,s(e)),o(e,"_isBold",Te,s(e)),o(e,"_isUnderline",Se,s(e)),o(e,"_underlineHeight",Re,s(e)),o(e,"_cacheMode",Oe,s(e)),e._N$file=null,e._texture=null,e._ttfSpriteFrame=null,e._userDefinedFont=null,e._assemblerData=null,e._fontAtlas=null,e._letterTexture=null,e._ttfSpriteFrame=null,e}i(e,t),f(e,[{key:"string",get:function(){return this._string},set:function(t){t+="",this._string!==t&&(this._string=t,this.updateRenderData())}},{key:"horizontalAlign",get:function(){return this._horizontalAlign},set:function(t){this._horizontalAlign!==t&&(this._horizontalAlign=t,this.updateRenderData())}},{key:"verticalAlign",get:function(){return this._verticalAlign},set:function(t){this._verticalAlign!==t&&(this._verticalAlign=t,this.updateRenderData())}},{key:"actualFontSize",get:function(){return this._actualFontSize},set:function(t){this._actualFontSize=t}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.updateRenderData())}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this._fontFamily!==t&&(this._fontFamily=t,this.updateRenderData())}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.updateRenderData())}},{key:"overflow",get:function(){return this._overflow},set:function(t){this._overflow!==t&&(this._overflow=t,this.updateRenderData())}},{key:"enableWrapText",get:function(){return this._enableWrapText},set:function(t){this._enableWrapText!==t&&(this._enableWrapText=t,this.updateRenderData())}},{key:"font",get:function(){return this._font},set:function(t){this._font!==t&&(this._isSystemFontUsed=!t,this._font=t,this._renderData&&(this.destroyRenderData(),this._renderData=null),this._fontAtlas=null,this.updateRenderData(!0))}},{key:"useSystemFont",get:function(){return this._isSystemFontUsed},set:function(t){this._isSystemFontUsed!==t&&(this.destroyRenderData(),this._renderData=null,this._isSystemFontUsed=!!t,t&&(this.font=null),this._flushAssembler(),this.updateRenderData())}},{key:"cacheMode",get:function(){return this._cacheMode},set:function(t){this._cacheMode!==t&&(this._cacheMode!==Le.BITMAP||this._font instanceof pt||!this._ttfSpriteFrame||this._ttfSpriteFrame._resetDynamicAtlasFrame(),this._cacheMode===Le.CHAR&&(this._ttfSpriteFrame=null),this._cacheMode=t,this.updateRenderData(!0))}},{key:"spriteFrame",get:function(){return this._texture}},{key:"ttfSpriteFrame",get:function(){return this._ttfSpriteFrame}},{key:"isBold",get:function(){return this._isBold},set:function(t){this._isBold!==t&&(this._isBold=t,this.updateRenderData())}},{key:"isItalic",get:function(){return this._isItalic},set:function(t){this._isItalic!==t&&(this._isItalic=t,this.updateRenderData())}},{key:"isUnderline",get:function(){return this._isUnderline},set:function(t){this._isUnderline!==t&&(this._isUnderline=t,this.updateRenderData())}},{key:"underlineHeight",get:function(){return this._underlineHeight},set:function(t){this._underlineHeight!==t&&(this._underlineHeight=t,this.updateRenderData())}},{key:"assemblerData",get:function(){return this._assemblerData}},{key:"fontAtlas",get:function(){return this._fontAtlas},set:function(t){this._fontAtlas=t}},{key:"spacingX",get:function(){return this._spacingX},set:function(t){this._spacingX!==t&&(this._spacingX=t,this.updateRenderData())}},{key:"_bmFontOriginalSize",get:function(){return this._font instanceof pt?this._font.fontSize:-1}}]);var r=e.prototype;return r.onEnable=function(){t.prototype.onEnable.call(this),this._font||this._isSystemFontUsed||(this.useSystemFont=!0),this._isSystemFontUsed&&!this._fontFamily&&(this.fontFamily="Arial"),this.updateRenderData(!0)},r.onDisable=function(){t.prototype.onDisable.call(this)},r.onDestroy=function(){if(this._assembler&&this._assembler.resetAssemblerData&&this._assembler.resetAssemblerData(this._assemblerData),this._assemblerData=null,this._ttfSpriteFrame){var e=this._ttfSpriteFrame.texture;if(e&&null===this._ttfSpriteFrame.original){var i=e;i.image&&i.image.destroy(),e.destroy()}this._ttfSpriteFrame=null}this._letterTexture=null,t.prototype.onDestroy.call(this)},r.updateRenderData=function(t){void 0===t&&(t=!1),this.markForUpdateRenderData(),t&&(this._flushAssembler(),this._applyFontTexture())},r._render=function(t){t.commitComp(this,this._texture,this._assembler,null)},r._updateColor=function(){this._font instanceof pt?t.prototype._updateColor.call(this):this.updateRenderData(!1)},r._canRender=function(){if(!t.prototype._canRender.call(this)||!this._string)return!1;var e=this._font;if(e&&e instanceof pt){var i=e.spriteFrame;if(!i||!i.textureLoaded())return!1}return!0},r._flushAssembler=function(){var t=e.Assembler.getAssembler(this);this._assembler!==t&&(this.destroyRenderData(),this._assembler=t),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this.material)},r._applyFontTexture=function(){var t=this,e=this._font;if(e instanceof pt){var i=e.spriteFrame,r=function(){t._texture=i,t._assembler&&t._assembler.updateRenderData(t)};i&&(i.loaded||i.textureLoaded?r():i.once("load",r,this))}else{if(this.cacheMode===Le.CHAR)this._letterTexture=this._assembler.getAssemblerData(),this._texture=this._letterTexture;else if(!this._ttfSpriteFrame){this._ttfSpriteFrame=new U,this._assemblerData=this._assembler.getAssemblerData();var n=new w(this._assemblerData.canvas)._texture;this._ttfSpriteFrame.texture=n}this.cacheMode!==Le.CHAR&&(this._texture=this._ttfSpriteFrame)}},e}(j),ze.HorizontalAlign=Me,ze.VerticalAlign=Ie,ze.Overflow=Ce,ze.CacheMode=Le,ze._canvasPool=xi.getInstance(),n((ce=Ee).prototype,"string",[zt,Et,T],Object.getOwnPropertyDescriptor(ce.prototype,"string"),ce.prototype),n(ce.prototype,"horizontalAlign",[Mt,It,Ct],Object.getOwnPropertyDescriptor(ce.prototype,"horizontalAlign"),ce.prototype),n(ce.prototype,"verticalAlign",[Lt,kt,Pt],Object.getOwnPropertyDescriptor(ce.prototype,"verticalAlign"),ce.prototype),n(ce.prototype,"fontSize",[Ht,Ut],Object.getOwnPropertyDescriptor(ce.prototype,"fontSize"),ce.prototype),n(ce.prototype,"fontFamily",[jt,Nt,Bt],Object.getOwnPropertyDescriptor(ce.prototype,"fontFamily"),ce.prototype),n(ce.prototype,"lineHeight",[Gt,Wt],Object.getOwnPropertyDescriptor(ce.prototype,"lineHeight"),ce.prototype),n(ce.prototype,"overflow",[Yt,Xt,Vt],Object.getOwnPropertyDescriptor(ce.prototype,"overflow"),ce.prototype),n(ce.prototype,"enableWrapText",[Zt,$t],Object.getOwnPropertyDescriptor(ce.prototype,"enableWrapText"),ce.prototype),n(ce.prototype,"font",[Kt,qt,Jt,Qt],Object.getOwnPropertyDescriptor(ce.prototype,"font"),ce.prototype),n(ce.prototype,"useSystemFont",[te,ee],Object.getOwnPropertyDescriptor(ce.prototype,"useSystemFont"),ce.prototype),n(ce.prototype,"cacheMode",[ie,re,ne],Object.getOwnPropertyDescriptor(ce.prototype,"cacheMode"),ce.prototype),n(ce.prototype,"isBold",[ae,oe],Object.getOwnPropertyDescriptor(ce.prototype,"isBold"),ce.prototype),n(ce.prototype,"isItalic",[se,le],Object.getOwnPropertyDescriptor(ce.prototype,"isItalic"),ce.prototype),n(ce.prototype,"isUnderline",[he,ue],Object.getOwnPropertyDescriptor(ce.prototype,"isUnderline"),ce.prototype),n(ce.prototype,"underlineHeight",[fe,u],Object.getOwnPropertyDescriptor(ce.prototype,"underlineHeight"),ce.prototype),_e=n(ce.prototype,"_string",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"label"}}),ye=n(ce.prototype,"_horizontalAlign",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Me.CENTER}}),de=n(ce.prototype,"_verticalAlign",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ie.CENTER}}),ge=n(ce.prototype,"_actualFontSize",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),me=n(ce.prototype,"_fontSize",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),De=n(ce.prototype,"_fontFamily",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"Arial"}}),be=n(ce.prototype,"_lineHeight",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 40}}),ve=n(ce.prototype,"_overflow",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ce.NONE}}),Fe=n(ce.prototype,"_enableWrapText",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ae=n(ce.prototype,"_font",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),we=n(ce.prototype,"_isSystemFontUsed",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),xe=n(ce.prototype,"_isItalic",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Te=n(ce.prototype,"_isBold",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Se=n(ce.prototype,"_isUnderline",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Re=n(ce.prototype,"_underlineHeight",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),Oe=n(ce.prototype,"_cacheMode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Le.NONE}}),pe=ce))||pe)||pe)||pe)||pe)),function(t){t[t.SIMPLE=0]="SIMPLE",t[t.SLICED=1]="SLICED",t[t.TILED=2]="TILED",t[t.FILLED=3]="FILLED"}(vi||(vi={})),x(vi),function(t){t[t.HORIZONTAL=0]="HORIZONTAL",t[t.VERTICAL=1]="VERTICAL",t[t.RADIAL=2]="RADIAL"}(Fi||(Fi={})),x(Fi),function(t){t[t.CUSTOM=0]="CUSTOM",t[t.TRIMMED=1]="TRIMMED",t[t.RAW=2]="RAW"}(Ai||(Ai={})),x(Ai),function(t){t.SPRITE_FRAME_CHANGED="spriteframe-changed"}(wi||(wi={})),t("a",(ke=e("cc.Sprite"),Pe=S(),He=R(110),Ue=O(),je=y(V),Ne=z(),Be=E(),Ge=y(U),We=z(),Ye=E(),Xe=y(vi),Ve=z(),Ze=E(),$e=y(Fi),Ke=E(),qe=E(),Je=C(),Qe=E(),ti=C(),ei=E(),ii=z(),ri=E(),ni=y(Ai),ai=z(),oi=E(),ke(si=Pe(si=He(si=Ue((bi=Di=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];return e=t.call.apply(t,[this].concat(r))||this,o(e,"_spriteFrame",hi,s(e)),o(e,"_type",ui,s(e)),o(e,"_fillType",fi,s(e)),o(e,"_sizeMode",pi,s(e)),o(e,"_fillCenter",ci,s(e)),o(e,"_fillStart",_i,s(e)),o(e,"_fillRange",yi,s(e)),o(e,"_isTrimmedMode",di,s(e)),o(e,"_useGrayscale",gi,s(e)),o(e,"_atlas",mi,s(e)),e}i(e,t);var r=e.prototype;return r.__preload=function(){this.changeMaterialForDefine(),t.prototype.__preload.call(this),this._spriteFrame&&(this._spriteFrame.on("load",this._markForUpdateUvDirty,this),this._markForUpdateUvDirty())},r.onEnable=function(){t.prototype.onEnable.call(this),this._activateMaterial()},r.onDestroy=function(){this.destroyRenderData(),this._spriteFrame&&this._spriteFrame.off("load"),t.prototype.onDestroy.call(this)},r.changeSpriteFrameFromAtlas=function(t){if(this._atlas){var e=this._atlas.getSpriteFrame(t);this.spriteFrame=e}else console.warn("SpriteAtlas is null.")},r.changeMaterialForDefine=function(){var t;this._spriteFrame&&(t=this._spriteFrame.texture);var e=!1;if(t instanceof I){var i=t.getPixelFormat();e=i===v.RGBA_ETC1||i===v.RGB_A_PVRTC_4BPPV1||i===v.RGB_A_PVRTC_2BPPV1}e&&this.grayscale?this._instanceMaterialType=N.USE_ALPHA_SEPARATED_AND_GRAY:e?this._instanceMaterialType=N.USE_ALPHA_SEPARATED:this.grayscale?this._instanceMaterialType=N.GRAYSCALE:this._instanceMaterialType=N.ADD_COLOR_AND_TEXTURE,this.updateMaterial()},r._render=function(t){t.commitComp(this,this._spriteFrame,this._assembler,null)},r._canRender=function(){if(!t.prototype._canRender.call(this))return!1;var e=this._spriteFrame;return!(!e||!e.textureLoaded())},r._flushAssembler=function(){var t=e.Assembler.getAssembler(this);this._assembler!==t&&(this.destroyRenderData(),this._assembler=t),this._renderData||this._assembler&&this._assembler.createData&&(this._renderData=this._assembler.createData(this),this._renderData.material=this.getRenderMaterial(0),this.markForUpdateRenderData(),this._updateColor())},r._applySpriteSize=function(){if(this._spriteFrame){if(Ai.RAW===this._sizeMode){var t=this._spriteFrame.originalSize;this.node._uiProps.uiTransformComp.setContentSize(t)}else if(Ai.TRIMMED===this._sizeMode){var e=this._spriteFrame.getRect();this.node._uiProps.uiTransformComp.setContentSize(e.width,e.height)}this._activateMaterial()}},r._resized=function(){},r._activateMaterial=function(){var t=this._spriteFrame,e=this.getRenderMaterial(0);a.game.renderType!==a.game.RENDER_TYPE_CANVAS?(t&&e&&this.markForUpdateRenderData(),this._renderData&&(this._renderData.material=e)):this.markForUpdateRenderData()},r._onTextureLoaded=function(){this.isValid&&(this.changeMaterialForDefine(),this._applySpriteSize())},r._applySpriteFrame=function(t){var e=this._spriteFrame;this._renderData&&(t&&t.off("load",this._markForUpdateUvDirty),e&&e.on("load",this._markForUpdateUvDirty,this),this._renderData.uvDirty||(this._renderData.uvDirty=!t||!e||t.uvHash!==e.uvHash),this._renderDataFlag=this._renderData.uvDirty),e&&(t&&e===t||(e.loaded?this._onTextureLoaded():e.once("load",this._onTextureLoaded,this)))},r._markForUpdateUvDirty=function(){this._renderData&&(this._renderData.uvDirty=!0,this._renderDataFlag=!0)},f(e,[{key:"spriteAtlas",get:function(){return this._atlas},set:function(t){this._atlas!==t&&(this._atlas=t)}},{key:"spriteFrame",get:function(){return this._spriteFrame},set:function(t){if(this._spriteFrame!==t){var e=this._spriteFrame;this._spriteFrame=t,this.markForUpdateRenderData(!1),this._applySpriteFrame(e)}}},{key:"type",get:function(){return this._type},set:function(t){this._type!==t&&(this._type=t,this._flushAssembler())}},{key:"fillType",get:function(){return this._fillType},set:function(t){this._fillType!==t&&(t===Fi.RADIAL||this._fillType===Fi.RADIAL?(this.destroyRenderData(),this._renderData=null):this._renderData&&this.markForUpdateRenderData(!0)),this._fillType=t,this._flushAssembler()}},{key:"fillCenter",get:function(){return this._fillCenter},set:function(t){this._fillCenter.x=t.x,this._fillCenter.y=t.y,this._type===vi.FILLED&&this._renderData&&this.markForUpdateRenderData()}},{key:"fillStart",get:function(){return this._fillStart},set:function(t){this._fillStart=L(t,-1,1),this._type===vi.FILLED&&this._renderData&&(this.markForUpdateRenderData(),this._renderData.uvDirty=!0)}},{key:"fillRange",get:function(){return this._fillRange},set:function(t){this._fillRange=L(t,-1,1),this._type===vi.FILLED&&this._renderData&&(this.markForUpdateRenderData(),this._renderData.uvDirty=!0)}},{key:"trim",get:function(){return this._isTrimmedMode},set:function(t){this._isTrimmedMode!==t&&(this._isTrimmedMode=t,this._type===vi.SIMPLE&&this._renderData&&this.markForUpdateRenderData(!0))}},{key:"grayscale",get:function(){return this._useGrayscale},set:function(t){this._useGrayscale!==t&&(this._useGrayscale=t,this._instanceMaterialType=!0===t?N.GRAYSCALE:N.ADD_COLOR_AND_TEXTURE,this.updateMaterial())}},{key:"sizeMode",get:function(){return this._sizeMode},set:function(t){this._sizeMode!==t&&(this._sizeMode=t,t!==Ai.CUSTOM&&this._applySpriteSize())}}]),e}(j),Di.FillType=Fi,Di.Type=vi,Di.SizeMode=Ai,Di.EventType=wi,n((li=bi).prototype,"spriteAtlas",[je,Ne,Be],Object.getOwnPropertyDescriptor(li.prototype,"spriteAtlas"),li.prototype),n(li.prototype,"spriteFrame",[Ge,We,Ye],Object.getOwnPropertyDescriptor(li.prototype,"spriteFrame"),li.prototype),n(li.prototype,"type",[Xe,Ve,Ze],Object.getOwnPropertyDescriptor(li.prototype,"type"),li.prototype),n(li.prototype,"fillType",[$e,Ke],Object.getOwnPropertyDescriptor(li.prototype,"fillType"),li.prototype),n(li.prototype,"fillCenter",[qe],Object.getOwnPropertyDescriptor(li.prototype,"fillCenter"),li.prototype),n(li.prototype,"fillStart",[Je,Qe],Object.getOwnPropertyDescriptor(li.prototype,"fillStart"),li.prototype),n(li.prototype,"fillRange",[ti,ei],Object.getOwnPropertyDescriptor(li.prototype,"fillRange"),li.prototype),n(li.prototype,"trim",[ii,ri],Object.getOwnPropertyDescriptor(li.prototype,"trim"),li.prototype),n(li.prototype,"grayscale",[u],Object.getOwnPropertyDescriptor(li.prototype,"grayscale"),li.prototype),n(li.prototype,"sizeMode",[ni,ai,oi],Object.getOwnPropertyDescriptor(li.prototype,"sizeMode"),li.prototype),hi=n(li.prototype,"_spriteFrame",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ui=n(li.prototype,"_type",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return vi.SIMPLE}}),fi=n(li.prototype,"_fillType",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Fi.HORIZONTAL}}),pi=n(li.prototype,"_sizeMode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Ai.TRIMMED}}),ci=n(li.prototype,"_fillCenter",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new k(0,0)}}),_i=n(li.prototype,"_fillStart",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),yi=n(li.prototype,"_fillRange",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),di=n(li.prototype,"_isTrimmedMode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),gi=n(li.prototype,"_useGrayscale",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),mi=n(li.prototype,"_atlas",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),si=li))||si)||si)||si)||si))}}}));
