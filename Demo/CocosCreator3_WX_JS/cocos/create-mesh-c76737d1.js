System.register(["./coordinates-converts-utils-bf8713a9.js","./json-asset-0797cbb7.js","./mesh-3d4ecfd0.js"],(function(t){"use strict";var e,a,r,n,s,i,o,u,f,l,v;return{setters:[function(t){e=t.u,a=t.t,r=t.d7,n=t.F,s=t.A,i=t.b2,o=t.cD},function(t){u=t.r,f=t.w},function(t){l=t.M,v=t.B}],execute:function(){var d;t({c:function(t,s,u){u=u||{};var d,m=[],T=0,b=[],g=0,R=t.positions.slice();if(R.length>0){if(d=null,t.attributes)for(var A,w=a(t.attributes);!(A=w()).done;){var O=A.value;if(O.name===e.ATTR_POSITION){d=O;break}}d||(d=h[0]),m.push(d);var p=r[d.format];g=Math.max(g,Math.floor(R.length/p.count)),b.push({offset:T,data:R,attribute:d}),T+=p.size}if(t.normals&&t.normals.length>0){if(d=null,t.attributes)for(var x,M=a(t.attributes);!(x=M()).done;){var _=x.value;if(_.name===e.ATTR_NORMAL){d=_;break}}d||(d=h[1]);var B=r[d.format];m.push(d),g=Math.max(g,Math.floor(t.normals.length/B.count)),b.push({offset:T,data:t.normals,attribute:d}),T+=B.size}if(t.uvs&&t.uvs.length>0){if(d=null,t.attributes)for(var L,N=a(t.attributes);!(L=N()).done;){var I=L.value;if(I.name===e.ATTR_TEX_COORD){d=I;break}}d||(d=h[2]);var y=r[d.format];m.push(d),g=Math.max(g,Math.floor(t.uvs.length/y.count)),b.push({offset:T,data:t.uvs,attribute:d}),T+=y.size}if(t.tangents&&t.tangents.length>0){if(d=null,t.attributes)for(var z,G=a(t.attributes);!(z=G()).done;){var C=z.value;if(C.name===e.ATTR_TANGENT){d=C;break}}d||(d=h[3]);var D=r[d.format];m.push(d),g=Math.max(g,Math.floor(t.tangents.length/D.count)),b.push({offset:T,data:t.tangents,attribute:d}),T+=D.size}if(t.colors&&t.colors.length>0){if(d=null,t.attributes)for(var P,E=a(t.attributes);!(P=E()).done;){var F=P.value;if(F.name===e.ATTR_COLOR){d=F;break}}d||(d=h[4]);var k=r[d.format];m.push(d),g=Math.max(g,Math.floor(t.colors.length/k.count)),b.push({offset:T,data:t.colors,attribute:d}),T+=k.size}if(t.customAttributes)for(var S,V=a(t.customAttributes);!(S=V()).done;){var j=S.value,U=r[j.attr.format];m.push(j.attr),g=Math.max(g,Math.floor(j.values.length/U.count)),b.push({offset:T,data:j.values,attribute:j.attr}),T+=U.size}for(var X=new v,q=new ArrayBuffer(g*T),H=new DataView(q),J=0,K=b;J<K.length;J++){var Q=K[J];f(H,Q.data,Q.attribute.format,Q.offset,T)}X.setNextAlignment(0);var W={attributes:m,view:{offset:X.getLength(),length:q.byteLength,count:g,stride:T}};X.addBuffer(q);var Y=null,Z=0;if(t.indices){var $=t.indices;Z=$.length,Y=new ArrayBuffer(2*Z);var tt=new DataView(Y);f(tt,$,n.R16UI)}var et={primitiveMode:t.primitiveMode||o.TRIANGLE_LIST,vertexBundelIndices:[0]};Y&&(X.setNextAlignment(2),et.indexView={offset:X.getLength(),length:Y.byteLength,count:Z,stride:2},X.addBuffer(Y));var at=t.minPos;if(!at&&u.calculateBounds){at=i.set(new i,1/0,1/0,1/0);for(var rt=0;rt<g;++rt)i.set(c,R[3*rt+0],R[3*rt+1],R[3*rt+2]),i.min(at,at,c)}var nt=t.maxPos;if(!nt&&u.calculateBounds){nt=i.set(new i,-1/0,-1/0,-1/0);for(var st=0;st<g;++st)i.set(c,R[3*st+0],R[3*st+1],R[3*st+2]),i.max(nt,nt,c)}var it={vertexBundles:[W],primitives:[et]};return at&&(it.minPosition=new i(at.x,at.y,at.z)),nt&&(it.maxPosition=new i(nt.x,nt.y,nt.z)),s||(s=new l),s.reset({struct:it,data:new Uint8Array(X.getCombined())}),s},r:function(t,e){void 0===e&&(e=0);for(var s,i={positions:[]},o=new DataView(t.data.buffer,t.data.byteOffset,t.data.byteLength),f=t.struct,l=f.primitives[e],v=a(l.vertexBundelIndices);!(s=v()).done;)for(var h,c=s.value,m=f.vertexBundles[c],T=m.view.offset,b=m.view,g=b.length,R=b.stride,A=a(m.attributes);!(h=A()).done;){var w=h.value,O=d[w.name];O&&(i[O]=(i[O]||[]).concat(u(o,w.format,T,g,R))),T+=r[w.format].size}var p=l.indexView;return i.indices=u(o,n["R"+8*p.stride+"UI"],p.offset,p.length),i}}),function(t){t[t.positions=e.ATTR_POSITION]="positions",t[t.normals=e.ATTR_NORMAL]="normals",t[t.uvs=e.ATTR_TEX_COORD]="uvs",t[t.colors=e.ATTR_COLOR]="colors"}(d||(d={}));var h=[new s(e.ATTR_POSITION,n.RGB32F),new s(e.ATTR_NORMAL,n.RGB32F),new s(e.ATTR_TEX_COORD,n.RG32F),new s(e.ATTR_TANGENT,n.RGBA32F),new s(e.ATTR_COLOR,n.RGBA32F)],c=new i}}}));
